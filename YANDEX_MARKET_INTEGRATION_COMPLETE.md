# ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ø–Ω–¥–µ–∫—Å –ú–∞—Ä–∫–µ—Ç–∞ - –ì–û–¢–û–í–û

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### 1. –ò–º–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤ ‚úÖ
**–§–∞–π–ª—ã:**
- `/app/backend/fbs_orders_routes.py` - —Ä—É—á–Ω–æ–π –∏–º–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤
- `/app/backend/order_sync_scheduler.py` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–∫–∞–∑–æ–≤ Yandex (id, status, creationDate, buyer, items)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã –∑–∞–∫–∞–∑–∞ (—Ñ–æ—Ä–º–∞—Ç: `"02-02-2023"`)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞ (order ID)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è (–§–ò–û, —Ç–µ–ª–µ—Ñ–æ–Ω)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ (–≥–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä–æ–≤ (offerId=–∞—Ä—Ç–∏–∫—É–ª, count, price)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

### 2. –°–∫–ª–∞–¥—ã –Ø–Ω–¥–µ–∫—Å –ú–∞—Ä–∫–µ—Ç–∞ ‚úÖ
**–§–∞–π–ª:** `/app/backend/marketplace_warehouse_routes.py`

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–∫–ª–∞–¥–æ–≤ —á–µ—Ä–µ–∑ API: `GET /businesses/{businessId}/warehouses`
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É (FBS, RFBS, DBS - –±–µ–∑ FBO)
- ‚úÖ –°–≤—è–∑—å —Å–∫–ª–∞–¥–æ–≤ —á–µ—Ä–µ–∑ UI: —Ä–∞–∑–¥–µ–ª "–°–≤—è–∑—å —Å–æ —Å–∫–ª–∞–¥–∞–º–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤"

### 3. –ö–æ–Ω–Ω–µ–∫—Ç–æ—Ä Yandex ‚úÖ
**–§–∞–π–ª:** `/app/backend/connectors.py`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤–Ω—É—Ç—Ä—å –∫–ª–∞—Å—Å–∞ `YandexMarketConnector`:
  - `get_orders(date_from, date_to, campaign_id)` - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã
  - `get_order_status(order_id, campaign_id)` - —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
  - `map_yandex_status_to_internal(status)` - –º–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ `campaign_id` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ—Ä–µ—Ç—Å—è –∏–∑ `client_id`

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –Ø–Ω–¥–µ–∫—Å –ú–∞—Ä–∫–µ—Ç
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **"–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"**
2. –ù–∞–∂–∞—Ç—å **"–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é"**
3. –í—ã–±—Ä–∞—Ç—å **"–Ø–Ω–¥–µ–∫—Å –ú–∞—Ä–∫–µ—Ç"**
4. –í–≤–µ—Å—Ç–∏:
   - **Client ID** = Campaign ID (–∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –Ø–ú)
   - **API Key** = OAuth —Ç–æ–∫–µ–Ω (–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ API)
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

### –®–∞–≥ 2: –°–≤—è–∑–∞—Ç—å —Å–∫–ª–∞–¥—ã
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **"–°–∫–ª–∞–¥—ã"** ‚Üí **"–°–≤—è–∑—å —Å–æ —Å–∫–ª–∞–¥–∞–º–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤"**
2. –í—ã–±—Ä–∞—Ç—å —Å–≤–æ–π —Å–∫–ª–∞–¥
3. –ù–∞–∂–∞—Ç—å **"–°–≤—è–∑–∞—Ç—å —Å–∫–ª–∞–¥"**
4. –í—ã–±—Ä–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é **–Ø–Ω–¥–µ–∫—Å –ú–∞—Ä–∫–µ—Ç**
5. –í—ã–±—Ä–∞—Ç—å —Å–∫–ª–∞–¥ –Ω–∞ –Ø–ú –∏–∑ —Å–ø–∏—Å–∫–∞
6. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

### –®–∞–≥ 3: –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **"–ó–∞–∫–∞–∑—ã FBS"**
2. –ù–∞–∂–∞—Ç—å **"–ò–ú–ü–û–†–¢ –ó–ê–ö–ê–ó–û–í"**
3. –í—ã–±—Ä–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é **–Ø–Ω–¥–µ–∫—Å –ú–∞—Ä–∫–µ—Ç**
4. –£–∫–∞–∑–∞—Ç—å –ø–µ—Ä–∏–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π)
5. –ù–∞–∂–∞—Ç—å **"–ó–ê–ì–†–£–ó–ò–¢–¨ –ó–ê–ö–ê–ó–´"**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–∫–∞–∑—ã –∑–∞–≥—Ä—É–∑—è—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏
- ‚úÖ –ù–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–æ–≤ –±—É–¥—É—Ç –Ω–∞—Å—Ç–æ—è—â–∏–º–∏ (ID —Å –Ø–ú)
- ‚úÖ –¢–æ–≤–∞—Ä—ã, –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ –∏ –∞–¥—Ä–µ—Å–∞ —Ä–∞—Å–ø–∞—Ä—Å—è—Ç—Å—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–∫–ª–∞–¥–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã Yandex –∫–∞–∂–¥—ã–µ **5 –º–∏–Ω—É—Ç**.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö Yandex API:

### –ó–∞–∫–∞–∑:
```json
{
  "id": 12345,
  "status": "PROCESSING",
  "creationDate": "02-02-2023",
  "buyer": {
    "lastName": "–ò–≤–∞–Ω–æ–≤",
    "firstName": "–ò–≤–∞–Ω",
    "phone": "+79001234567"
  },
  "delivery": {
    "address": {
      "city": "–ú–æ—Å–∫–≤–∞",
      "street": "–õ–µ–Ω–∏–Ω–∞",
      "house": "1",
      "apartment": "10"
    }
  },
  "items": [
    {
      "offerId": "ARTICLE-001",
      "offerName": "–¢–æ–≤–∞—Ä 1",
      "price": 1000.00,
      "count": 1
    }
  ]
}
```

### –°—Ç–∞—Ç—É—Å—ã Yandex ‚Üí –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ:
- `RESERVED` ‚Üí `new`
- `PROCESSING` ‚Üí `awaiting_shipment`
- `DELIVERY` ‚Üí `delivering` (—Å–ø–∏—Å–∞–Ω–∏–µ)
- `DELIVERED` ‚Üí `delivered`
- `CANCELLED` ‚Üí `cancelled`

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API:
- –ó–∞–∫–∞–∑—ã: https://yandex.ru/dev/market/partner-api/doc/ru/reference/orders/getOrders
- –°–∫–ª–∞–¥—ã: https://yandex.ru/dev/market/partner-api/doc/ru/step-by-step/warehouses

## –ì–æ—Ç–æ–≤–æ! üéâ
–Ø–Ω–¥–µ–∫—Å –ú–∞—Ä–∫–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω:
- ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–∞–º–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞—Ç—ã –∏ –Ω–æ–º–µ—Ä–∞
