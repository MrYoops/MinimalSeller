function Up(e,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function vm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nm={exports:{}},cl={},wm={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ur=Symbol.for("react.element"),Wp=Symbol.for("react.portal"),Vp=Symbol.for("react.fragment"),Hp=Symbol.for("react.strict_mode"),qp=Symbol.for("react.profiler"),Qp=Symbol.for("react.provider"),Kp=Symbol.for("react.context"),Yp=Symbol.for("react.forward_ref"),Gp=Symbol.for("react.suspense"),Jp=Symbol.for("react.memo"),Xp=Symbol.for("react.lazy"),Oc=Symbol.iterator;function Zp(e){return e===null||typeof e!="object"?null:(e=Oc&&e[Oc]||e["@@iterator"],typeof e=="function"?e:null)}var km={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_m=Object.assign,Sm={};function Wn(e,s,n){this.props=e,this.context=s,this.refs=Sm,this.updater=n||km}Wn.prototype.isReactComponent={};Wn.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};Wn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cm(){}Cm.prototype=Wn.prototype;function bi(e,s,n){this.props=e,this.context=s,this.refs=Sm,this.updater=n||km}var ji=bi.prototype=new Cm;ji.constructor=bi;_m(ji,Wn.prototype);ji.isPureReactComponent=!0;var Rc=Array.isArray,Em=Object.prototype.hasOwnProperty,vi={current:null},Lm={key:!0,ref:!0,__self:!0,__source:!0};function Pm(e,s,n){var r,a={},l=null,o=null;if(s!=null)for(r in s.ref!==void 0&&(o=s.ref),s.key!==void 0&&(l=""+s.key),s)Em.call(s,r)&&!Lm.hasOwnProperty(r)&&(a[r]=s[r]);var d=arguments.length-2;if(d===1)a.children=n;else if(1<d){for(var m=Array(d),i=0;i<d;i++)m[i]=arguments[i+2];a.children=m}if(e&&e.defaultProps)for(r in d=e.defaultProps,d)a[r]===void 0&&(a[r]=d[r]);return{$$typeof:Ur,type:e,key:l,ref:o,props:a,_owner:vi.current}}function eh(e,s){return{$$typeof:Ur,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function Ni(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ur}function th(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return s[n]})}var Tc=/\/+/g;function $l(e,s){return typeof e=="object"&&e!==null&&e.key!=null?th(""+e.key):s.toString(36)}function ja(e,s,n,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ur:case Wp:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+$l(o,0):r,Rc(a)?(n="",e!=null&&(n=e.replace(Tc,"$&/")+"/"),ja(a,s,n,"",function(i){return i})):a!=null&&(Ni(a)&&(a=eh(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Tc,"$&/")+"/")+e)),s.push(a)),1;if(o=0,r=r===""?".":r+":",Rc(e))for(var d=0;d<e.length;d++){l=e[d];var m=r+$l(l,d);o+=ja(l,s,n,m,a)}else if(m=Zp(e),typeof m=="function")for(e=m.call(e),d=0;!(l=e.next()).done;)l=l.value,m=r+$l(l,d++),o+=ja(l,s,n,m,a);else if(l==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return o}function Zr(e,s,n){if(e==null)return e;var r=[],a=0;return ja(e,r,"","",function(l){return s.call(n,l,a++)}),r}function sh(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var ut={current:null},va={transition:null},nh={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:va,ReactCurrentOwner:vi};function zm(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Zr,forEach:function(e,s,n){Zr(e,function(){s.apply(this,arguments)},n)},count:function(e){var s=0;return Zr(e,function(){s++}),s},toArray:function(e){return Zr(e,function(s){return s})||[]},only:function(e){if(!Ni(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=Wn;he.Fragment=Vp;he.Profiler=qp;he.PureComponent=bi;he.StrictMode=Hp;he.Suspense=Gp;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nh;he.act=zm;he.cloneElement=function(e,s,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_m({},e.props),a=e.key,l=e.ref,o=e._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,o=vi.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(m in s)Em.call(s,m)&&!Lm.hasOwnProperty(m)&&(r[m]=s[m]===void 0&&d!==void 0?d[m]:s[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){d=Array(m);for(var i=0;i<m;i++)d[i]=arguments[i+2];r.children=d}return{$$typeof:Ur,type:e.type,key:a,ref:l,props:r,_owner:o}};he.createContext=function(e){return e={$$typeof:Kp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Qp,_context:e},e.Consumer=e};he.createElement=Pm;he.createFactory=function(e){var s=Pm.bind(null,e);return s.type=e,s};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:Yp,render:e}};he.isValidElement=Ni;he.lazy=function(e){return{$$typeof:Xp,_payload:{_status:-1,_result:e},_init:sh}};he.memo=function(e,s){return{$$typeof:Jp,type:e,compare:s===void 0?null:s}};he.startTransition=function(e){var s=va.transition;va.transition={};try{e()}finally{va.transition=s}};he.unstable_act=zm;he.useCallback=function(e,s){return ut.current.useCallback(e,s)};he.useContext=function(e){return ut.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return ut.current.useDeferredValue(e)};he.useEffect=function(e,s){return ut.current.useEffect(e,s)};he.useId=function(){return ut.current.useId()};he.useImperativeHandle=function(e,s,n){return ut.current.useImperativeHandle(e,s,n)};he.useInsertionEffect=function(e,s){return ut.current.useInsertionEffect(e,s)};he.useLayoutEffect=function(e,s){return ut.current.useLayoutEffect(e,s)};he.useMemo=function(e,s){return ut.current.useMemo(e,s)};he.useReducer=function(e,s,n){return ut.current.useReducer(e,s,n)};he.useRef=function(e){return ut.current.useRef(e)};he.useState=function(e){return ut.current.useState(e)};he.useSyncExternalStore=function(e,s,n){return ut.current.useSyncExternalStore(e,s,n)};he.useTransition=function(){return ut.current.useTransition()};he.version="18.3.1";wm.exports=he;var p=wm.exports;const K=vm(p),rh=Up({__proto__:null,default:K},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah=p,lh=Symbol.for("react.element"),oh=Symbol.for("react.fragment"),ih=Object.prototype.hasOwnProperty,ch=ah.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dh={key:!0,ref:!0,__self:!0,__source:!0};function Om(e,s,n){var r,a={},l=null,o=null;n!==void 0&&(l=""+n),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(o=s.ref);for(r in s)ih.call(s,r)&&!dh.hasOwnProperty(r)&&(a[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:lh,type:e,key:l,ref:o,props:a,_owner:ch.current}}cl.Fragment=oh;cl.jsx=Om;cl.jsxs=Om;Nm.exports=cl;var t=Nm.exports,po={},Rm={exports:{}},Et={},Tm={exports:{}},Fm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(D,B){var $=D.length;D.push(B);e:for(;0<$;){var Q=$-1>>>1,C=D[Q];if(0<a(C,B))D[Q]=B,D[$]=C,$=Q;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var B=D[0],$=D.pop();if($!==B){D[0]=$;e:for(var Q=0,C=D.length,q=C>>>1;Q<q;){var J=2*(Q+1)-1,O=D[J],W=J+1,se=D[W];if(0>a(O,$))W<C&&0>a(se,O)?(D[Q]=se,D[W]=$,Q=W):(D[Q]=O,D[J]=$,Q=J);else if(W<C&&0>a(se,$))D[Q]=se,D[W]=$,Q=W;else break e}}return B}function a(D,B){var $=D.sortIndex-B.sortIndex;return $!==0?$:D.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,d=o.now();e.unstable_now=function(){return o.now()-d}}var m=[],i=[],u=1,c=null,h=3,g=!1,f=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(D){for(var B=n(i);B!==null;){if(B.callback===null)r(i);else if(B.startTime<=D)r(i),B.sortIndex=B.expirationTime,s(m,B);else break;B=n(i)}}function _(D){if(v=!1,j(D),!f)if(n(m)!==null)f=!0,A(P);else{var B=n(i);B!==null&&H(_,B.startTime-D)}}function P(D,B){f=!1,v&&(v=!1,x(b),b=-1),g=!0;var $=h;try{for(j(B),c=n(m);c!==null&&(!(c.expirationTime>B)||D&&!N());){var Q=c.callback;if(typeof Q=="function"){c.callback=null,h=c.priorityLevel;var C=Q(c.expirationTime<=B);B=e.unstable_now(),typeof C=="function"?c.callback=C:c===n(m)&&r(m),j(B)}else r(m);c=n(m)}if(c!==null)var q=!0;else{var J=n(i);J!==null&&H(_,J.startTime-B),q=!1}return q}finally{c=null,h=$,g=!1}}var k=!1,z=null,b=-1,S=5,E=-1;function N(){return!(e.unstable_now()-E<S)}function R(){if(z!==null){var D=e.unstable_now();E=D;var B=!0;try{B=z(!0,D)}finally{B?I():(k=!1,z=null)}}else k=!1}var I;if(typeof y=="function")I=function(){y(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,T=L.port2;L.port1.onmessage=R,I=function(){T.postMessage(null)}}else I=function(){w(R,0)};function A(D){z=D,k||(k=!0,I())}function H(D,B){b=w(function(){D(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){f||g||(f=!0,A(P))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(m)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var $=h;h=B;try{return D()}finally{h=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,B){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var $=h;h=D;try{return B()}finally{h=$}},e.unstable_scheduleCallback=function(D,B,$){var Q=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Q+$:Q):$=Q,D){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=$+C,D={id:u++,callback:B,priorityLevel:D,startTime:$,expirationTime:C,sortIndex:-1},$>Q?(D.sortIndex=$,s(i,D),n(m)===null&&D===n(i)&&(v?(x(b),b=-1):v=!0,H(_,$-Q))):(D.sortIndex=C,s(m,D),f||g||(f=!0,A(P))),D},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(D){var B=h;return function(){var $=h;h=B;try{return D.apply(this,arguments)}finally{h=$}}}})(Fm);Tm.exports=Fm;var mh=Tm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh=p,St=mh;function Y(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $m=new Set,Nr={};function dn(e,s){Rn(e,s),Rn(e+"Capture",s)}function Rn(e,s){for(Nr[e]=s,e=0;e<s.length;e++)$m.add(s[e])}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ho=Object.prototype.hasOwnProperty,xh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fc={},$c={};function ph(e){return ho.call($c,e)?!0:ho.call(Fc,e)?!1:xh.test(e)?$c[e]=!0:(Fc[e]=!0,!1)}function hh(e,s,n,r){if(n!==null&&n.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fh(e,s,n,r){if(s===null||typeof s>"u"||hh(e,s,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function xt(e,s,n,r,a,l,o){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=s,this.sanitizeURL=l,this.removeEmptyString=o}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ze[e]=new xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];Ze[s]=new xt(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ze[e]=new xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ze[e]=new xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ze[e]=new xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ze[e]=new xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ze[e]=new xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ze[e]=new xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ze[e]=new xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var wi=/[\-:]([a-z])/g;function ki(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(wi,ki);Ze[s]=new xt(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(wi,ki);Ze[s]=new xt(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(wi,ki);Ze[s]=new xt(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ze[e]=new xt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ze[e]=new xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function _i(e,s,n,r){var a=Ze.hasOwnProperty(s)?Ze[s]:null;(a!==null?a.type!==0:r||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(fh(s,n,a,r)&&(n=null),r||a===null?ph(s)&&(n===null?e.removeAttribute(s):e.setAttribute(s,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(s=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(s):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,s,n):e.setAttribute(s,n))))}var fs=uh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ea=Symbol.for("react.element"),hn=Symbol.for("react.portal"),fn=Symbol.for("react.fragment"),Si=Symbol.for("react.strict_mode"),fo=Symbol.for("react.profiler"),Dm=Symbol.for("react.provider"),Mm=Symbol.for("react.context"),Ci=Symbol.for("react.forward_ref"),yo=Symbol.for("react.suspense"),go=Symbol.for("react.suspense_list"),Ei=Symbol.for("react.memo"),vs=Symbol.for("react.lazy"),Am=Symbol.for("react.offscreen"),Dc=Symbol.iterator;function Jn(e){return e===null||typeof e!="object"?null:(e=Dc&&e[Dc]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,Dl;function lr(e){if(Dl===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);Dl=s&&s[1]||""}return`
`+Dl+e}var Ml=!1;function Al(e,s){if(!e||Ml)return"";Ml=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(i){var r=i}Reflect.construct(e,[],s)}else{try{s.call()}catch(i){r=i}e.call(s.prototype)}else{try{throw Error()}catch(i){r=i}e()}}catch(i){if(i&&r&&typeof i.stack=="string"){for(var a=i.stack.split(`
`),l=r.stack.split(`
`),o=a.length-1,d=l.length-1;1<=o&&0<=d&&a[o]!==l[d];)d--;for(;1<=o&&0<=d;o--,d--)if(a[o]!==l[d]){if(o!==1||d!==1)do if(o--,d--,0>d||a[o]!==l[d]){var m=`
`+a[o].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=o&&0<=d);break}}}finally{Ml=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?lr(e):""}function yh(e){switch(e.tag){case 5:return lr(e.type);case 16:return lr("Lazy");case 13:return lr("Suspense");case 19:return lr("SuspenseList");case 0:case 2:case 15:return e=Al(e.type,!1),e;case 11:return e=Al(e.type.render,!1),e;case 1:return e=Al(e.type,!0),e;default:return""}}function bo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fn:return"Fragment";case hn:return"Portal";case fo:return"Profiler";case Si:return"StrictMode";case yo:return"Suspense";case go:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mm:return(e.displayName||"Context")+".Consumer";case Dm:return(e._context.displayName||"Context")+".Provider";case Ci:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ei:return s=e.displayName||null,s!==null?s:bo(e.type)||"Memo";case vs:s=e._payload,e=e._init;try{return bo(e(s))}catch{}}return null}function gh(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bo(s);case 8:return s===Si?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ms(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Im(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function bh(e){var s=Im(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),r=""+e[s];if(!e.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,s,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function ta(e){e._valueTracker||(e._valueTracker=bh(e))}function Bm(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var n=s.getValue(),r="";return e&&(r=Im(e)?e.checked?"true":"false":e.value),e=r,e!==n?(s.setValue(e),!0):!1}function $a(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jo(e,s){var n=s.checked;return Pe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Mc(e,s){var n=s.defaultValue==null?"":s.defaultValue,r=s.checked!=null?s.checked:s.defaultChecked;n=Ms(s.value!=null?s.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Um(e,s){s=s.checked,s!=null&&_i(e,"checked",s,!1)}function vo(e,s){Um(e,s);var n=Ms(s.value),r=s.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?No(e,s.type,n):s.hasOwnProperty("defaultValue")&&No(e,s.type,Ms(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function Ac(e,s,n){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var r=s.type;if(!(r!=="submit"&&r!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,n||s===e.value||(e.value=s),e.defaultValue=s}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function No(e,s,n){(s!=="number"||$a(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var or=Array.isArray;function Cn(e,s,n,r){if(e=e.options,s){s={};for(var a=0;a<n.length;a++)s["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=s.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ms(n),s=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function wo(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Pe({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ic(e,s){var n=s.value;if(n==null){if(n=s.children,s=s.defaultValue,n!=null){if(s!=null)throw Error(Y(92));if(or(n)){if(1<n.length)throw Error(Y(93));n=n[0]}s=n}s==null&&(s=""),n=s}e._wrapperState={initialValue:Ms(n)}}function Wm(e,s){var n=Ms(s.value),r=Ms(s.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),s.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Bc(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function Vm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ko(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?Vm(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sa,Hm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(s,n,r,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(sa=sa||document.createElement("div"),sa.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=sa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function wr(e,s){if(s){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=s;return}}e.textContent=s}var mr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jh=["Webkit","ms","Moz","O"];Object.keys(mr).forEach(function(e){jh.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),mr[s]=mr[e]})});function qm(e,s,n){return s==null||typeof s=="boolean"||s===""?"":n||typeof s!="number"||s===0||mr.hasOwnProperty(e)&&mr[e]?(""+s).trim():s+"px"}function Qm(e,s){e=e.style;for(var n in s)if(s.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=qm(n,s[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var vh=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _o(e,s){if(s){if(vh[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Y(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Y(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Y(62))}}function So(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Co=null;function Li(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Eo=null,En=null,Ln=null;function Uc(e){if(e=Hr(e)){if(typeof Eo!="function")throw Error(Y(280));var s=e.stateNode;s&&(s=pl(s),Eo(e.stateNode,e.type,s))}}function Km(e){En?Ln?Ln.push(e):Ln=[e]:En=e}function Ym(){if(En){var e=En,s=Ln;if(Ln=En=null,Uc(e),s)for(e=0;e<s.length;e++)Uc(s[e])}}function Gm(e,s){return e(s)}function Jm(){}var Il=!1;function Xm(e,s,n){if(Il)return e(s,n);Il=!0;try{return Gm(e,s,n)}finally{Il=!1,(En!==null||Ln!==null)&&(Jm(),Ym())}}function kr(e,s){var n=e.stateNode;if(n===null)return null;var r=pl(n);if(r===null)return null;n=r[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,s,typeof n));return n}var Lo=!1;if(ds)try{var Xn={};Object.defineProperty(Xn,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",Xn,Xn),window.removeEventListener("test",Xn,Xn)}catch{Lo=!1}function Nh(e,s,n,r,a,l,o,d,m){var i=Array.prototype.slice.call(arguments,3);try{s.apply(n,i)}catch(u){this.onError(u)}}var ur=!1,Da=null,Ma=!1,Po=null,wh={onError:function(e){ur=!0,Da=e}};function kh(e,s,n,r,a,l,o,d,m){ur=!1,Da=null,Nh.apply(wh,arguments)}function _h(e,s,n,r,a,l,o,d,m){if(kh.apply(this,arguments),ur){if(ur){var i=Da;ur=!1,Da=null}else throw Error(Y(198));Ma||(Ma=!0,Po=i)}}function mn(e){var s=e,n=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(n=s.return),e=s.return;while(e)}return s.tag===3?n:null}function Zm(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Wc(e){if(mn(e)!==e)throw Error(Y(188))}function Sh(e){var s=e.alternate;if(!s){if(s=mn(e),s===null)throw Error(Y(188));return s!==e?null:e}for(var n=e,r=s;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Wc(a),e;if(l===r)return Wc(a),s;l=l.sibling}throw Error(Y(188))}if(n.return!==r.return)n=a,r=l;else{for(var o=!1,d=a.child;d;){if(d===n){o=!0,n=a,r=l;break}if(d===r){o=!0,r=a,n=l;break}d=d.sibling}if(!o){for(d=l.child;d;){if(d===n){o=!0,n=l,r=a;break}if(d===r){o=!0,r=l,n=a;break}d=d.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:s}function eu(e){return e=Sh(e),e!==null?tu(e):null}function tu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=tu(e);if(s!==null)return s;e=e.sibling}return null}var su=St.unstable_scheduleCallback,Vc=St.unstable_cancelCallback,Ch=St.unstable_shouldYield,Eh=St.unstable_requestPaint,$e=St.unstable_now,Lh=St.unstable_getCurrentPriorityLevel,Pi=St.unstable_ImmediatePriority,nu=St.unstable_UserBlockingPriority,Aa=St.unstable_NormalPriority,Ph=St.unstable_LowPriority,ru=St.unstable_IdlePriority,dl=null,es=null;function zh(e){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(dl,e,void 0,(e.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:Th,Oh=Math.log,Rh=Math.LN2;function Th(e){return e>>>=0,e===0?32:31-(Oh(e)/Rh|0)|0}var na=64,ra=4194304;function ir(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ia(e,s){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var d=o&~a;d!==0?r=ir(d):(l&=o,l!==0&&(r=ir(l)))}else o=n&~a,o!==0?r=ir(o):l!==0&&(r=ir(l));if(r===0)return 0;if(s!==0&&s!==r&&!(s&a)&&(a=r&-r,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(r&4&&(r|=n&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=r;0<s;)n=31-Vt(s),a=1<<n,r|=e[n],s&=~a;return r}function Fh(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $h(e,s){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-Vt(l),d=1<<o,m=a[o];m===-1?(!(d&n)||d&r)&&(a[o]=Fh(d,s)):m<=s&&(e.expiredLanes|=d),l&=~d}}function zo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function au(){var e=na;return na<<=1,!(na&4194240)&&(na=64),e}function Bl(e){for(var s=[],n=0;31>n;n++)s.push(e);return s}function Wr(e,s,n){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-Vt(s),e[s]=n}function Dh(e,s){var n=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Vt(n),l=1<<a;s[a]=0,r[a]=-1,e[a]=-1,n&=~l}}function zi(e,s){var n=e.entangledLanes|=s;for(e=e.entanglements;n;){var r=31-Vt(n),a=1<<r;a&s|e[r]&s&&(e[r]|=s),n&=~a}}var ve=0;function lu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ou,Oi,iu,cu,du,Oo=!1,aa=[],Es=null,Ls=null,Ps=null,_r=new Map,Sr=new Map,ws=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hc(e,s){switch(e){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":_r.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sr.delete(s.pointerId)}}function Zn(e,s,n,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:s,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},s!==null&&(s=Hr(s),s!==null&&Oi(s)),e):(e.eventSystemFlags|=r,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function Ah(e,s,n,r,a){switch(s){case"focusin":return Es=Zn(Es,e,s,n,r,a),!0;case"dragenter":return Ls=Zn(Ls,e,s,n,r,a),!0;case"mouseover":return Ps=Zn(Ps,e,s,n,r,a),!0;case"pointerover":var l=a.pointerId;return _r.set(l,Zn(_r.get(l)||null,e,s,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Sr.set(l,Zn(Sr.get(l)||null,e,s,n,r,a)),!0}return!1}function mu(e){var s=Ys(e.target);if(s!==null){var n=mn(s);if(n!==null){if(s=n.tag,s===13){if(s=Zm(n),s!==null){e.blockedOn=s,du(e.priority,function(){iu(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Na(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var n=Ro(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Co=r,n.target.dispatchEvent(r),Co=null}else return s=Hr(n),s!==null&&Oi(s),e.blockedOn=n,!1;s.shift()}return!0}function qc(e,s,n){Na(e)&&n.delete(s)}function Ih(){Oo=!1,Es!==null&&Na(Es)&&(Es=null),Ls!==null&&Na(Ls)&&(Ls=null),Ps!==null&&Na(Ps)&&(Ps=null),_r.forEach(qc),Sr.forEach(qc)}function er(e,s){e.blockedOn===s&&(e.blockedOn=null,Oo||(Oo=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,Ih)))}function Cr(e){function s(a){return er(a,e)}if(0<aa.length){er(aa[0],e);for(var n=1;n<aa.length;n++){var r=aa[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Es!==null&&er(Es,e),Ls!==null&&er(Ls,e),Ps!==null&&er(Ps,e),_r.forEach(s),Sr.forEach(s),n=0;n<ws.length;n++)r=ws[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ws.length&&(n=ws[0],n.blockedOn===null);)mu(n),n.blockedOn===null&&ws.shift()}var Pn=fs.ReactCurrentBatchConfig,Ba=!0;function Bh(e,s,n,r){var a=ve,l=Pn.transition;Pn.transition=null;try{ve=1,Ri(e,s,n,r)}finally{ve=a,Pn.transition=l}}function Uh(e,s,n,r){var a=ve,l=Pn.transition;Pn.transition=null;try{ve=4,Ri(e,s,n,r)}finally{ve=a,Pn.transition=l}}function Ri(e,s,n,r){if(Ba){var a=Ro(e,s,n,r);if(a===null)Jl(e,s,r,Ua,n),Hc(e,r);else if(Ah(a,e,s,n,r))r.stopPropagation();else if(Hc(e,r),s&4&&-1<Mh.indexOf(e)){for(;a!==null;){var l=Hr(a);if(l!==null&&ou(l),l=Ro(e,s,n,r),l===null&&Jl(e,s,r,Ua,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else Jl(e,s,r,null,n)}}var Ua=null;function Ro(e,s,n,r){if(Ua=null,e=Li(r),e=Ys(e),e!==null)if(s=mn(e),s===null)e=null;else if(n=s.tag,n===13){if(e=Zm(s),e!==null)return e;e=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return Ua=e,null}function uu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lh()){case Pi:return 1;case nu:return 4;case Aa:case Ph:return 16;case ru:return 536870912;default:return 16}default:return 16}}var _s=null,Ti=null,wa=null;function xu(){if(wa)return wa;var e,s=Ti,n=s.length,r,a="value"in _s?_s.value:_s.textContent,l=a.length;for(e=0;e<n&&s[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&s[n-r]===a[l-r];r++);return wa=a.slice(e,1<r?1-r:void 0)}function ka(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function la(){return!0}function Qc(){return!1}function Lt(e){function s(n,r,a,l,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(l):l[d]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?la:Qc,this.isPropagationStopped=Qc,this}return Pe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),s}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fi=Lt(Vn),Vr=Pe({},Vn,{view:0,detail:0}),Wh=Lt(Vr),Ul,Wl,tr,ml=Pe({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$i,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tr&&(tr&&e.type==="mousemove"?(Ul=e.screenX-tr.screenX,Wl=e.screenY-tr.screenY):Wl=Ul=0,tr=e),Ul)},movementY:function(e){return"movementY"in e?e.movementY:Wl}}),Kc=Lt(ml),Vh=Pe({},ml,{dataTransfer:0}),Hh=Lt(Vh),qh=Pe({},Vr,{relatedTarget:0}),Vl=Lt(qh),Qh=Pe({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Kh=Lt(Qh),Yh=Pe({},Vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gh=Lt(Yh),Jh=Pe({},Vn,{data:0}),Yc=Lt(Jh),Xh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ef={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tf(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=ef[e])?!!s[e]:!1}function $i(){return tf}var sf=Pe({},Vr,{key:function(e){if(e.key){var s=Xh[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=ka(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$i,charCode:function(e){return e.type==="keypress"?ka(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ka(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nf=Lt(sf),rf=Pe({},ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gc=Lt(rf),af=Pe({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$i}),lf=Lt(af),of=Pe({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),cf=Lt(of),df=Pe({},ml,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mf=Lt(df),uf=[9,13,27,32],Di=ds&&"CompositionEvent"in window,xr=null;ds&&"documentMode"in document&&(xr=document.documentMode);var xf=ds&&"TextEvent"in window&&!xr,pu=ds&&(!Di||xr&&8<xr&&11>=xr),Jc=" ",Xc=!1;function hu(e,s){switch(e){case"keyup":return uf.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yn=!1;function pf(e,s){switch(e){case"compositionend":return fu(s);case"keypress":return s.which!==32?null:(Xc=!0,Jc);case"textInput":return e=s.data,e===Jc&&Xc?null:e;default:return null}}function hf(e,s){if(yn)return e==="compositionend"||!Di&&hu(e,s)?(e=xu(),wa=Ti=_s=null,yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return pu&&s.locale!=="ko"?null:s.data;default:return null}}var ff={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zc(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!ff[e.type]:s==="textarea"}function yu(e,s,n,r){Km(r),s=Wa(s,"onChange"),0<s.length&&(n=new Fi("onChange","change",null,n,r),e.push({event:n,listeners:s}))}var pr=null,Er=null;function yf(e){Eu(e,0)}function ul(e){var s=jn(e);if(Bm(s))return e}function gf(e,s){if(e==="change")return s}var gu=!1;if(ds){var Hl;if(ds){var ql="oninput"in document;if(!ql){var ed=document.createElement("div");ed.setAttribute("oninput","return;"),ql=typeof ed.oninput=="function"}Hl=ql}else Hl=!1;gu=Hl&&(!document.documentMode||9<document.documentMode)}function td(){pr&&(pr.detachEvent("onpropertychange",bu),Er=pr=null)}function bu(e){if(e.propertyName==="value"&&ul(Er)){var s=[];yu(s,Er,e,Li(e)),Xm(yf,s)}}function bf(e,s,n){e==="focusin"?(td(),pr=s,Er=n,pr.attachEvent("onpropertychange",bu)):e==="focusout"&&td()}function jf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ul(Er)}function vf(e,s){if(e==="click")return ul(s)}function Nf(e,s){if(e==="input"||e==="change")return ul(s)}function wf(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var qt=typeof Object.is=="function"?Object.is:wf;function Lr(e,s){if(qt(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var n=Object.keys(e),r=Object.keys(s);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!ho.call(s,a)||!qt(e[a],s[a]))return!1}return!0}function sd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nd(e,s){var n=sd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=s&&r>=s)return{node:n,offset:s-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sd(n)}}function ju(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?ju(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function vu(){for(var e=window,s=$a();s instanceof e.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)e=s.contentWindow;else break;s=$a(e.document)}return s}function Mi(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function kf(e){var s=vu(),n=e.focusedElem,r=e.selectionRange;if(s!==n&&n&&n.ownerDocument&&ju(n.ownerDocument.documentElement,n)){if(r!==null&&Mi(n)){if(s=r.start,e=r.end,e===void 0&&(e=s),"selectionStart"in n)n.selectionStart=s,n.selectionEnd=Math.min(e,n.value.length);else if(e=(s=n.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=nd(n,l);var o=nd(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(s),e.extend(o.node,o.offset)):(s.setEnd(o.node,o.offset),e.addRange(s)))}}for(s=[],e=n;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<s.length;n++)e=s[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _f=ds&&"documentMode"in document&&11>=document.documentMode,gn=null,To=null,hr=null,Fo=!1;function rd(e,s,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fo||gn==null||gn!==$a(r)||(r=gn,"selectionStart"in r&&Mi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hr&&Lr(hr,r)||(hr=r,r=Wa(To,"onSelect"),0<r.length&&(s=new Fi("onSelect","select",null,s,n),e.push({event:s,listeners:r}),s.target=gn)))}function oa(e,s){var n={};return n[e.toLowerCase()]=s.toLowerCase(),n["Webkit"+e]="webkit"+s,n["Moz"+e]="moz"+s,n}var bn={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionend:oa("Transition","TransitionEnd")},Ql={},Nu={};ds&&(Nu=document.createElement("div").style,"AnimationEvent"in window||(delete bn.animationend.animation,delete bn.animationiteration.animation,delete bn.animationstart.animation),"TransitionEvent"in window||delete bn.transitionend.transition);function xl(e){if(Ql[e])return Ql[e];if(!bn[e])return e;var s=bn[e],n;for(n in s)if(s.hasOwnProperty(n)&&n in Nu)return Ql[e]=s[n];return e}var wu=xl("animationend"),ku=xl("animationiteration"),_u=xl("animationstart"),Su=xl("transitionend"),Cu=new Map,ad="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bs(e,s){Cu.set(e,s),dn(s,[e])}for(var Kl=0;Kl<ad.length;Kl++){var Yl=ad[Kl],Sf=Yl.toLowerCase(),Cf=Yl[0].toUpperCase()+Yl.slice(1);Bs(Sf,"on"+Cf)}Bs(wu,"onAnimationEnd");Bs(ku,"onAnimationIteration");Bs(_u,"onAnimationStart");Bs("dblclick","onDoubleClick");Bs("focusin","onFocus");Bs("focusout","onBlur");Bs(Su,"onTransitionEnd");Rn("onMouseEnter",["mouseout","mouseover"]);Rn("onMouseLeave",["mouseout","mouseover"]);Rn("onPointerEnter",["pointerout","pointerover"]);Rn("onPointerLeave",["pointerout","pointerover"]);dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dn("onBeforeInput",["compositionend","keypress","textInput","paste"]);dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ef=new Set("cancel close invalid load scroll toggle".split(" ").concat(cr));function ld(e,s,n){var r=e.type||"unknown-event";e.currentTarget=n,_h(r,s,void 0,e),e.currentTarget=null}function Eu(e,s){s=(s&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(s)for(var o=r.length-1;0<=o;o--){var d=r[o],m=d.instance,i=d.currentTarget;if(d=d.listener,m!==l&&a.isPropagationStopped())break e;ld(a,d,i),l=m}else for(o=0;o<r.length;o++){if(d=r[o],m=d.instance,i=d.currentTarget,d=d.listener,m!==l&&a.isPropagationStopped())break e;ld(a,d,i),l=m}}}if(Ma)throw e=Po,Ma=!1,Po=null,e}function _e(e,s){var n=s[Io];n===void 0&&(n=s[Io]=new Set);var r=e+"__bubble";n.has(r)||(Lu(s,e,2,!1),n.add(r))}function Gl(e,s,n){var r=0;s&&(r|=4),Lu(n,e,r,s)}var ia="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){if(!e[ia]){e[ia]=!0,$m.forEach(function(n){n!=="selectionchange"&&(Ef.has(n)||Gl(n,!1,e),Gl(n,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[ia]||(s[ia]=!0,Gl("selectionchange",!1,s))}}function Lu(e,s,n,r){switch(uu(s)){case 1:var a=Bh;break;case 4:a=Uh;break;default:a=Ri}n=a.bind(null,s,n,e),a=void 0,!Lo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(s,n,{capture:!0,passive:a}):e.addEventListener(s,n,!0):a!==void 0?e.addEventListener(s,n,{passive:a}):e.addEventListener(s,n,!1)}function Jl(e,s,n,r,a){var l=r;if(!(s&1)&&!(s&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var d=r.stateNode.containerInfo;if(d===a||d.nodeType===8&&d.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var m=o.tag;if((m===3||m===4)&&(m=o.stateNode.containerInfo,m===a||m.nodeType===8&&m.parentNode===a))return;o=o.return}for(;d!==null;){if(o=Ys(d),o===null)return;if(m=o.tag,m===5||m===6){r=l=o;continue e}d=d.parentNode}}r=r.return}Xm(function(){var i=l,u=Li(n),c=[];e:{var h=Cu.get(e);if(h!==void 0){var g=Fi,f=e;switch(e){case"keypress":if(ka(n)===0)break e;case"keydown":case"keyup":g=nf;break;case"focusin":f="focus",g=Vl;break;case"focusout":f="blur",g=Vl;break;case"beforeblur":case"afterblur":g=Vl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Hh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=lf;break;case wu:case ku:case _u:g=Kh;break;case Su:g=cf;break;case"scroll":g=Wh;break;case"wheel":g=mf;break;case"copy":case"cut":case"paste":g=Gh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Gc}var v=(s&4)!==0,w=!v&&e==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var y=i,j;y!==null;){j=y;var _=j.stateNode;if(j.tag===5&&_!==null&&(j=_,x!==null&&(_=kr(y,x),_!=null&&v.push(zr(y,_,j)))),w)break;y=y.return}0<v.length&&(h=new g(h,f,null,n,u),c.push({event:h,listeners:v}))}}if(!(s&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==Co&&(f=n.relatedTarget||n.fromElement)&&(Ys(f)||f[ms]))break e;if((g||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,g?(f=n.relatedTarget||n.toElement,g=i,f=f?Ys(f):null,f!==null&&(w=mn(f),f!==w||f.tag!==5&&f.tag!==6)&&(f=null)):(g=null,f=i),g!==f)){if(v=Kc,_="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=Gc,_="onPointerLeave",x="onPointerEnter",y="pointer"),w=g==null?h:jn(g),j=f==null?h:jn(f),h=new v(_,y+"leave",g,n,u),h.target=w,h.relatedTarget=j,_=null,Ys(u)===i&&(v=new v(x,y+"enter",f,n,u),v.target=j,v.relatedTarget=w,_=v),w=_,g&&f)t:{for(v=g,x=f,y=0,j=v;j;j=xn(j))y++;for(j=0,_=x;_;_=xn(_))j++;for(;0<y-j;)v=xn(v),y--;for(;0<j-y;)x=xn(x),j--;for(;y--;){if(v===x||x!==null&&v===x.alternate)break t;v=xn(v),x=xn(x)}v=null}else v=null;g!==null&&od(c,h,g,v,!1),f!==null&&w!==null&&od(c,w,f,v,!0)}}e:{if(h=i?jn(i):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var P=gf;else if(Zc(h))if(gu)P=Nf;else{P=jf;var k=bf}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(P=vf);if(P&&(P=P(e,i))){yu(c,P,n,u);break e}k&&k(e,h,i),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&No(h,"number",h.value)}switch(k=i?jn(i):window,e){case"focusin":(Zc(k)||k.contentEditable==="true")&&(gn=k,To=i,hr=null);break;case"focusout":hr=To=gn=null;break;case"mousedown":Fo=!0;break;case"contextmenu":case"mouseup":case"dragend":Fo=!1,rd(c,n,u);break;case"selectionchange":if(_f)break;case"keydown":case"keyup":rd(c,n,u)}var z;if(Di)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else yn?hu(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(pu&&n.locale!=="ko"&&(yn||b!=="onCompositionStart"?b==="onCompositionEnd"&&yn&&(z=xu()):(_s=u,Ti="value"in _s?_s.value:_s.textContent,yn=!0)),k=Wa(i,b),0<k.length&&(b=new Yc(b,e,null,n,u),c.push({event:b,listeners:k}),z?b.data=z:(z=fu(n),z!==null&&(b.data=z)))),(z=xf?pf(e,n):hf(e,n))&&(i=Wa(i,"onBeforeInput"),0<i.length&&(u=new Yc("onBeforeInput","beforeinput",null,n,u),c.push({event:u,listeners:i}),u.data=z))}Eu(c,s)})}function zr(e,s,n){return{instance:e,listener:s,currentTarget:n}}function Wa(e,s){for(var n=s+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=kr(e,n),l!=null&&r.unshift(zr(e,l,a)),l=kr(e,s),l!=null&&r.push(zr(e,l,a))),e=e.return}return r}function xn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function od(e,s,n,r,a){for(var l=s._reactName,o=[];n!==null&&n!==r;){var d=n,m=d.alternate,i=d.stateNode;if(m!==null&&m===r)break;d.tag===5&&i!==null&&(d=i,a?(m=kr(n,l),m!=null&&o.unshift(zr(n,m,d))):a||(m=kr(n,l),m!=null&&o.push(zr(n,m,d)))),n=n.return}o.length!==0&&e.push({event:s,listeners:o})}var Lf=/\r\n?/g,Pf=/\u0000|\uFFFD/g;function id(e){return(typeof e=="string"?e:""+e).replace(Lf,`
`).replace(Pf,"")}function ca(e,s,n){if(s=id(s),id(e)!==s&&n)throw Error(Y(425))}function Va(){}var $o=null,Do=null;function Mo(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ao=typeof setTimeout=="function"?setTimeout:void 0,zf=typeof clearTimeout=="function"?clearTimeout:void 0,cd=typeof Promise=="function"?Promise:void 0,Of=typeof queueMicrotask=="function"?queueMicrotask:typeof cd<"u"?function(e){return cd.resolve(null).then(e).catch(Rf)}:Ao;function Rf(e){setTimeout(function(){throw e})}function Xl(e,s){var n=s,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Cr(s);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Cr(s)}function zs(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function dd(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return e;s--}else n==="/$"&&s++}e=e.previousSibling}return null}var Hn=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Hn,Or="__reactProps$"+Hn,ms="__reactContainer$"+Hn,Io="__reactEvents$"+Hn,Tf="__reactListeners$"+Hn,Ff="__reactHandles$"+Hn;function Ys(e){var s=e[Zt];if(s)return s;for(var n=e.parentNode;n;){if(s=n[ms]||n[Zt]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(e=dd(e);e!==null;){if(n=e[Zt])return n;e=dd(e)}return s}e=n,n=e.parentNode}return null}function Hr(e){return e=e[Zt]||e[ms],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function pl(e){return e[Or]||null}var Bo=[],vn=-1;function Us(e){return{current:e}}function Se(e){0>vn||(e.current=Bo[vn],Bo[vn]=null,vn--)}function ke(e,s){vn++,Bo[vn]=e.current,e.current=s}var As={},ot=Us(As),yt=Us(!1),sn=As;function Tn(e,s){var n=e.type.contextTypes;if(!n)return As;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===s)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=s[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function gt(e){return e=e.childContextTypes,e!=null}function Ha(){Se(yt),Se(ot)}function md(e,s,n){if(ot.current!==As)throw Error(Y(168));ke(ot,s),ke(yt,n)}function Pu(e,s,n){var r=e.stateNode;if(s=s.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in s))throw Error(Y(108,gh(e)||"Unknown",a));return Pe({},n,r)}function qa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||As,sn=ot.current,ke(ot,e),ke(yt,yt.current),!0}function ud(e,s,n){var r=e.stateNode;if(!r)throw Error(Y(169));n?(e=Pu(e,s,sn),r.__reactInternalMemoizedMergedChildContext=e,Se(yt),Se(ot),ke(ot,e)):Se(yt),ke(yt,n)}var as=null,hl=!1,Zl=!1;function zu(e){as===null?as=[e]:as.push(e)}function $f(e){hl=!0,zu(e)}function Ws(){if(!Zl&&as!==null){Zl=!0;var e=0,s=ve;try{var n=as;for(ve=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}as=null,hl=!1}catch(a){throw as!==null&&(as=as.slice(e+1)),su(Pi,Ws),a}finally{ve=s,Zl=!1}}return null}var Nn=[],wn=0,Qa=null,Ka=0,zt=[],Ot=0,nn=null,ls=1,os="";function Qs(e,s){Nn[wn++]=Ka,Nn[wn++]=Qa,Qa=e,Ka=s}function Ou(e,s,n){zt[Ot++]=ls,zt[Ot++]=os,zt[Ot++]=nn,nn=e;var r=ls;e=os;var a=32-Vt(r)-1;r&=~(1<<a),n+=1;var l=32-Vt(s)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,ls=1<<32-Vt(s)+a|n<<a|r,os=l+e}else ls=1<<l|n<<a|r,os=e}function Ai(e){e.return!==null&&(Qs(e,1),Ou(e,1,0))}function Ii(e){for(;e===Qa;)Qa=Nn[--wn],Nn[wn]=null,Ka=Nn[--wn],Nn[wn]=null;for(;e===nn;)nn=zt[--Ot],zt[Ot]=null,os=zt[--Ot],zt[Ot]=null,ls=zt[--Ot],zt[Ot]=null}var _t=null,kt=null,Ce=!1,Wt=null;function Ru(e,s){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=s,n.return=e,s=e.deletions,s===null?(e.deletions=[n],e.flags|=16):s.push(n)}function xd(e,s){switch(e.tag){case 5:var n=e.type;return s=s.nodeType!==1||n.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,_t=e,kt=zs(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,_t=e,kt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(n=nn!==null?{id:ls,overflow:os}:null,e.memoizedState={dehydrated:s,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=s,n.return=e,e.child=n,_t=e,kt=null,!0):!1;default:return!1}}function Uo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wo(e){if(Ce){var s=kt;if(s){var n=s;if(!xd(e,s)){if(Uo(e))throw Error(Y(418));s=zs(n.nextSibling);var r=_t;s&&xd(e,s)?Ru(r,n):(e.flags=e.flags&-4097|2,Ce=!1,_t=e)}}else{if(Uo(e))throw Error(Y(418));e.flags=e.flags&-4097|2,Ce=!1,_t=e}}}function pd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function da(e){if(e!==_t)return!1;if(!Ce)return pd(e),Ce=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Mo(e.type,e.memoizedProps)),s&&(s=kt)){if(Uo(e))throw Tu(),Error(Y(418));for(;s;)Ru(e,s),s=zs(s.nextSibling)}if(pd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(s===0){kt=zs(e.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++}e=e.nextSibling}kt=null}}else kt=_t?zs(e.stateNode.nextSibling):null;return!0}function Tu(){for(var e=kt;e;)e=zs(e.nextSibling)}function Fn(){kt=_t=null,Ce=!1}function Bi(e){Wt===null?Wt=[e]:Wt.push(e)}var Df=fs.ReactCurrentBatchConfig;function sr(e,s,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,e));var a=r,l=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(o){var d=a.refs;o===null?delete d[l]:d[l]=o},s._stringRef=l,s)}if(typeof e!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function ma(e,s){throw e=Object.prototype.toString.call(s),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function hd(e){var s=e._init;return s(e._payload)}function Fu(e){function s(x,y){if(e){var j=x.deletions;j===null?(x.deletions=[y],x.flags|=16):j.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)s(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=Fs(x,y),x.index=0,x.sibling=null,x}function l(x,y,j){return x.index=j,e?(j=x.alternate,j!==null?(j=j.index,j<y?(x.flags|=2,y):j):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function d(x,y,j,_){return y===null||y.tag!==6?(y=lo(j,x.mode,_),y.return=x,y):(y=a(y,j),y.return=x,y)}function m(x,y,j,_){var P=j.type;return P===fn?u(x,y,j.props.children,_,j.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===vs&&hd(P)===y.type)?(_=a(y,j.props),_.ref=sr(x,y,j),_.return=x,_):(_=za(j.type,j.key,j.props,null,x.mode,_),_.ref=sr(x,y,j),_.return=x,_)}function i(x,y,j,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==j.containerInfo||y.stateNode.implementation!==j.implementation?(y=oo(j,x.mode,_),y.return=x,y):(y=a(y,j.children||[]),y.return=x,y)}function u(x,y,j,_,P){return y===null||y.tag!==7?(y=en(j,x.mode,_,P),y.return=x,y):(y=a(y,j),y.return=x,y)}function c(x,y,j){if(typeof y=="string"&&y!==""||typeof y=="number")return y=lo(""+y,x.mode,j),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ea:return j=za(y.type,y.key,y.props,null,x.mode,j),j.ref=sr(x,null,y),j.return=x,j;case hn:return y=oo(y,x.mode,j),y.return=x,y;case vs:var _=y._init;return c(x,_(y._payload),j)}if(or(y)||Jn(y))return y=en(y,x.mode,j,null),y.return=x,y;ma(x,y)}return null}function h(x,y,j,_){var P=y!==null?y.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return P!==null?null:d(x,y,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ea:return j.key===P?m(x,y,j,_):null;case hn:return j.key===P?i(x,y,j,_):null;case vs:return P=j._init,h(x,y,P(j._payload),_)}if(or(j)||Jn(j))return P!==null?null:u(x,y,j,_,null);ma(x,j)}return null}function g(x,y,j,_,P){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(j)||null,d(y,x,""+_,P);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ea:return x=x.get(_.key===null?j:_.key)||null,m(y,x,_,P);case hn:return x=x.get(_.key===null?j:_.key)||null,i(y,x,_,P);case vs:var k=_._init;return g(x,y,j,k(_._payload),P)}if(or(_)||Jn(_))return x=x.get(j)||null,u(y,x,_,P,null);ma(y,_)}return null}function f(x,y,j,_){for(var P=null,k=null,z=y,b=y=0,S=null;z!==null&&b<j.length;b++){z.index>b?(S=z,z=null):S=z.sibling;var E=h(x,z,j[b],_);if(E===null){z===null&&(z=S);break}e&&z&&E.alternate===null&&s(x,z),y=l(E,y,b),k===null?P=E:k.sibling=E,k=E,z=S}if(b===j.length)return n(x,z),Ce&&Qs(x,b),P;if(z===null){for(;b<j.length;b++)z=c(x,j[b],_),z!==null&&(y=l(z,y,b),k===null?P=z:k.sibling=z,k=z);return Ce&&Qs(x,b),P}for(z=r(x,z);b<j.length;b++)S=g(z,x,b,j[b],_),S!==null&&(e&&S.alternate!==null&&z.delete(S.key===null?b:S.key),y=l(S,y,b),k===null?P=S:k.sibling=S,k=S);return e&&z.forEach(function(N){return s(x,N)}),Ce&&Qs(x,b),P}function v(x,y,j,_){var P=Jn(j);if(typeof P!="function")throw Error(Y(150));if(j=P.call(j),j==null)throw Error(Y(151));for(var k=P=null,z=y,b=y=0,S=null,E=j.next();z!==null&&!E.done;b++,E=j.next()){z.index>b?(S=z,z=null):S=z.sibling;var N=h(x,z,E.value,_);if(N===null){z===null&&(z=S);break}e&&z&&N.alternate===null&&s(x,z),y=l(N,y,b),k===null?P=N:k.sibling=N,k=N,z=S}if(E.done)return n(x,z),Ce&&Qs(x,b),P;if(z===null){for(;!E.done;b++,E=j.next())E=c(x,E.value,_),E!==null&&(y=l(E,y,b),k===null?P=E:k.sibling=E,k=E);return Ce&&Qs(x,b),P}for(z=r(x,z);!E.done;b++,E=j.next())E=g(z,x,b,E.value,_),E!==null&&(e&&E.alternate!==null&&z.delete(E.key===null?b:E.key),y=l(E,y,b),k===null?P=E:k.sibling=E,k=E);return e&&z.forEach(function(R){return s(x,R)}),Ce&&Qs(x,b),P}function w(x,y,j,_){if(typeof j=="object"&&j!==null&&j.type===fn&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case ea:e:{for(var P=j.key,k=y;k!==null;){if(k.key===P){if(P=j.type,P===fn){if(k.tag===7){n(x,k.sibling),y=a(k,j.props.children),y.return=x,x=y;break e}}else if(k.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===vs&&hd(P)===k.type){n(x,k.sibling),y=a(k,j.props),y.ref=sr(x,k,j),y.return=x,x=y;break e}n(x,k);break}else s(x,k);k=k.sibling}j.type===fn?(y=en(j.props.children,x.mode,_,j.key),y.return=x,x=y):(_=za(j.type,j.key,j.props,null,x.mode,_),_.ref=sr(x,y,j),_.return=x,x=_)}return o(x);case hn:e:{for(k=j.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===j.containerInfo&&y.stateNode.implementation===j.implementation){n(x,y.sibling),y=a(y,j.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else s(x,y);y=y.sibling}y=oo(j,x.mode,_),y.return=x,x=y}return o(x);case vs:return k=j._init,w(x,y,k(j._payload),_)}if(or(j))return f(x,y,j,_);if(Jn(j))return v(x,y,j,_);ma(x,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,y!==null&&y.tag===6?(n(x,y.sibling),y=a(y,j),y.return=x,x=y):(n(x,y),y=lo(j,x.mode,_),y.return=x,x=y),o(x)):n(x,y)}return w}var $n=Fu(!0),$u=Fu(!1),Ya=Us(null),Ga=null,kn=null,Ui=null;function Wi(){Ui=kn=Ga=null}function Vi(e){var s=Ya.current;Se(Ya),e._currentValue=s}function Vo(e,s,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),e===n)break;e=e.return}}function zn(e,s){Ga=e,Ui=kn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(ft=!0),e.firstContext=null)}function Ft(e){var s=e._currentValue;if(Ui!==e)if(e={context:e,memoizedValue:s,next:null},kn===null){if(Ga===null)throw Error(Y(308));kn=e,Ga.dependencies={lanes:0,firstContext:e}}else kn=kn.next=e;return s}var Gs=null;function Hi(e){Gs===null?Gs=[e]:Gs.push(e)}function Du(e,s,n,r){var a=s.interleaved;return a===null?(n.next=n,Hi(s)):(n.next=a.next,a.next=n),s.interleaved=n,us(e,r)}function us(e,s){e.lanes|=s;var n=e.alternate;for(n!==null&&(n.lanes|=s),n=e,e=e.return;e!==null;)e.childLanes|=s,n=e.alternate,n!==null&&(n.childLanes|=s),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ns=!1;function qi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mu(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function is(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function Os(e,s,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var a=r.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s,us(e,n)}return a=r.interleaved,a===null?(s.next=s,Hi(r)):(s.next=a.next,a.next=s),r.interleaved=s,us(e,n)}function _a(e,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194240)!==0)){var r=s.lanes;r&=e.pendingLanes,n|=r,s.lanes=n,zi(e,n)}}function fd(e,s){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=s:l=l.next=s}else a=l=s;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=s:e.next=s,n.lastBaseUpdate=s}function Ja(e,s,n,r){var a=e.updateQueue;Ns=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,d=a.shared.pending;if(d!==null){a.shared.pending=null;var m=d,i=m.next;m.next=null,o===null?l=i:o.next=i,o=m;var u=e.alternate;u!==null&&(u=u.updateQueue,d=u.lastBaseUpdate,d!==o&&(d===null?u.firstBaseUpdate=i:d.next=i,u.lastBaseUpdate=m))}if(l!==null){var c=a.baseState;o=0,u=i=m=null,d=l;do{var h=d.lane,g=d.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:g,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var f=e,v=d;switch(h=s,g=n,v.tag){case 1:if(f=v.payload,typeof f=="function"){c=f.call(g,c,h);break e}c=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=v.payload,h=typeof f=="function"?f.call(g,c,h):f,h==null)break e;c=Pe({},c,h);break e;case 2:Ns=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[d]:h.push(d))}else g={eventTime:g,lane:h,tag:d.tag,payload:d.payload,callback:d.callback,next:null},u===null?(i=u=g,m=c):u=u.next=g,o|=h;if(d=d.next,d===null){if(d=a.shared.pending,d===null)break;h=d,d=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(m=c),a.baseState=m,a.firstBaseUpdate=i,a.lastBaseUpdate=u,s=a.shared.interleaved,s!==null){a=s;do o|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);an|=o,e.lanes=o,e.memoizedState=c}}function yd(e,s,n){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var r=e[s],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Y(191,a));a.call(r)}}}var qr={},ts=Us(qr),Rr=Us(qr),Tr=Us(qr);function Js(e){if(e===qr)throw Error(Y(174));return e}function Qi(e,s){switch(ke(Tr,s),ke(Rr,e),ke(ts,qr),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ko(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=ko(s,e)}Se(ts),ke(ts,s)}function Dn(){Se(ts),Se(Rr),Se(Tr)}function Au(e){Js(Tr.current);var s=Js(ts.current),n=ko(s,e.type);s!==n&&(ke(Rr,e),ke(ts,n))}function Ki(e){Rr.current===e&&(Se(ts),Se(Rr))}var Ee=Us(0);function Xa(e){for(var s=e;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var eo=[];function Yi(){for(var e=0;e<eo.length;e++)eo[e]._workInProgressVersionPrimary=null;eo.length=0}var Sa=fs.ReactCurrentDispatcher,to=fs.ReactCurrentBatchConfig,rn=0,Le=null,Be=null,He=null,Za=!1,fr=!1,Fr=0,Mf=0;function st(){throw Error(Y(321))}function Gi(e,s){if(s===null)return!1;for(var n=0;n<s.length&&n<e.length;n++)if(!qt(e[n],s[n]))return!1;return!0}function Ji(e,s,n,r,a,l){if(rn=l,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Sa.current=e===null||e.memoizedState===null?Uf:Wf,e=n(r,a),fr){l=0;do{if(fr=!1,Fr=0,25<=l)throw Error(Y(301));l+=1,He=Be=null,s.updateQueue=null,Sa.current=Vf,e=n(r,a)}while(fr)}if(Sa.current=el,s=Be!==null&&Be.next!==null,rn=0,He=Be=Le=null,Za=!1,s)throw Error(Y(300));return e}function Xi(){var e=Fr!==0;return Fr=0,e}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Le.memoizedState=He=e:He=He.next=e,He}function $t(){if(Be===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var s=He===null?Le.memoizedState:He.next;if(s!==null)He=s,Be=e;else{if(e===null)throw Error(Y(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},He===null?Le.memoizedState=He=e:He=He.next=e}return He}function $r(e,s){return typeof s=="function"?s(e):s}function so(e){var s=$t(),n=s.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=Be,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var d=o=null,m=null,i=l;do{var u=i.lane;if((rn&u)===u)m!==null&&(m=m.next={lane:0,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null}),r=i.hasEagerState?i.eagerState:e(r,i.action);else{var c={lane:u,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null};m===null?(d=m=c,o=r):m=m.next=c,Le.lanes|=u,an|=u}i=i.next}while(i!==null&&i!==l);m===null?o=r:m.next=d,qt(r,s.memoizedState)||(ft=!0),s.memoizedState=r,s.baseState=o,s.baseQueue=m,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do l=a.lane,Le.lanes|=l,an|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[s.memoizedState,n.dispatch]}function no(e){var s=$t(),n=s.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=s.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);qt(l,s.memoizedState)||(ft=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),n.lastRenderedState=l}return[l,r]}function Iu(){}function Bu(e,s){var n=Le,r=$t(),a=s(),l=!qt(r.memoizedState,a);if(l&&(r.memoizedState=a,ft=!0),r=r.queue,Zi(Vu.bind(null,n,r,e),[e]),r.getSnapshot!==s||l||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,Dr(9,Wu.bind(null,n,r,a,s),void 0,null),Qe===null)throw Error(Y(349));rn&30||Uu(n,s,a)}return a}function Uu(e,s,n){e.flags|=16384,e={getSnapshot:s,value:n},s=Le.updateQueue,s===null?(s={lastEffect:null,stores:null},Le.updateQueue=s,s.stores=[e]):(n=s.stores,n===null?s.stores=[e]:n.push(e))}function Wu(e,s,n,r){s.value=n,s.getSnapshot=r,Hu(s)&&qu(e)}function Vu(e,s,n){return n(function(){Hu(s)&&qu(e)})}function Hu(e){var s=e.getSnapshot;e=e.value;try{var n=s();return!qt(e,n)}catch{return!0}}function qu(e){var s=us(e,1);s!==null&&Ht(s,e,1,-1)}function gd(e){var s=Xt();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:e},s.queue=e,e=e.dispatch=Bf.bind(null,Le,e),[s.memoizedState,e]}function Dr(e,s,n,r){return e={tag:e,create:s,destroy:n,deps:r,next:null},s=Le.updateQueue,s===null?(s={lastEffect:null,stores:null},Le.updateQueue=s,s.lastEffect=e.next=e):(n=s.lastEffect,n===null?s.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,s.lastEffect=e)),e}function Qu(){return $t().memoizedState}function Ca(e,s,n,r){var a=Xt();Le.flags|=e,a.memoizedState=Dr(1|s,n,void 0,r===void 0?null:r)}function fl(e,s,n,r){var a=$t();r=r===void 0?null:r;var l=void 0;if(Be!==null){var o=Be.memoizedState;if(l=o.destroy,r!==null&&Gi(r,o.deps)){a.memoizedState=Dr(s,n,l,r);return}}Le.flags|=e,a.memoizedState=Dr(1|s,n,l,r)}function bd(e,s){return Ca(8390656,8,e,s)}function Zi(e,s){return fl(2048,8,e,s)}function Ku(e,s){return fl(4,2,e,s)}function Yu(e,s){return fl(4,4,e,s)}function Gu(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function Ju(e,s,n){return n=n!=null?n.concat([e]):null,fl(4,4,Gu.bind(null,s,e),n)}function ec(){}function Xu(e,s){var n=$t();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&Gi(s,r[1])?r[0]:(n.memoizedState=[e,s],e)}function Zu(e,s){var n=$t();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&Gi(s,r[1])?r[0]:(e=e(),n.memoizedState=[e,s],e)}function ex(e,s,n){return rn&21?(qt(n,s)||(n=au(),Le.lanes|=n,an|=n,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=n)}function Af(e,s){var n=ve;ve=n!==0&&4>n?n:4,e(!0);var r=to.transition;to.transition={};try{e(!1),s()}finally{ve=n,to.transition=r}}function tx(){return $t().memoizedState}function If(e,s,n){var r=Ts(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sx(e))nx(s,n);else if(n=Du(e,s,n,r),n!==null){var a=dt();Ht(n,e,r,a),rx(n,s,r)}}function Bf(e,s,n){var r=Ts(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sx(e))nx(s,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var o=s.lastRenderedState,d=l(o,n);if(a.hasEagerState=!0,a.eagerState=d,qt(d,o)){var m=s.interleaved;m===null?(a.next=a,Hi(s)):(a.next=m.next,m.next=a),s.interleaved=a;return}}catch{}finally{}n=Du(e,s,a,r),n!==null&&(a=dt(),Ht(n,e,r,a),rx(n,s,r))}}function sx(e){var s=e.alternate;return e===Le||s!==null&&s===Le}function nx(e,s){fr=Za=!0;var n=e.pending;n===null?s.next=s:(s.next=n.next,n.next=s),e.pending=s}function rx(e,s,n){if(n&4194240){var r=s.lanes;r&=e.pendingLanes,n|=r,s.lanes=n,zi(e,n)}}var el={readContext:Ft,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},Uf={readContext:Ft,useCallback:function(e,s){return Xt().memoizedState=[e,s===void 0?null:s],e},useContext:Ft,useEffect:bd,useImperativeHandle:function(e,s,n){return n=n!=null?n.concat([e]):null,Ca(4194308,4,Gu.bind(null,s,e),n)},useLayoutEffect:function(e,s){return Ca(4194308,4,e,s)},useInsertionEffect:function(e,s){return Ca(4,2,e,s)},useMemo:function(e,s){var n=Xt();return s=s===void 0?null:s,e=e(),n.memoizedState=[e,s],e},useReducer:function(e,s,n){var r=Xt();return s=n!==void 0?n(s):s,r.memoizedState=r.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=If.bind(null,Le,e),[r.memoizedState,e]},useRef:function(e){var s=Xt();return e={current:e},s.memoizedState=e},useState:gd,useDebugValue:ec,useDeferredValue:function(e){return Xt().memoizedState=e},useTransition:function(){var e=gd(!1),s=e[0];return e=Af.bind(null,e[1]),Xt().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,n){var r=Le,a=Xt();if(Ce){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=s(),Qe===null)throw Error(Y(349));rn&30||Uu(r,s,n)}a.memoizedState=n;var l={value:n,getSnapshot:s};return a.queue=l,bd(Vu.bind(null,r,l,e),[e]),r.flags|=2048,Dr(9,Wu.bind(null,r,l,n,s),void 0,null),n},useId:function(){var e=Xt(),s=Qe.identifierPrefix;if(Ce){var n=os,r=ls;n=(r&~(1<<32-Vt(r)-1)).toString(32)+n,s=":"+s+"R"+n,n=Fr++,0<n&&(s+="H"+n.toString(32)),s+=":"}else n=Mf++,s=":"+s+"r"+n.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Wf={readContext:Ft,useCallback:Xu,useContext:Ft,useEffect:Zi,useImperativeHandle:Ju,useInsertionEffect:Ku,useLayoutEffect:Yu,useMemo:Zu,useReducer:so,useRef:Qu,useState:function(){return so($r)},useDebugValue:ec,useDeferredValue:function(e){var s=$t();return ex(s,Be.memoizedState,e)},useTransition:function(){var e=so($r)[0],s=$t().memoizedState;return[e,s]},useMutableSource:Iu,useSyncExternalStore:Bu,useId:tx,unstable_isNewReconciler:!1},Vf={readContext:Ft,useCallback:Xu,useContext:Ft,useEffect:Zi,useImperativeHandle:Ju,useInsertionEffect:Ku,useLayoutEffect:Yu,useMemo:Zu,useReducer:no,useRef:Qu,useState:function(){return no($r)},useDebugValue:ec,useDeferredValue:function(e){var s=$t();return Be===null?s.memoizedState=e:ex(s,Be.memoizedState,e)},useTransition:function(){var e=no($r)[0],s=$t().memoizedState;return[e,s]},useMutableSource:Iu,useSyncExternalStore:Bu,useId:tx,unstable_isNewReconciler:!1};function Bt(e,s){if(e&&e.defaultProps){s=Pe({},s),e=e.defaultProps;for(var n in e)s[n]===void 0&&(s[n]=e[n]);return s}return s}function Ho(e,s,n,r){s=e.memoizedState,n=n(r,s),n=n==null?s:Pe({},s,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yl={isMounted:function(e){return(e=e._reactInternals)?mn(e)===e:!1},enqueueSetState:function(e,s,n){e=e._reactInternals;var r=dt(),a=Ts(e),l=is(r,a);l.payload=s,n!=null&&(l.callback=n),s=Os(e,l,a),s!==null&&(Ht(s,e,a,r),_a(s,e,a))},enqueueReplaceState:function(e,s,n){e=e._reactInternals;var r=dt(),a=Ts(e),l=is(r,a);l.tag=1,l.payload=s,n!=null&&(l.callback=n),s=Os(e,l,a),s!==null&&(Ht(s,e,a,r),_a(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var n=dt(),r=Ts(e),a=is(n,r);a.tag=2,s!=null&&(a.callback=s),s=Os(e,a,r),s!==null&&(Ht(s,e,r,n),_a(s,e,r))}};function jd(e,s,n,r,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):s.prototype&&s.prototype.isPureReactComponent?!Lr(n,r)||!Lr(a,l):!0}function ax(e,s,n){var r=!1,a=As,l=s.contextType;return typeof l=="object"&&l!==null?l=Ft(l):(a=gt(s)?sn:ot.current,r=s.contextTypes,l=(r=r!=null)?Tn(e,a):As),s=new s(n,l),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=yl,e.stateNode=s,s._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),s}function vd(e,s,n,r){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,r),s.state!==e&&yl.enqueueReplaceState(s,s.state,null)}function qo(e,s,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},qi(e);var l=s.contextType;typeof l=="object"&&l!==null?a.context=Ft(l):(l=gt(s)?sn:ot.current,a.context=Tn(e,l)),a.state=e.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Ho(e,s,l,n),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&yl.enqueueReplaceState(a,a.state,null),Ja(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Mn(e,s){try{var n="",r=s;do n+=yh(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:s,stack:a,digest:null}}function ro(e,s,n){return{value:e,source:null,stack:n??null,digest:s??null}}function Qo(e,s){try{console.error(s.value)}catch(n){setTimeout(function(){throw n})}}var Hf=typeof WeakMap=="function"?WeakMap:Map;function lx(e,s,n){n=is(-1,n),n.tag=3,n.payload={element:null};var r=s.value;return n.callback=function(){sl||(sl=!0,ni=r),Qo(e,s)},n}function ox(e,s,n){n=is(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=s.value;n.payload=function(){return r(a)},n.callback=function(){Qo(e,s)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Qo(e,s),typeof r!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})}),n}function Nd(e,s,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Hf;var a=new Set;r.set(s,a)}else a=r.get(s),a===void 0&&(a=new Set,r.set(s,a));a.has(n)||(a.add(n),e=ay.bind(null,e,s,n),s.then(e,e))}function wd(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function kd(e,s,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(s=is(-1,1),s.tag=2,Os(n,s,1))),n.lanes|=1),e)}var qf=fs.ReactCurrentOwner,ft=!1;function ct(e,s,n,r){s.child=e===null?$u(s,null,n,r):$n(s,e.child,n,r)}function _d(e,s,n,r,a){n=n.render;var l=s.ref;return zn(s,a),r=Ji(e,s,n,r,l,a),n=Xi(),e!==null&&!ft?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,xs(e,s,a)):(Ce&&n&&Ai(s),s.flags|=1,ct(e,s,r,a),s.child)}function Sd(e,s,n,r,a){if(e===null){var l=n.type;return typeof l=="function"&&!ic(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(s.tag=15,s.type=l,ix(e,s,l,r,a)):(e=za(n.type,null,r,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:Lr,n(o,r)&&e.ref===s.ref)return xs(e,s,a)}return s.flags|=1,e=Fs(l,r),e.ref=s.ref,e.return=s,s.child=e}function ix(e,s,n,r,a){if(e!==null){var l=e.memoizedProps;if(Lr(l,r)&&e.ref===s.ref)if(ft=!1,s.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(ft=!0);else return s.lanes=e.lanes,xs(e,s,a)}return Ko(e,s,n,r,a)}function cx(e,s,n){var r=s.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Sn,wt),wt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,ke(Sn,wt),wt|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,ke(Sn,wt),wt|=r}else l!==null?(r=l.baseLanes|n,s.memoizedState=null):r=n,ke(Sn,wt),wt|=r;return ct(e,s,a,n),s.child}function dx(e,s){var n=s.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(s.flags|=512,s.flags|=2097152)}function Ko(e,s,n,r,a){var l=gt(n)?sn:ot.current;return l=Tn(s,l),zn(s,a),n=Ji(e,s,n,r,l,a),r=Xi(),e!==null&&!ft?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,xs(e,s,a)):(Ce&&r&&Ai(s),s.flags|=1,ct(e,s,n,a),s.child)}function Cd(e,s,n,r,a){if(gt(n)){var l=!0;qa(s)}else l=!1;if(zn(s,a),s.stateNode===null)Ea(e,s),ax(s,n,r),qo(s,n,r,a),r=!0;else if(e===null){var o=s.stateNode,d=s.memoizedProps;o.props=d;var m=o.context,i=n.contextType;typeof i=="object"&&i!==null?i=Ft(i):(i=gt(n)?sn:ot.current,i=Tn(s,i));var u=n.getDerivedStateFromProps,c=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==r||m!==i)&&vd(s,o,r,i),Ns=!1;var h=s.memoizedState;o.state=h,Ja(s,r,o,a),m=s.memoizedState,d!==r||h!==m||yt.current||Ns?(typeof u=="function"&&(Ho(s,n,u,r),m=s.memoizedState),(d=Ns||jd(s,n,d,r,h,m,i))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(s.flags|=4194308)):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=m),o.props=r,o.state=m,o.context=i,r=d):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{o=s.stateNode,Mu(e,s),d=s.memoizedProps,i=s.type===s.elementType?d:Bt(s.type,d),o.props=i,c=s.pendingProps,h=o.context,m=n.contextType,typeof m=="object"&&m!==null?m=Ft(m):(m=gt(n)?sn:ot.current,m=Tn(s,m));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==c||h!==m)&&vd(s,o,r,m),Ns=!1,h=s.memoizedState,o.state=h,Ja(s,r,o,a);var f=s.memoizedState;d!==c||h!==f||yt.current||Ns?(typeof g=="function"&&(Ho(s,n,g,r),f=s.memoizedState),(i=Ns||jd(s,n,i,r,h,f,m)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,f,m),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,f,m)),typeof o.componentDidUpdate=="function"&&(s.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=f),o.props=r,o.state=f,o.context=m,r=i):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(s.flags|=1024),r=!1)}return Yo(e,s,n,r,l,a)}function Yo(e,s,n,r,a,l){dx(e,s);var o=(s.flags&128)!==0;if(!r&&!o)return a&&ud(s,n,!1),xs(e,s,l);r=s.stateNode,qf.current=s;var d=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return s.flags|=1,e!==null&&o?(s.child=$n(s,e.child,null,l),s.child=$n(s,null,d,l)):ct(e,s,d,l),s.memoizedState=r.state,a&&ud(s,n,!0),s.child}function mx(e){var s=e.stateNode;s.pendingContext?md(e,s.pendingContext,s.pendingContext!==s.context):s.context&&md(e,s.context,!1),Qi(e,s.containerInfo)}function Ed(e,s,n,r,a){return Fn(),Bi(a),s.flags|=256,ct(e,s,n,r),s.child}var Go={dehydrated:null,treeContext:null,retryLane:0};function Jo(e){return{baseLanes:e,cachePool:null,transitions:null}}function ux(e,s,n){var r=s.pendingProps,a=Ee.current,l=!1,o=(s.flags&128)!==0,d;if((d=o)||(d=e!==null&&e.memoizedState===null?!1:(a&2)!==0),d?(l=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ke(Ee,a&1),e===null)return Wo(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(o=r.children,e=r.fallback,l?(r=s.mode,l=s.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=jl(o,r,0,null),e=en(e,r,n,null),l.return=s,e.return=s,l.sibling=e,s.child=l,s.child.memoizedState=Jo(n),s.memoizedState=Go,e):tc(s,o));if(a=e.memoizedState,a!==null&&(d=a.dehydrated,d!==null))return Qf(e,s,o,r,d,a,n);if(l){l=r.fallback,o=s.mode,a=e.child,d=a.sibling;var m={mode:"hidden",children:r.children};return!(o&1)&&s.child!==a?(r=s.child,r.childLanes=0,r.pendingProps=m,s.deletions=null):(r=Fs(a,m),r.subtreeFlags=a.subtreeFlags&14680064),d!==null?l=Fs(d,l):(l=en(l,o,n,null),l.flags|=2),l.return=s,r.return=s,r.sibling=l,s.child=r,r=l,l=s.child,o=e.child.memoizedState,o=o===null?Jo(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,s.memoizedState=Go,r}return l=e.child,e=l.sibling,r=Fs(l,{mode:"visible",children:r.children}),!(s.mode&1)&&(r.lanes=n),r.return=s,r.sibling=null,e!==null&&(n=s.deletions,n===null?(s.deletions=[e],s.flags|=16):n.push(e)),s.child=r,s.memoizedState=null,r}function tc(e,s){return s=jl({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function ua(e,s,n,r){return r!==null&&Bi(r),$n(s,e.child,null,n),e=tc(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Qf(e,s,n,r,a,l,o){if(n)return s.flags&256?(s.flags&=-257,r=ro(Error(Y(422))),ua(e,s,o,r)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(l=r.fallback,a=s.mode,r=jl({mode:"visible",children:r.children},a,0,null),l=en(l,a,o,null),l.flags|=2,r.return=s,l.return=s,r.sibling=l,s.child=r,s.mode&1&&$n(s,e.child,null,o),s.child.memoizedState=Jo(o),s.memoizedState=Go,l);if(!(s.mode&1))return ua(e,s,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var d=r.dgst;return r=d,l=Error(Y(419)),r=ro(l,r,void 0),ua(e,s,o,r)}if(d=(o&e.childLanes)!==0,ft||d){if(r=Qe,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,us(e,a),Ht(r,e,a,-1))}return oc(),r=ro(Error(Y(421))),ua(e,s,o,r)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=ly.bind(null,e),a._reactRetry=s,null):(e=l.treeContext,kt=zs(a.nextSibling),_t=s,Ce=!0,Wt=null,e!==null&&(zt[Ot++]=ls,zt[Ot++]=os,zt[Ot++]=nn,ls=e.id,os=e.overflow,nn=s),s=tc(s,r.children),s.flags|=4096,s)}function Ld(e,s,n){e.lanes|=s;var r=e.alternate;r!==null&&(r.lanes|=s),Vo(e.return,s,n)}function ao(e,s,n,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function xx(e,s,n){var r=s.pendingProps,a=r.revealOrder,l=r.tail;if(ct(e,s,r.children,n),r=Ee.current,r&2)r=r&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ld(e,n,s);else if(e.tag===19)Ld(e,n,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ke(Ee,r),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(n=s.child,a=null;n!==null;)e=n.alternate,e!==null&&Xa(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=s.child,s.child=null):(a=n.sibling,n.sibling=null),ao(s,!1,a,n,l);break;case"backwards":for(n=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&Xa(e)===null){s.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}ao(s,!0,n,null,l);break;case"together":ao(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ea(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function xs(e,s,n){if(e!==null&&(s.dependencies=e.dependencies),an|=s.lanes,!(n&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(Y(153));if(s.child!==null){for(e=s.child,n=Fs(e,e.pendingProps),s.child=n,n.return=s;e.sibling!==null;)e=e.sibling,n=n.sibling=Fs(e,e.pendingProps),n.return=s;n.sibling=null}return s.child}function Kf(e,s,n){switch(s.tag){case 3:mx(s),Fn();break;case 5:Au(s);break;case 1:gt(s.type)&&qa(s);break;case 4:Qi(s,s.stateNode.containerInfo);break;case 10:var r=s.type._context,a=s.memoizedProps.value;ke(Ya,r._currentValue),r._currentValue=a;break;case 13:if(r=s.memoizedState,r!==null)return r.dehydrated!==null?(ke(Ee,Ee.current&1),s.flags|=128,null):n&s.child.childLanes?ux(e,s,n):(ke(Ee,Ee.current&1),e=xs(e,s,n),e!==null?e.sibling:null);ke(Ee,Ee.current&1);break;case 19:if(r=(n&s.childLanes)!==0,e.flags&128){if(r)return xx(e,s,n);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ke(Ee,Ee.current),r)break;return null;case 22:case 23:return s.lanes=0,cx(e,s,n)}return xs(e,s,n)}var px,Xo,hx,fx;px=function(e,s){for(var n=s.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xo=function(){};hx=function(e,s,n,r){var a=e.memoizedProps;if(a!==r){e=s.stateNode,Js(ts.current);var l=null;switch(n){case"input":a=jo(e,a),r=jo(e,r),l=[];break;case"select":a=Pe({},a,{value:void 0}),r=Pe({},r,{value:void 0}),l=[];break;case"textarea":a=wo(e,a),r=wo(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Va)}_o(n,r);var o;n=null;for(i in a)if(!r.hasOwnProperty(i)&&a.hasOwnProperty(i)&&a[i]!=null)if(i==="style"){var d=a[i];for(o in d)d.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else i!=="dangerouslySetInnerHTML"&&i!=="children"&&i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Nr.hasOwnProperty(i)?l||(l=[]):(l=l||[]).push(i,null));for(i in r){var m=r[i];if(d=a!=null?a[i]:void 0,r.hasOwnProperty(i)&&m!==d&&(m!=null||d!=null))if(i==="style")if(d){for(o in d)!d.hasOwnProperty(o)||m&&m.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in m)m.hasOwnProperty(o)&&d[o]!==m[o]&&(n||(n={}),n[o]=m[o])}else n||(l||(l=[]),l.push(i,n)),n=m;else i==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,d=d?d.__html:void 0,m!=null&&d!==m&&(l=l||[]).push(i,m)):i==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(i,""+m):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&(Nr.hasOwnProperty(i)?(m!=null&&i==="onScroll"&&_e("scroll",e),l||d===m||(l=[])):(l=l||[]).push(i,m))}n&&(l=l||[]).push("style",n);var i=l;(s.updateQueue=i)&&(s.flags|=4)}};fx=function(e,s,n,r){n!==r&&(s.flags|=4)};function nr(e,s){if(!Ce)switch(e.tailMode){case"hidden":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nt(e){var s=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(s)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,s}function Yf(e,s,n){var r=s.pendingProps;switch(Ii(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(s),null;case 1:return gt(s.type)&&Ha(),nt(s),null;case 3:return r=s.stateNode,Dn(),Se(yt),Se(ot),Yi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(da(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Wt!==null&&(li(Wt),Wt=null))),Xo(e,s),nt(s),null;case 5:Ki(s);var a=Js(Tr.current);if(n=s.type,e!==null&&s.stateNode!=null)hx(e,s,n,r,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!r){if(s.stateNode===null)throw Error(Y(166));return nt(s),null}if(e=Js(ts.current),da(s)){r=s.stateNode,n=s.type;var l=s.memoizedProps;switch(r[Zt]=s,r[Or]=l,e=(s.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(a=0;a<cr.length;a++)_e(cr[a],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Mc(r,l),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},_e("invalid",r);break;case"textarea":Ic(r,l),_e("invalid",r)}_o(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var d=l[o];o==="children"?typeof d=="string"?r.textContent!==d&&(l.suppressHydrationWarning!==!0&&ca(r.textContent,d,e),a=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(l.suppressHydrationWarning!==!0&&ca(r.textContent,d,e),a=["children",""+d]):Nr.hasOwnProperty(o)&&d!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":ta(r),Ac(r,l,!0);break;case"textarea":ta(r),Bc(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Va)}r=a,s.updateQueue=r,r!==null&&(s.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Vm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Zt]=s,e[Or]=r,px(e,s,!1,!1),s.stateNode=e;e:{switch(o=So(n,r),n){case"dialog":_e("cancel",e),_e("close",e),a=r;break;case"iframe":case"object":case"embed":_e("load",e),a=r;break;case"video":case"audio":for(a=0;a<cr.length;a++)_e(cr[a],e);a=r;break;case"source":_e("error",e),a=r;break;case"img":case"image":case"link":_e("error",e),_e("load",e),a=r;break;case"details":_e("toggle",e),a=r;break;case"input":Mc(e,r),a=jo(e,r),_e("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Pe({},r,{value:void 0}),_e("invalid",e);break;case"textarea":Ic(e,r),a=wo(e,r),_e("invalid",e);break;default:a=r}_o(n,a),d=a;for(l in d)if(d.hasOwnProperty(l)){var m=d[l];l==="style"?Qm(e,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&Hm(e,m)):l==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&wr(e,m):typeof m=="number"&&wr(e,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Nr.hasOwnProperty(l)?m!=null&&l==="onScroll"&&_e("scroll",e):m!=null&&_i(e,l,m,o))}switch(n){case"input":ta(e),Ac(e,r,!1);break;case"textarea":ta(e),Bc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ms(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Cn(e,!!r.multiple,l,!1):r.defaultValue!=null&&Cn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Va)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return nt(s),null;case 6:if(e&&s.stateNode!=null)fx(e,s,e.memoizedProps,r);else{if(typeof r!="string"&&s.stateNode===null)throw Error(Y(166));if(n=Js(Tr.current),Js(ts.current),da(s)){if(r=s.stateNode,n=s.memoizedProps,r[Zt]=s,(l=r.nodeValue!==n)&&(e=_t,e!==null))switch(e.tag){case 3:ca(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ca(r.nodeValue,n,(e.mode&1)!==0)}l&&(s.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=s,s.stateNode=r}return nt(s),null;case 13:if(Se(Ee),r=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&kt!==null&&s.mode&1&&!(s.flags&128))Tu(),Fn(),s.flags|=98560,l=!1;else if(l=da(s),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(Y(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Y(317));l[Zt]=s}else Fn(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;nt(s),l=!1}else Wt!==null&&(li(Wt),Wt=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=n,s):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(s.child.flags|=8192,s.mode&1&&(e===null||Ee.current&1?Ue===0&&(Ue=3):oc())),s.updateQueue!==null&&(s.flags|=4),nt(s),null);case 4:return Dn(),Xo(e,s),e===null&&Pr(s.stateNode.containerInfo),nt(s),null;case 10:return Vi(s.type._context),nt(s),null;case 17:return gt(s.type)&&Ha(),nt(s),null;case 19:if(Se(Ee),l=s.memoizedState,l===null)return nt(s),null;if(r=(s.flags&128)!==0,o=l.rendering,o===null)if(r)nr(l,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(o=Xa(e),o!==null){for(s.flags|=128,nr(l,!1),r=o.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),s.subtreeFlags=0,r=n,n=s.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ke(Ee,Ee.current&1|2),s.child}e=e.sibling}l.tail!==null&&$e()>An&&(s.flags|=128,r=!0,nr(l,!1),s.lanes=4194304)}else{if(!r)if(e=Xa(o),e!==null){if(s.flags|=128,r=!0,n=e.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),nr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Ce)return nt(s),null}else 2*$e()-l.renderingStartTime>An&&n!==1073741824&&(s.flags|=128,r=!0,nr(l,!1),s.lanes=4194304);l.isBackwards?(o.sibling=s.child,s.child=o):(n=l.last,n!==null?n.sibling=o:s.child=o,l.last=o)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=$e(),s.sibling=null,n=Ee.current,ke(Ee,r?n&1|2:n&1),s):(nt(s),null);case 22:case 23:return lc(),r=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(s.flags|=8192),r&&s.mode&1?wt&1073741824&&(nt(s),s.subtreeFlags&6&&(s.flags|=8192)):nt(s),null;case 24:return null;case 25:return null}throw Error(Y(156,s.tag))}function Gf(e,s){switch(Ii(s),s.tag){case 1:return gt(s.type)&&Ha(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Dn(),Se(yt),Se(ot),Yi(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Ki(s),null;case 13:if(Se(Ee),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(Y(340));Fn()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return Se(Ee),null;case 4:return Dn(),null;case 10:return Vi(s.type._context),null;case 22:case 23:return lc(),null;case 24:return null;default:return null}}var xa=!1,rt=!1,Jf=typeof WeakSet=="function"?WeakSet:Set,ee=null;function _n(e,s){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(e,s,r)}else n.current=null}function Zo(e,s,n){try{n()}catch(r){Oe(e,s,r)}}var Pd=!1;function Xf(e,s){if($o=Ba,e=vu(),Mi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,d=-1,m=-1,i=0,u=0,c=e,h=null;t:for(;;){for(var g;c!==n||a!==0&&c.nodeType!==3||(d=o+a),c!==l||r!==0&&c.nodeType!==3||(m=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(g=c.firstChild)!==null;)h=c,c=g;for(;;){if(c===e)break t;if(h===n&&++i===a&&(d=o),h===l&&++u===r&&(m=o),(g=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=g}n=d===-1||m===-1?null:{start:d,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(Do={focusedElem:e,selectionRange:n},Ba=!1,ee=s;ee!==null;)if(s=ee,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,ee=e;else for(;ee!==null;){s=ee;try{var f=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var v=f.memoizedProps,w=f.memoizedState,x=s.stateNode,y=x.getSnapshotBeforeUpdate(s.elementType===s.type?v:Bt(s.type,v),w);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(_){Oe(s,s.return,_)}if(e=s.sibling,e!==null){e.return=s.return,ee=e;break}ee=s.return}return f=Pd,Pd=!1,f}function yr(e,s,n){var r=s.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Zo(s,n,l)}a=a.next}while(a!==r)}}function gl(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==s)}}function ei(e){var s=e.ref;if(s!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof s=="function"?s(e):s.current=e}}function yx(e){var s=e.alternate;s!==null&&(e.alternate=null,yx(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Zt],delete s[Or],delete s[Io],delete s[Tf],delete s[Ff])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gx(e){return e.tag===5||e.tag===3||e.tag===4}function zd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ti(e,s,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,s?n.nodeType===8?n.parentNode.insertBefore(e,s):n.insertBefore(e,s):(n.nodeType===8?(s=n.parentNode,s.insertBefore(e,n)):(s=n,s.appendChild(e)),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=Va));else if(r!==4&&(e=e.child,e!==null))for(ti(e,s,n),e=e.sibling;e!==null;)ti(e,s,n),e=e.sibling}function si(e,s,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,s?n.insertBefore(e,s):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(si(e,s,n),e=e.sibling;e!==null;)si(e,s,n),e=e.sibling}var Je=null,Ut=!1;function bs(e,s,n){for(n=n.child;n!==null;)bx(e,s,n),n=n.sibling}function bx(e,s,n){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(dl,n)}catch{}switch(n.tag){case 5:rt||_n(n,s);case 6:var r=Je,a=Ut;Je=null,bs(e,s,n),Je=r,Ut=a,Je!==null&&(Ut?(e=Je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Ut?(e=Je,n=n.stateNode,e.nodeType===8?Xl(e.parentNode,n):e.nodeType===1&&Xl(e,n),Cr(e)):Xl(Je,n.stateNode));break;case 4:r=Je,a=Ut,Je=n.stateNode.containerInfo,Ut=!0,bs(e,s,n),Je=r,Ut=a;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Zo(n,s,o),a=a.next}while(a!==r)}bs(e,s,n);break;case 1:if(!rt&&(_n(n,s),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){Oe(n,s,d)}bs(e,s,n);break;case 21:bs(e,s,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,bs(e,s,n),rt=r):bs(e,s,n);break;default:bs(e,s,n)}}function Od(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Jf),s.forEach(function(r){var a=oy.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function It(e,s){var n=s.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=e,o=s,d=o;e:for(;d!==null;){switch(d.tag){case 5:Je=d.stateNode,Ut=!1;break e;case 3:Je=d.stateNode.containerInfo,Ut=!0;break e;case 4:Je=d.stateNode.containerInfo,Ut=!0;break e}d=d.return}if(Je===null)throw Error(Y(160));bx(l,o,a),Je=null,Ut=!1;var m=a.alternate;m!==null&&(m.return=null),a.return=null}catch(i){Oe(a,s,i)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)jx(s,e),s=s.sibling}function jx(e,s){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(s,e),Yt(e),r&4){try{yr(3,e,e.return),gl(3,e)}catch(v){Oe(e,e.return,v)}try{yr(5,e,e.return)}catch(v){Oe(e,e.return,v)}}break;case 1:It(s,e),Yt(e),r&512&&n!==null&&_n(n,n.return);break;case 5:if(It(s,e),Yt(e),r&512&&n!==null&&_n(n,n.return),e.flags&32){var a=e.stateNode;try{wr(a,"")}catch(v){Oe(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,d=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{d==="input"&&l.type==="radio"&&l.name!=null&&Um(a,l),So(d,o);var i=So(d,l);for(o=0;o<m.length;o+=2){var u=m[o],c=m[o+1];u==="style"?Qm(a,c):u==="dangerouslySetInnerHTML"?Hm(a,c):u==="children"?wr(a,c):_i(a,u,c,i)}switch(d){case"input":vo(a,l);break;case"textarea":Wm(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var g=l.value;g!=null?Cn(a,!!l.multiple,g,!1):h!==!!l.multiple&&(l.defaultValue!=null?Cn(a,!!l.multiple,l.defaultValue,!0):Cn(a,!!l.multiple,l.multiple?[]:"",!1))}a[Or]=l}catch(v){Oe(e,e.return,v)}}break;case 6:if(It(s,e),Yt(e),r&4){if(e.stateNode===null)throw Error(Y(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(v){Oe(e,e.return,v)}}break;case 3:if(It(s,e),Yt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cr(s.containerInfo)}catch(v){Oe(e,e.return,v)}break;case 4:It(s,e),Yt(e);break;case 13:It(s,e),Yt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(rc=$e())),r&4&&Od(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(i=rt)||u,It(s,e),rt=i):It(s,e),Yt(e),r&8192){if(i=e.memoizedState!==null,(e.stateNode.isHidden=i)&&!u&&e.mode&1)for(ee=e,u=e.child;u!==null;){for(c=ee=u;ee!==null;){switch(h=ee,g=h.child,h.tag){case 0:case 11:case 14:case 15:yr(4,h,h.return);break;case 1:_n(h,h.return);var f=h.stateNode;if(typeof f.componentWillUnmount=="function"){r=h,n=h.return;try{s=r,f.props=s.memoizedProps,f.state=s.memoizedState,f.componentWillUnmount()}catch(v){Oe(r,n,v)}}break;case 5:_n(h,h.return);break;case 22:if(h.memoizedState!==null){Td(c);continue}}g!==null?(g.return=h,ee=g):Td(c)}u=u.sibling}e:for(u=null,c=e;;){if(c.tag===5){if(u===null){u=c;try{a=c.stateNode,i?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(d=c.stateNode,m=c.memoizedProps.style,o=m!=null&&m.hasOwnProperty("display")?m.display:null,d.style.display=qm("display",o))}catch(v){Oe(e,e.return,v)}}}else if(c.tag===6){if(u===null)try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(v){Oe(e,e.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:It(s,e),Yt(e),r&4&&Od(e);break;case 21:break;default:It(s,e),Yt(e)}}function Yt(e){var s=e.flags;if(s&2){try{e:{for(var n=e.return;n!==null;){if(gx(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(wr(a,""),r.flags&=-33);var l=zd(e);si(e,l,a);break;case 3:case 4:var o=r.stateNode.containerInfo,d=zd(e);ti(e,d,o);break;default:throw Error(Y(161))}}catch(m){Oe(e,e.return,m)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Zf(e,s,n){ee=e,vx(e)}function vx(e,s,n){for(var r=(e.mode&1)!==0;ee!==null;){var a=ee,l=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||xa;if(!o){var d=a.alternate,m=d!==null&&d.memoizedState!==null||rt;d=xa;var i=rt;if(xa=o,(rt=m)&&!i)for(ee=a;ee!==null;)o=ee,m=o.child,o.tag===22&&o.memoizedState!==null?Fd(a):m!==null?(m.return=o,ee=m):Fd(a);for(;l!==null;)ee=l,vx(l),l=l.sibling;ee=a,xa=d,rt=i}Rd(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ee=l):Rd(e)}}function Rd(e){for(;ee!==null;){var s=ee;if(s.flags&8772){var n=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:rt||gl(5,s);break;case 1:var r=s.stateNode;if(s.flags&4&&!rt)if(n===null)r.componentDidMount();else{var a=s.elementType===s.type?n.memoizedProps:Bt(s.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&yd(s,l,r);break;case 3:var o=s.updateQueue;if(o!==null){if(n=null,s.child!==null)switch(s.child.tag){case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}yd(s,o,n)}break;case 5:var d=s.stateNode;if(n===null&&s.flags&4){n=d;var m=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var i=s.alternate;if(i!==null){var u=i.memoizedState;if(u!==null){var c=u.dehydrated;c!==null&&Cr(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}rt||s.flags&512&&ei(s)}catch(h){Oe(s,s.return,h)}}if(s===e){ee=null;break}if(n=s.sibling,n!==null){n.return=s.return,ee=n;break}ee=s.return}}function Td(e){for(;ee!==null;){var s=ee;if(s===e){ee=null;break}var n=s.sibling;if(n!==null){n.return=s.return,ee=n;break}ee=s.return}}function Fd(e){for(;ee!==null;){var s=ee;try{switch(s.tag){case 0:case 11:case 15:var n=s.return;try{gl(4,s)}catch(m){Oe(s,n,m)}break;case 1:var r=s.stateNode;if(typeof r.componentDidMount=="function"){var a=s.return;try{r.componentDidMount()}catch(m){Oe(s,a,m)}}var l=s.return;try{ei(s)}catch(m){Oe(s,l,m)}break;case 5:var o=s.return;try{ei(s)}catch(m){Oe(s,o,m)}}}catch(m){Oe(s,s.return,m)}if(s===e){ee=null;break}var d=s.sibling;if(d!==null){d.return=s.return,ee=d;break}ee=s.return}}var ey=Math.ceil,tl=fs.ReactCurrentDispatcher,sc=fs.ReactCurrentOwner,Tt=fs.ReactCurrentBatchConfig,ge=0,Qe=null,Me=null,Xe=0,wt=0,Sn=Us(0),Ue=0,Mr=null,an=0,bl=0,nc=0,gr=null,ht=null,rc=0,An=1/0,rs=null,sl=!1,ni=null,Rs=null,pa=!1,Ss=null,nl=0,br=0,ri=null,La=-1,Pa=0;function dt(){return ge&6?$e():La!==-1?La:La=$e()}function Ts(e){return e.mode&1?ge&2&&Xe!==0?Xe&-Xe:Df.transition!==null?(Pa===0&&(Pa=au()),Pa):(e=ve,e!==0||(e=window.event,e=e===void 0?16:uu(e.type)),e):1}function Ht(e,s,n,r){if(50<br)throw br=0,ri=null,Error(Y(185));Wr(e,n,r),(!(ge&2)||e!==Qe)&&(e===Qe&&(!(ge&2)&&(bl|=n),Ue===4&&ks(e,Xe)),bt(e,r),n===1&&ge===0&&!(s.mode&1)&&(An=$e()+500,hl&&Ws()))}function bt(e,s){var n=e.callbackNode;$h(e,s);var r=Ia(e,e===Qe?Xe:0);if(r===0)n!==null&&Vc(n),e.callbackNode=null,e.callbackPriority=0;else if(s=r&-r,e.callbackPriority!==s){if(n!=null&&Vc(n),s===1)e.tag===0?$f($d.bind(null,e)):zu($d.bind(null,e)),Of(function(){!(ge&6)&&Ws()}),n=null;else{switch(lu(r)){case 1:n=Pi;break;case 4:n=nu;break;case 16:n=Aa;break;case 536870912:n=ru;break;default:n=Aa}n=Lx(n,Nx.bind(null,e))}e.callbackPriority=s,e.callbackNode=n}}function Nx(e,s){if(La=-1,Pa=0,ge&6)throw Error(Y(327));var n=e.callbackNode;if(On()&&e.callbackNode!==n)return null;var r=Ia(e,e===Qe?Xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||s)s=rl(e,r);else{s=r;var a=ge;ge|=2;var l=kx();(Qe!==e||Xe!==s)&&(rs=null,An=$e()+500,Zs(e,s));do try{ny();break}catch(d){wx(e,d)}while(!0);Wi(),tl.current=l,ge=a,Me!==null?s=0:(Qe=null,Xe=0,s=Ue)}if(s!==0){if(s===2&&(a=zo(e),a!==0&&(r=a,s=ai(e,a))),s===1)throw n=Mr,Zs(e,0),ks(e,r),bt(e,$e()),n;if(s===6)ks(e,r);else{if(a=e.current.alternate,!(r&30)&&!ty(a)&&(s=rl(e,r),s===2&&(l=zo(e),l!==0&&(r=l,s=ai(e,l))),s===1))throw n=Mr,Zs(e,0),ks(e,r),bt(e,$e()),n;switch(e.finishedWork=a,e.finishedLanes=r,s){case 0:case 1:throw Error(Y(345));case 2:Ks(e,ht,rs);break;case 3:if(ks(e,r),(r&130023424)===r&&(s=rc+500-$e(),10<s)){if(Ia(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){dt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ao(Ks.bind(null,e,ht,rs),s);break}Ks(e,ht,rs);break;case 4:if(ks(e,r),(r&4194240)===r)break;for(s=e.eventTimes,a=-1;0<r;){var o=31-Vt(r);l=1<<o,o=s[o],o>a&&(a=o),r&=~l}if(r=a,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ey(r/1960))-r,10<r){e.timeoutHandle=Ao(Ks.bind(null,e,ht,rs),r);break}Ks(e,ht,rs);break;case 5:Ks(e,ht,rs);break;default:throw Error(Y(329))}}}return bt(e,$e()),e.callbackNode===n?Nx.bind(null,e):null}function ai(e,s){var n=gr;return e.current.memoizedState.isDehydrated&&(Zs(e,s).flags|=256),e=rl(e,s),e!==2&&(s=ht,ht=n,s!==null&&li(s)),e}function li(e){ht===null?ht=e:ht.push.apply(ht,e)}function ty(e){for(var s=e;;){if(s.flags&16384){var n=s.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!qt(l(),a))return!1}catch{return!1}}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ks(e,s){for(s&=~nc,s&=~bl,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var n=31-Vt(s),r=1<<n;e[n]=-1,s&=~r}}function $d(e){if(ge&6)throw Error(Y(327));On();var s=Ia(e,0);if(!(s&1))return bt(e,$e()),null;var n=rl(e,s);if(e.tag!==0&&n===2){var r=zo(e);r!==0&&(s=r,n=ai(e,r))}if(n===1)throw n=Mr,Zs(e,0),ks(e,s),bt(e,$e()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Ks(e,ht,rs),bt(e,$e()),null}function ac(e,s){var n=ge;ge|=1;try{return e(s)}finally{ge=n,ge===0&&(An=$e()+500,hl&&Ws())}}function ln(e){Ss!==null&&Ss.tag===0&&!(ge&6)&&On();var s=ge;ge|=1;var n=Tt.transition,r=ve;try{if(Tt.transition=null,ve=1,e)return e()}finally{ve=r,Tt.transition=n,ge=s,!(ge&6)&&Ws()}}function lc(){wt=Sn.current,Se(Sn)}function Zs(e,s){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,zf(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Ii(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ha();break;case 3:Dn(),Se(yt),Se(ot),Yi();break;case 5:Ki(r);break;case 4:Dn();break;case 13:Se(Ee);break;case 19:Se(Ee);break;case 10:Vi(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Qe=e,Me=e=Fs(e.current,null),Xe=wt=s,Ue=0,Mr=null,nc=bl=an=0,ht=gr=null,Gs!==null){for(s=0;s<Gs.length;s++)if(n=Gs[s],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,r.next=o}n.pending=r}Gs=null}return e}function wx(e,s){do{var n=Me;try{if(Wi(),Sa.current=el,Za){for(var r=Le.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Za=!1}if(rn=0,He=Be=Le=null,fr=!1,Fr=0,sc.current=null,n===null||n.return===null){Ue=1,Mr=s,Me=null;break}e:{var l=e,o=n.return,d=n,m=s;if(s=Xe,d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var i=m,u=d,c=u.tag;if(!(u.mode&1)&&(c===0||c===11||c===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=wd(o);if(g!==null){g.flags&=-257,kd(g,o,d,l,s),g.mode&1&&Nd(l,i,s),s=g,m=i;var f=s.updateQueue;if(f===null){var v=new Set;v.add(m),s.updateQueue=v}else f.add(m);break e}else{if(!(s&1)){Nd(l,i,s),oc();break e}m=Error(Y(426))}}else if(Ce&&d.mode&1){var w=wd(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),kd(w,o,d,l,s),Bi(Mn(m,d));break e}}l=m=Mn(m,d),Ue!==4&&(Ue=2),gr===null?gr=[l]:gr.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var x=lx(l,m,s);fd(l,x);break e;case 1:d=m;var y=l.type,j=l.stateNode;if(!(l.flags&128)&&(typeof y.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Rs===null||!Rs.has(j)))){l.flags|=65536,s&=-s,l.lanes|=s;var _=ox(l,d,s);fd(l,_);break e}}l=l.return}while(l!==null)}Sx(n)}catch(P){s=P,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function kx(){var e=tl.current;return tl.current=el,e===null?el:e}function oc(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Qe===null||!(an&268435455)&&!(bl&268435455)||ks(Qe,Xe)}function rl(e,s){var n=ge;ge|=2;var r=kx();(Qe!==e||Xe!==s)&&(rs=null,Zs(e,s));do try{sy();break}catch(a){wx(e,a)}while(!0);if(Wi(),ge=n,tl.current=r,Me!==null)throw Error(Y(261));return Qe=null,Xe=0,Ue}function sy(){for(;Me!==null;)_x(Me)}function ny(){for(;Me!==null&&!Ch();)_x(Me)}function _x(e){var s=Ex(e.alternate,e,wt);e.memoizedProps=e.pendingProps,s===null?Sx(e):Me=s,sc.current=null}function Sx(e){var s=e;do{var n=s.alternate;if(e=s.return,s.flags&32768){if(n=Gf(n,s),n!==null){n.flags&=32767,Me=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Me=null;return}}else if(n=Yf(n,s,wt),n!==null){Me=n;return}if(s=s.sibling,s!==null){Me=s;return}Me=s=e}while(s!==null);Ue===0&&(Ue=5)}function Ks(e,s,n){var r=ve,a=Tt.transition;try{Tt.transition=null,ve=1,ry(e,s,n,r)}finally{Tt.transition=a,ve=r}return null}function ry(e,s,n,r){do On();while(Ss!==null);if(ge&6)throw Error(Y(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Dh(e,l),e===Qe&&(Me=Qe=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pa||(pa=!0,Lx(Aa,function(){return On(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Tt.transition,Tt.transition=null;var o=ve;ve=1;var d=ge;ge|=4,sc.current=null,Xf(e,n),jx(n,e),kf(Do),Ba=!!$o,Do=$o=null,e.current=n,Zf(n),Eh(),ge=d,ve=o,Tt.transition=l}else e.current=n;if(pa&&(pa=!1,Ss=e,nl=a),l=e.pendingLanes,l===0&&(Rs=null),zh(n.stateNode),bt(e,$e()),s!==null)for(r=e.onRecoverableError,n=0;n<s.length;n++)a=s[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(sl)throw sl=!1,e=ni,ni=null,e;return nl&1&&e.tag!==0&&On(),l=e.pendingLanes,l&1?e===ri?br++:(br=0,ri=e):br=0,Ws(),null}function On(){if(Ss!==null){var e=lu(nl),s=Tt.transition,n=ve;try{if(Tt.transition=null,ve=16>e?16:e,Ss===null)var r=!1;else{if(e=Ss,Ss=null,nl=0,ge&6)throw Error(Y(331));var a=ge;for(ge|=4,ee=e.current;ee!==null;){var l=ee,o=l.child;if(ee.flags&16){var d=l.deletions;if(d!==null){for(var m=0;m<d.length;m++){var i=d[m];for(ee=i;ee!==null;){var u=ee;switch(u.tag){case 0:case 11:case 15:yr(8,u,l)}var c=u.child;if(c!==null)c.return=u,ee=c;else for(;ee!==null;){u=ee;var h=u.sibling,g=u.return;if(yx(u),u===i){ee=null;break}if(h!==null){h.return=g,ee=h;break}ee=g}}}var f=l.alternate;if(f!==null){var v=f.child;if(v!==null){f.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}ee=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,ee=o;else e:for(;ee!==null;){if(l=ee,l.flags&2048)switch(l.tag){case 0:case 11:case 15:yr(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,ee=x;break e}ee=l.return}}var y=e.current;for(ee=y;ee!==null;){o=ee;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,ee=j;else e:for(o=y;ee!==null;){if(d=ee,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:gl(9,d)}}catch(P){Oe(d,d.return,P)}if(d===o){ee=null;break e}var _=d.sibling;if(_!==null){_.return=d.return,ee=_;break e}ee=d.return}}if(ge=a,Ws(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(dl,e)}catch{}r=!0}return r}finally{ve=n,Tt.transition=s}}return!1}function Dd(e,s,n){s=Mn(n,s),s=lx(e,s,1),e=Os(e,s,1),s=dt(),e!==null&&(Wr(e,1,s),bt(e,s))}function Oe(e,s,n){if(e.tag===3)Dd(e,e,n);else for(;s!==null;){if(s.tag===3){Dd(s,e,n);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rs===null||!Rs.has(r))){e=Mn(n,e),e=ox(s,e,1),s=Os(s,e,1),e=dt(),s!==null&&(Wr(s,1,e),bt(s,e));break}}s=s.return}}function ay(e,s,n){var r=e.pingCache;r!==null&&r.delete(s),s=dt(),e.pingedLanes|=e.suspendedLanes&n,Qe===e&&(Xe&n)===n&&(Ue===4||Ue===3&&(Xe&130023424)===Xe&&500>$e()-rc?Zs(e,0):nc|=n),bt(e,s)}function Cx(e,s){s===0&&(e.mode&1?(s=ra,ra<<=1,!(ra&130023424)&&(ra=4194304)):s=1);var n=dt();e=us(e,s),e!==null&&(Wr(e,s,n),bt(e,n))}function ly(e){var s=e.memoizedState,n=0;s!==null&&(n=s.retryLane),Cx(e,n)}function oy(e,s){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(s),Cx(e,n)}var Ex;Ex=function(e,s,n){if(e!==null)if(e.memoizedProps!==s.pendingProps||yt.current)ft=!0;else{if(!(e.lanes&n)&&!(s.flags&128))return ft=!1,Kf(e,s,n);ft=!!(e.flags&131072)}else ft=!1,Ce&&s.flags&1048576&&Ou(s,Ka,s.index);switch(s.lanes=0,s.tag){case 2:var r=s.type;Ea(e,s),e=s.pendingProps;var a=Tn(s,ot.current);zn(s,n),a=Ji(null,s,r,e,a,n);var l=Xi();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,gt(r)?(l=!0,qa(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,qi(s),a.updater=yl,s.stateNode=a,a._reactInternals=s,qo(s,r,e,n),s=Yo(null,s,r,!0,l,n)):(s.tag=0,Ce&&l&&Ai(s),ct(null,s,a,n),s=s.child),s;case 16:r=s.elementType;e:{switch(Ea(e,s),e=s.pendingProps,a=r._init,r=a(r._payload),s.type=r,a=s.tag=cy(r),e=Bt(r,e),a){case 0:s=Ko(null,s,r,e,n);break e;case 1:s=Cd(null,s,r,e,n);break e;case 11:s=_d(null,s,r,e,n);break e;case 14:s=Sd(null,s,r,Bt(r.type,e),n);break e}throw Error(Y(306,r,""))}return s;case 0:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Bt(r,a),Ko(e,s,r,a,n);case 1:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Bt(r,a),Cd(e,s,r,a,n);case 3:e:{if(mx(s),e===null)throw Error(Y(387));r=s.pendingProps,l=s.memoizedState,a=l.element,Mu(e,s),Ja(s,r,null,n);var o=s.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=Mn(Error(Y(423)),s),s=Ed(e,s,r,n,a);break e}else if(r!==a){a=Mn(Error(Y(424)),s),s=Ed(e,s,r,n,a);break e}else for(kt=zs(s.stateNode.containerInfo.firstChild),_t=s,Ce=!0,Wt=null,n=$u(s,null,r,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fn(),r===a){s=xs(e,s,n);break e}ct(e,s,r,n)}s=s.child}return s;case 5:return Au(s),e===null&&Wo(s),r=s.type,a=s.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,Mo(r,a)?o=null:l!==null&&Mo(r,l)&&(s.flags|=32),dx(e,s),ct(e,s,o,n),s.child;case 6:return e===null&&Wo(s),null;case 13:return ux(e,s,n);case 4:return Qi(s,s.stateNode.containerInfo),r=s.pendingProps,e===null?s.child=$n(s,null,r,n):ct(e,s,r,n),s.child;case 11:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Bt(r,a),_d(e,s,r,a,n);case 7:return ct(e,s,s.pendingProps,n),s.child;case 8:return ct(e,s,s.pendingProps.children,n),s.child;case 12:return ct(e,s,s.pendingProps.children,n),s.child;case 10:e:{if(r=s.type._context,a=s.pendingProps,l=s.memoizedProps,o=a.value,ke(Ya,r._currentValue),r._currentValue=o,l!==null)if(qt(l.value,o)){if(l.children===a.children&&!yt.current){s=xs(e,s,n);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var d=l.dependencies;if(d!==null){o=l.child;for(var m=d.firstContext;m!==null;){if(m.context===r){if(l.tag===1){m=is(-1,n&-n),m.tag=2;var i=l.updateQueue;if(i!==null){i=i.shared;var u=i.pending;u===null?m.next=m:(m.next=u.next,u.next=m),i.pending=m}}l.lanes|=n,m=l.alternate,m!==null&&(m.lanes|=n),Vo(l.return,n,s),d.lanes|=n;break}m=m.next}}else if(l.tag===10)o=l.type===s.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(Y(341));o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Vo(o,n,s),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===s){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}ct(e,s,a.children,n),s=s.child}return s;case 9:return a=s.type,r=s.pendingProps.children,zn(s,n),a=Ft(a),r=r(a),s.flags|=1,ct(e,s,r,n),s.child;case 14:return r=s.type,a=Bt(r,s.pendingProps),a=Bt(r.type,a),Sd(e,s,r,a,n);case 15:return ix(e,s,s.type,s.pendingProps,n);case 17:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Bt(r,a),Ea(e,s),s.tag=1,gt(r)?(e=!0,qa(s)):e=!1,zn(s,n),ax(s,r,a),qo(s,r,a,n),Yo(null,s,r,!0,e,n);case 19:return xx(e,s,n);case 22:return cx(e,s,n)}throw Error(Y(156,s.tag))};function Lx(e,s){return su(e,s)}function iy(e,s,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(e,s,n,r){return new iy(e,s,n,r)}function ic(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cy(e){if(typeof e=="function")return ic(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ci)return 11;if(e===Ei)return 14}return 2}function Fs(e,s){var n=e.alternate;return n===null?(n=Rt(e.tag,s,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=s,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,s=e.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function za(e,s,n,r,a,l){var o=2;if(r=e,typeof e=="function")ic(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case fn:return en(n.children,a,l,s);case Si:o=8,a|=8;break;case fo:return e=Rt(12,n,s,a|2),e.elementType=fo,e.lanes=l,e;case yo:return e=Rt(13,n,s,a),e.elementType=yo,e.lanes=l,e;case go:return e=Rt(19,n,s,a),e.elementType=go,e.lanes=l,e;case Am:return jl(n,a,l,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Dm:o=10;break e;case Mm:o=9;break e;case Ci:o=11;break e;case Ei:o=14;break e;case vs:o=16,r=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return s=Rt(o,n,s,a),s.elementType=e,s.type=r,s.lanes=l,s}function en(e,s,n,r){return e=Rt(7,e,r,s),e.lanes=n,e}function jl(e,s,n,r){return e=Rt(22,e,r,s),e.elementType=Am,e.lanes=n,e.stateNode={isHidden:!1},e}function lo(e,s,n){return e=Rt(6,e,null,s),e.lanes=n,e}function oo(e,s,n){return s=Rt(4,e.children!==null?e.children:[],e.key,s),s.lanes=n,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function dy(e,s,n,r,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bl(0),this.expirationTimes=Bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function cc(e,s,n,r,a,l,o,d,m){return e=new dy(e,s,n,d,m),s===1?(s=1,l===!0&&(s|=8)):s=0,l=Rt(3,null,null,s),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qi(l),e}function my(e,s,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hn,key:r==null?null:""+r,children:e,containerInfo:s,implementation:n}}function Px(e){if(!e)return As;e=e._reactInternals;e:{if(mn(e)!==e||e.tag!==1)throw Error(Y(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(gt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(gt(n))return Pu(e,n,s)}return s}function zx(e,s,n,r,a,l,o,d,m){return e=cc(n,r,!0,e,a,l,o,d,m),e.context=Px(null),n=e.current,r=dt(),a=Ts(n),l=is(r,a),l.callback=s??null,Os(n,l,a),e.current.lanes=a,Wr(e,a,r),bt(e,r),e}function vl(e,s,n,r){var a=s.current,l=dt(),o=Ts(a);return n=Px(n),s.context===null?s.context=n:s.pendingContext=n,s=is(l,o),s.payload={element:e},r=r===void 0?null:r,r!==null&&(s.callback=r),e=Os(a,s,o),e!==null&&(Ht(e,a,o,l),_a(e,a,o)),o}function al(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Md(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<s?n:s}}function dc(e,s){Md(e,s),(e=e.alternate)&&Md(e,s)}function uy(){return null}var Ox=typeof reportError=="function"?reportError:function(e){console.error(e)};function mc(e){this._internalRoot=e}Nl.prototype.render=mc.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(Y(409));vl(e,s,null,null)};Nl.prototype.unmount=mc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;ln(function(){vl(null,e,null,null)}),s[ms]=null}};function Nl(e){this._internalRoot=e}Nl.prototype.unstable_scheduleHydration=function(e){if(e){var s=cu();e={blockedOn:null,target:e,priority:s};for(var n=0;n<ws.length&&s!==0&&s<ws[n].priority;n++);ws.splice(n,0,e),n===0&&mu(e)}};function uc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ad(){}function xy(e,s,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var i=al(o);l.call(i)}}var o=zx(s,r,e,0,null,!1,!1,"",Ad);return e._reactRootContainer=o,e[ms]=o.current,Pr(e.nodeType===8?e.parentNode:e),ln(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var d=r;r=function(){var i=al(m);d.call(i)}}var m=cc(e,0,!1,null,null,!1,!1,"",Ad);return e._reactRootContainer=m,e[ms]=m.current,Pr(e.nodeType===8?e.parentNode:e),ln(function(){vl(s,m,n,r)}),m}function kl(e,s,n,r,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var d=a;a=function(){var m=al(o);d.call(m)}}vl(s,o,e,a)}else o=xy(n,s,e,a,r);return al(o)}ou=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var n=ir(s.pendingLanes);n!==0&&(zi(s,n|1),bt(s,$e()),!(ge&6)&&(An=$e()+500,Ws()))}break;case 13:ln(function(){var r=us(e,1);if(r!==null){var a=dt();Ht(r,e,1,a)}}),dc(e,1)}};Oi=function(e){if(e.tag===13){var s=us(e,134217728);if(s!==null){var n=dt();Ht(s,e,134217728,n)}dc(e,134217728)}};iu=function(e){if(e.tag===13){var s=Ts(e),n=us(e,s);if(n!==null){var r=dt();Ht(n,e,s,r)}dc(e,s)}};cu=function(){return ve};du=function(e,s){var n=ve;try{return ve=e,s()}finally{ve=n}};Eo=function(e,s,n){switch(s){case"input":if(vo(e,n),s=n.name,n.type==="radio"&&s!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<n.length;s++){var r=n[s];if(r!==e&&r.form===e.form){var a=pl(r);if(!a)throw Error(Y(90));Bm(r),vo(r,a)}}}break;case"textarea":Wm(e,n);break;case"select":s=n.value,s!=null&&Cn(e,!!n.multiple,s,!1)}};Gm=ac;Jm=ln;var py={usingClientEntryPoint:!1,Events:[Hr,jn,pl,Km,Ym,ac]},rr={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hy={bundleType:rr.bundleType,version:rr.version,rendererPackageName:rr.rendererPackageName,rendererConfig:rr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=eu(e),e===null?null:e.stateNode},findFiberByHostInstance:rr.findFiberByHostInstance||uy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ha.isDisabled&&ha.supportsFiber)try{dl=ha.inject(hy),es=ha}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=py;Et.createPortal=function(e,s){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uc(s))throw Error(Y(200));return my(e,s,null,n)};Et.createRoot=function(e,s){if(!uc(e))throw Error(Y(299));var n=!1,r="",a=Ox;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=cc(e,1,!1,null,null,n,!1,r,a),e[ms]=s.current,Pr(e.nodeType===8?e.parentNode:e),new mc(s)};Et.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=eu(s),e=e===null?null:e.stateNode,e};Et.flushSync=function(e){return ln(e)};Et.hydrate=function(e,s,n){if(!wl(s))throw Error(Y(200));return kl(null,e,s,!0,n)};Et.hydrateRoot=function(e,s,n){if(!uc(e))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",o=Ox;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),s=zx(s,null,e,1,n??null,a,!1,l,o),e[ms]=s.current,Pr(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,a]:s.mutableSourceEagerHydrationData.push(n,a);return new Nl(s)};Et.render=function(e,s,n){if(!wl(s))throw Error(Y(200));return kl(null,e,s,!1,n)};Et.unmountComponentAtNode=function(e){if(!wl(e))throw Error(Y(40));return e._reactRootContainer?(ln(function(){kl(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0):!1};Et.unstable_batchedUpdates=ac;Et.unstable_renderSubtreeIntoContainer=function(e,s,n,r){if(!wl(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return kl(e,s,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function Rx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rx)}catch(e){console.error(e)}}Rx(),Rm.exports=Et;var Tx=Rm.exports;const fy=vm(Tx);var Id=Tx;po.createRoot=Id.createRoot,po.hydrateRoot=Id.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ar(){return Ar=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ar.apply(this,arguments)}var Cs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Cs||(Cs={}));const Bd="popstate";function yy(e){e===void 0&&(e={});function s(r,a){let{pathname:l,search:o,hash:d}=r.location;return oi("",{pathname:l,search:o,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:ll(a)}return by(s,n,null,e)}function De(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function xc(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function gy(){return Math.random().toString(36).substr(2,8)}function Ud(e,s){return{usr:e.state,key:e.key,idx:s}}function oi(e,s,n,r){return n===void 0&&(n=null),Ar({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof s=="string"?qn(s):s,{state:n,key:s&&s.key||r||gy()})}function ll(e){let{pathname:s="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function qn(e){let s={};if(e){let n=e.indexOf("#");n>=0&&(s.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(s.search=e.substr(r),e=e.substr(0,r)),e&&(s.pathname=e)}return s}function by(e,s,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,d=Cs.Pop,m=null,i=u();i==null&&(i=0,o.replaceState(Ar({},o.state,{idx:i}),""));function u(){return(o.state||{idx:null}).idx}function c(){d=Cs.Pop;let w=u(),x=w==null?null:w-i;i=w,m&&m({action:d,location:v.location,delta:x})}function h(w,x){d=Cs.Push;let y=oi(v.location,w,x);i=u()+1;let j=Ud(y,i),_=v.createHref(y);try{o.pushState(j,"",_)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(_)}l&&m&&m({action:d,location:v.location,delta:1})}function g(w,x){d=Cs.Replace;let y=oi(v.location,w,x);i=u();let j=Ud(y,i),_=v.createHref(y);o.replaceState(j,"",_),l&&m&&m({action:d,location:v.location,delta:0})}function f(w){let x=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof w=="string"?w:ll(w);return y=y.replace(/ $/,"%20"),De(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let v={get action(){return d},get location(){return e(a,o)},listen(w){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Bd,c),m=w,()=>{a.removeEventListener(Bd,c),m=null}},createHref(w){return s(a,w)},createURL:f,encodeLocation(w){let x=f(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:g,go(w){return o.go(w)}};return v}var Wd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Wd||(Wd={}));function jy(e,s,n){return n===void 0&&(n="/"),vy(e,s,n)}function vy(e,s,n,r){let a=typeof s=="string"?qn(s):s,l=pc(a.pathname||"/",n);if(l==null)return null;let o=Fx(e);Ny(o);let d=null;for(let m=0;d==null&&m<o.length;++m){let i=Ty(l);d=zy(o[m],i)}return d}function Fx(e,s,n,r){s===void 0&&(s=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,o,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};m.relativePath.startsWith("/")&&(De(m.relativePath.startsWith(r),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(r.length));let i=$s([r,m.relativePath]),u=n.concat(m);l.children&&l.children.length>0&&(De(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+i+'".')),Fx(l.children,s,u,i)),!(l.path==null&&!l.index)&&s.push({path:i,score:Ly(i,l.index),routesMeta:u})};return e.forEach((l,o)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,o);else for(let m of $x(l.path))a(l,o,m)}),s}function $x(e){let s=e.split("/");if(s.length===0)return[];let[n,...r]=s,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let o=$x(r.join("/")),d=[];return d.push(...o.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...o),d.map(m=>e.startsWith("/")&&m===""?"/":m)}function Ny(e){e.sort((s,n)=>s.score!==n.score?n.score-s.score:Py(s.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wy=/^:[\w-]+$/,ky=3,_y=2,Sy=1,Cy=10,Ey=-2,Vd=e=>e==="*";function Ly(e,s){let n=e.split("/"),r=n.length;return n.some(Vd)&&(r+=Ey),s&&(r+=_y),n.filter(a=>!Vd(a)).reduce((a,l)=>a+(wy.test(l)?ky:l===""?Sy:Cy),r)}function Py(e,s){return e.length===s.length&&e.slice(0,-1).every((r,a)=>r===s[a])?e[e.length-1]-s[s.length-1]:0}function zy(e,s,n){let{routesMeta:r}=e,a={},l="/",o=[];for(let d=0;d<r.length;++d){let m=r[d],i=d===r.length-1,u=l==="/"?s:s.slice(l.length)||"/",c=Oy({path:m.relativePath,caseSensitive:m.caseSensitive,end:i},u),h=m.route;if(!c)return null;Object.assign(a,c.params),o.push({params:a,pathname:$s([l,c.pathname]),pathnameBase:Ay($s([l,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(l=$s([l,c.pathnameBase]))}return o}function Oy(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Ry(e.path,e.caseSensitive,e.end),a=s.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((i,u,c)=>{let{paramName:h,isOptional:g}=u;if(h==="*"){let v=d[c]||"";o=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const f=d[c];return g&&!f?i[h]=void 0:i[h]=(f||"").replace(/%2F/g,"/"),i},{}),pathname:l,pathnameBase:o,pattern:e}}function Ry(e,s,n){s===void 0&&(s=!1),n===void 0&&(n=!0),xc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),r]}function Ty(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return xc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),e}}function pc(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Fy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$y=e=>Fy.test(e);function Dy(e,s){s===void 0&&(s="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?qn(e):e,l;if(n)if($y(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),xc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=Hd(n.substring(1),"/"):l=Hd(n,s)}else l=s;return{pathname:l,search:Iy(r),hash:By(a)}}function Hd(e,s){let n=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function io(e,s,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function My(e){return e.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function hc(e,s){let n=My(e);return s?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function fc(e,s,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=qn(e):(a=Ar({},e),De(!a.pathname||!a.pathname.includes("?"),io("?","pathname","search",a)),De(!a.pathname||!a.pathname.includes("#"),io("#","pathname","hash",a)),De(!a.search||!a.search.includes("#"),io("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,d;if(o==null)d=n;else{let c=s.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),c-=1;a.pathname=h.join("/")}d=c>=0?s[c]:"/"}let m=Dy(a,d),i=o&&o!=="/"&&o.endsWith("/"),u=(l||o===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(i||u)&&(m.pathname+="/"),m}const $s=e=>e.join("/").replace(/\/\/+/g,"/"),Ay=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Iy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,By=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Uy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Dx=["post","put","patch","delete"];new Set(Dx);const Wy=["get",...Dx];new Set(Wy);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ir(){return Ir=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ir.apply(this,arguments)}const yc=p.createContext(null),Vy=p.createContext(null),Vs=p.createContext(null),_l=p.createContext(null),ys=p.createContext({outlet:null,matches:[],isDataRoute:!1}),Mx=p.createContext(null);function Hy(e,s){let{relative:n}=s===void 0?{}:s;Qn()||De(!1);let{basename:r,navigator:a}=p.useContext(Vs),{hash:l,pathname:o,search:d}=Ix(e,{relative:n}),m=o;return r!=="/"&&(m=o==="/"?r:$s([r,o])),a.createHref({pathname:m,search:d,hash:l})}function Qn(){return p.useContext(_l)!=null}function Hs(){return Qn()||De(!1),p.useContext(_l).location}function Ax(e){p.useContext(Vs).static||p.useLayoutEffect(e)}function Dt(){let{isDataRoute:e}=p.useContext(ys);return e?rg():qy()}function qy(){Qn()||De(!1);let e=p.useContext(yc),{basename:s,future:n,navigator:r}=p.useContext(Vs),{matches:a}=p.useContext(ys),{pathname:l}=Hs(),o=JSON.stringify(hc(a,n.v7_relativeSplatPath)),d=p.useRef(!1);return Ax(()=>{d.current=!0}),p.useCallback(function(i,u){if(u===void 0&&(u={}),!d.current)return;if(typeof i=="number"){r.go(i);return}let c=fc(i,JSON.parse(o),l,u.relative==="path");e==null&&s!=="/"&&(c.pathname=c.pathname==="/"?s:$s([s,c.pathname])),(u.replace?r.replace:r.push)(c,u.state,u)},[s,r,o,l,e])}function Sl(){let{matches:e}=p.useContext(ys),s=e[e.length-1];return s?s.params:{}}function Ix(e,s){let{relative:n}=s===void 0?{}:s,{future:r}=p.useContext(Vs),{matches:a}=p.useContext(ys),{pathname:l}=Hs(),o=JSON.stringify(hc(a,r.v7_relativeSplatPath));return p.useMemo(()=>fc(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function Qy(e,s){return Ky(e,s)}function Ky(e,s,n,r){Qn()||De(!1);let{navigator:a}=p.useContext(Vs),{matches:l}=p.useContext(ys),o=l[l.length-1],d=o?o.params:{};o&&o.pathname;let m=o?o.pathnameBase:"/";o&&o.route;let i=Hs(),u;if(s){var c;let w=typeof s=="string"?qn(s):s;m==="/"||(c=w.pathname)!=null&&c.startsWith(m)||De(!1),u=w}else u=i;let h=u.pathname||"/",g=h;if(m!=="/"){let w=m.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let f=jy(e,{pathname:g}),v=Zy(f&&f.map(w=>Object.assign({},w,{params:Object.assign({},d,w.params),pathname:$s([m,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?m:$s([m,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),l,n,r);return s&&v?p.createElement(_l.Provider,{value:{location:Ir({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Cs.Pop}},v):v}function Yy(){let e=ng(),s=Uy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},s),n?p.createElement("pre",{style:a},n):null,null)}const Gy=p.createElement(Yy,null);class Jy extends p.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,n){return n.location!==s.location||n.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:n.error,location:n.location,revalidation:s.revalidation||n.revalidation}}componentDidCatch(s,n){console.error("React Router caught the following error during render",s,n)}render(){return this.state.error!==void 0?p.createElement(ys.Provider,{value:this.props.routeContext},p.createElement(Mx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xy(e){let{routeContext:s,match:n,children:r}=e,a=p.useContext(yc);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(ys.Provider,{value:s},r)}function Zy(e,s,n,r){var a;if(s===void 0&&(s=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&s.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,d=(a=n)==null?void 0:a.errors;if(d!=null){let u=o.findIndex(c=>c.route.id&&(d==null?void 0:d[c.route.id])!==void 0);u>=0||De(!1),o=o.slice(0,Math.min(o.length,u+1))}let m=!1,i=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let c=o[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(i=u),c.route.id){let{loaderData:h,errors:g}=n,f=c.route.loader&&h[c.route.id]===void 0&&(!g||g[c.route.id]===void 0);if(c.route.lazy||f){m=!0,i>=0?o=o.slice(0,i+1):o=[o[0]];break}}}return o.reduceRight((u,c,h)=>{let g,f=!1,v=null,w=null;n&&(g=d&&c.route.id?d[c.route.id]:void 0,v=c.route.errorElement||Gy,m&&(i<0&&h===0?(ag("route-fallback"),f=!0,w=null):i===h&&(f=!0,w=c.route.hydrateFallbackElement||null)));let x=s.concat(o.slice(0,h+1)),y=()=>{let j;return g?j=v:f?j=w:c.route.Component?j=p.createElement(c.route.Component,null):c.route.element?j=c.route.element:j=u,p.createElement(Xy,{match:c,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:j})};return n&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?p.createElement(Jy,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var Bx=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Bx||{}),Ux=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ux||{});function eg(e){let s=p.useContext(yc);return s||De(!1),s}function tg(e){let s=p.useContext(Vy);return s||De(!1),s}function sg(e){let s=p.useContext(ys);return s||De(!1),s}function Wx(e){let s=sg(),n=s.matches[s.matches.length-1];return n.route.id||De(!1),n.route.id}function ng(){var e;let s=p.useContext(Mx),n=tg(),r=Wx();return s!==void 0?s:(e=n.errors)==null?void 0:e[r]}function rg(){let{router:e}=eg(Bx.UseNavigateStable),s=Wx(Ux.UseNavigateStable),n=p.useRef(!1);return Ax(()=>{n.current=!0}),p.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Ir({fromRouteId:s},l)))},[e,s])}const qd={};function ag(e,s,n){qd[e]||(qd[e]=!0)}function lg(e,s){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function jr(e){let{to:s,replace:n,state:r,relative:a}=e;Qn()||De(!1);let{future:l,static:o}=p.useContext(Vs),{matches:d}=p.useContext(ys),{pathname:m}=Hs(),i=Dt(),u=fc(s,hc(d,l.v7_relativeSplatPath),m,a==="path"),c=JSON.stringify(u);return p.useEffect(()=>i(JSON.parse(c),{replace:n,state:r,relative:a}),[i,c,a,n,r]),null}function ye(e){De(!1)}function og(e){let{basename:s="/",children:n=null,location:r,navigationType:a=Cs.Pop,navigator:l,static:o=!1,future:d}=e;Qn()&&De(!1);let m=s.replace(/^\/*/,"/"),i=p.useMemo(()=>({basename:m,navigator:l,static:o,future:Ir({v7_relativeSplatPath:!1},d)}),[m,d,l,o]);typeof r=="string"&&(r=qn(r));let{pathname:u="/",search:c="",hash:h="",state:g=null,key:f="default"}=r,v=p.useMemo(()=>{let w=pc(u,m);return w==null?null:{location:{pathname:w,search:c,hash:h,state:g,key:f},navigationType:a}},[m,u,c,h,g,f,a]);return v==null?null:p.createElement(Vs.Provider,{value:i},p.createElement(_l.Provider,{children:n,value:v}))}function ig(e){let{children:s,location:n}=e;return Qy(ii(s),n)}new Promise(()=>{});function ii(e,s){s===void 0&&(s=[]);let n=[];return p.Children.forEach(e,(r,a)=>{if(!p.isValidElement(r))return;let l=[...s,a];if(r.type===p.Fragment){n.push.apply(n,ii(r.props.children,l));return}r.type!==ye&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ii(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ci(){return ci=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ci.apply(this,arguments)}function cg(e,s){if(e==null)return{};var n={},r=Object.keys(e),a,l;for(l=0;l<r.length;l++)a=r[l],!(s.indexOf(a)>=0)&&(n[a]=e[a]);return n}function dg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function mg(e,s){return e.button===0&&(!s||s==="_self")&&!dg(e)}const ug=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xg="6";try{window.__reactRouterVersion=xg}catch{}const pg="startTransition",Qd=rh[pg];function hg(e){let{basename:s,children:n,future:r,window:a}=e,l=p.useRef();l.current==null&&(l.current=yy({window:a,v5Compat:!0}));let o=l.current,[d,m]=p.useState({action:o.action,location:o.location}),{v7_startTransition:i}=r||{},u=p.useCallback(c=>{i&&Qd?Qd(()=>m(c)):m(c)},[m,i]);return p.useLayoutEffect(()=>o.listen(u),[o,u]),p.useEffect(()=>lg(r),[r]),p.createElement(og,{basename:s,children:n,location:d.location,navigationType:d.action,navigator:o,future:r})}const fg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oa=p.forwardRef(function(s,n){let{onClick:r,relative:a,reloadDocument:l,replace:o,state:d,target:m,to:i,preventScrollReset:u,viewTransition:c}=s,h=cg(s,ug),{basename:g}=p.useContext(Vs),f,v=!1;if(typeof i=="string"&&yg.test(i)&&(f=i,fg))try{let j=new URL(window.location.href),_=i.startsWith("//")?new URL(j.protocol+i):new URL(i),P=pc(_.pathname,g);_.origin===j.origin&&P!=null?i=P+_.search+_.hash:v=!0}catch{}let w=Hy(i,{relative:a}),x=gg(i,{replace:o,state:d,target:m,preventScrollReset:u,relative:a,viewTransition:c});function y(j){r&&r(j),j.defaultPrevented||x(j)}return p.createElement("a",ci({},h,{href:f||w,onClick:v||l?r:y,ref:n,target:m}))});var Kd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Kd||(Kd={}));var Yd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Yd||(Yd={}));function gg(e,s){let{target:n,replace:r,state:a,preventScrollReset:l,relative:o,viewTransition:d}=s===void 0?{}:s,m=Dt(),i=Hs(),u=Ix(e,{relative:o});return p.useCallback(c=>{if(mg(c,n)){c.preventDefault();let h=r!==void 0?r:ll(i)===ll(u);m(e,{replace:h,state:a,preventScrollReset:l,relative:o,viewTransition:d})}},[i,m,u,r,a,n,e,l,o,d])}function bg(e){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const jg=e=>{switch(e){case"success":return wg;case"info":return _g;case"warning":return kg;case"error":return Sg;default:return null}},vg=Array(12).fill(0),Ng=({visible:e,className:s})=>K.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":e},K.createElement("div",{className:"sonner-spinner"},vg.map((n,r)=>K.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),wg=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),kg=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_g=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Sg=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Cg=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},K.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Eg=()=>{const[e,s]=K.useState(document.hidden);return K.useEffect(()=>{const n=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let di=1;class Lg{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const n=this.subscribers.indexOf(s);this.subscribers.splice(n,1)}),this.publish=s=>{this.subscribers.forEach(n=>n(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var n;const{message:r,...a}=s,l=typeof(s==null?void 0:s.id)=="number"||((n=s.id)==null?void 0:n.length)>0?s.id:di++,o=this.toasts.find(m=>m.id===l),d=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),o?this.toasts=this.toasts.map(m=>m.id===l?(this.publish({...m,...s,id:l,title:r}),{...m,...s,id:l,dismissible:d,title:r}):m):this.addToast({title:r,...a,dismissible:d,id:l}),l},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:s,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),s),this.message=(s,n)=>this.create({...n,message:s}),this.error=(s,n)=>this.create({...n,message:s,type:"error"}),this.success=(s,n)=>this.create({...n,type:"success",message:s}),this.info=(s,n)=>this.create({...n,type:"info",message:s}),this.warning=(s,n)=>this.create({...n,type:"warning",message:s}),this.loading=(s,n)=>this.create({...n,type:"loading",message:s}),this.promise=(s,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:s,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(s instanceof Function?s():s);let l=r!==void 0,o;const d=a.then(async i=>{if(o=["resolve",i],K.isValidElement(i))l=!1,this.create({id:r,type:"default",message:i});else if(zg(i)&&!i.ok){l=!1;const c=typeof n.error=="function"?await n.error(`HTTP error! status: ${i.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${i.status}`):n.description,f=typeof c=="object"&&!K.isValidElement(c)?c:{message:c};this.create({id:r,type:"error",description:h,...f})}else if(i instanceof Error){l=!1;const c=typeof n.error=="function"?await n.error(i):n.error,h=typeof n.description=="function"?await n.description(i):n.description,f=typeof c=="object"&&!K.isValidElement(c)?c:{message:c};this.create({id:r,type:"error",description:h,...f})}else if(n.success!==void 0){l=!1;const c=typeof n.success=="function"?await n.success(i):n.success,h=typeof n.description=="function"?await n.description(i):n.description,f=typeof c=="object"&&!K.isValidElement(c)?c:{message:c};this.create({id:r,type:"success",description:h,...f})}}).catch(async i=>{if(o=["reject",i],n.error!==void 0){l=!1;const u=typeof n.error=="function"?await n.error(i):n.error,c=typeof n.description=="function"?await n.description(i):n.description,g=typeof u=="object"&&!K.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:c,...g})}}).finally(()=>{l&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),m=()=>new Promise((i,u)=>d.then(()=>o[0]==="reject"?u(o[1]):i(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:m}:Object.assign(r,{unwrap:m})},this.custom=(s,n)=>{const r=(n==null?void 0:n.id)||di++;return this.create({jsx:s(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const pt=new Lg,Pg=(e,s)=>{const n=(s==null?void 0:s.id)||di++;return pt.addToast({title:e,...s,id:n}),n},zg=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Og=Pg,Rg=()=>pt.toasts,Tg=()=>pt.getActiveToasts(),V=Object.assign(Og,{success:pt.success,info:pt.info,warning:pt.warning,error:pt.error,custom:pt.custom,message:pt.message,promise:pt.promise,dismiss:pt.dismiss,loading:pt.loading},{getHistory:Rg,getToasts:Tg});bg("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function fa(e){return e.label!==void 0}const Fg=3,$g="24px",Dg="16px",Gd=4e3,Mg=356,Ag=14,Ig=45,Bg=200;function Gt(...e){return e.filter(Boolean).join(" ")}function Ug(e){const[s,n]=e.split("-"),r=[];return s&&r.push(s),n&&r.push(n),r}const Wg=e=>{var s,n,r,a,l,o,d,m,i;const{invert:u,toast:c,unstyled:h,interacting:g,setHeights:f,visibleToasts:v,heights:w,index:x,toasts:y,expanded:j,removeToast:_,defaultRichColors:P,closeButton:k,style:z,cancelButtonStyle:b,actionButtonStyle:S,className:E="",descriptionClassName:N="",duration:R,position:I,gap:L,expandByDefault:T,classNames:A,icons:H,closeButtonAriaLabel:D="Close toast"}=e,[B,$]=K.useState(null),[Q,C]=K.useState(null),[q,J]=K.useState(!1),[O,W]=K.useState(!1),[se,Z]=K.useState(!1),[oe,Re]=K.useState(!1),[Te,Ae]=K.useState(!1),[Ie,et]=K.useState(0),[it,U]=K.useState(0),X=K.useRef(c.duration||R||Gd),ne=K.useRef(null),ue=K.useRef(null),F=x===0,G=x+1<=v,te=c.type,le=c.dismissible!==!1,re=c.className||"",Ne=c.descriptionClassName||"",pe=K.useMemo(()=>w.findIndex(me=>me.toastId===c.id)||0,[w,c.id]),be=K.useMemo(()=>{var me;return(me=c.closeButton)!=null?me:k},[c.closeButton,k]),Fe=K.useMemo(()=>c.duration||R||Gd,[c.duration,R]),ie=K.useRef(0),fe=K.useRef(0),xe=K.useRef(0),Ye=K.useRef(null),[Gn,un]=I.split("-"),ns=K.useMemo(()=>w.reduce((me,Ve,tt)=>tt>=pe?me:me+Ve.height,0),[w,pe]),Ec=Eg(),Ap=c.invert||u,Fl=te==="loading";fe.current=K.useMemo(()=>pe*L+ns,[pe,ns]),K.useEffect(()=>{X.current=Fe},[Fe]),K.useEffect(()=>{J(!0)},[]),K.useEffect(()=>{const me=ue.current;if(me){const Ve=me.getBoundingClientRect().height;return U(Ve),f(tt=>[{toastId:c.id,height:Ve,position:c.position},...tt]),()=>f(tt=>tt.filter(Nt=>Nt.toastId!==c.id))}},[f,c.id]),K.useLayoutEffect(()=>{if(!q)return;const me=ue.current,Ve=me.style.height;me.style.height="auto";const tt=me.getBoundingClientRect().height;me.style.height=Ve,U(tt),f(Nt=>Nt.find(Ge=>Ge.toastId===c.id)?Nt.map(Ge=>Ge.toastId===c.id?{...Ge,height:tt}:Ge):[{toastId:c.id,height:tt,position:c.position},...Nt])},[q,c.title,c.description,f,c.id,c.jsx,c.action,c.cancel]);const gs=K.useCallback(()=>{W(!0),et(fe.current),f(me=>me.filter(Ve=>Ve.toastId!==c.id)),setTimeout(()=>{_(c)},Bg)},[c,_,f,fe]);K.useEffect(()=>{if(c.promise&&te==="loading"||c.duration===1/0||c.type==="loading")return;let me;return j||g||Ec?(()=>{if(xe.current<ie.current){const Nt=new Date().getTime()-ie.current;X.current=X.current-Nt}xe.current=new Date().getTime()})():(()=>{X.current!==1/0&&(ie.current=new Date().getTime(),me=setTimeout(()=>{c.onAutoClose==null||c.onAutoClose.call(c,c),gs()},X.current))})(),()=>clearTimeout(me)},[j,g,c,te,Ec,gs]),K.useEffect(()=>{c.delete&&(gs(),c.onDismiss==null||c.onDismiss.call(c,c))},[gs,c.delete]);function Ip(){var me;if(H!=null&&H.loading){var Ve;return K.createElement("div",{className:Gt(A==null?void 0:A.loader,c==null||(Ve=c.classNames)==null?void 0:Ve.loader,"sonner-loader"),"data-visible":te==="loading"},H.loading)}return K.createElement(Ng,{className:Gt(A==null?void 0:A.loader,c==null||(me=c.classNames)==null?void 0:me.loader),visible:te==="loading"})}const Bp=c.icon||(H==null?void 0:H[te])||jg(te);var Lc,Pc;return K.createElement("li",{tabIndex:0,ref:ue,className:Gt(E,re,A==null?void 0:A.toast,c==null||(s=c.classNames)==null?void 0:s.toast,A==null?void 0:A.default,A==null?void 0:A[te],c==null||(n=c.classNames)==null?void 0:n[te]),"data-sonner-toast":"","data-rich-colors":(Lc=c.richColors)!=null?Lc:P,"data-styled":!(c.jsx||c.unstyled||h),"data-mounted":q,"data-promise":!!c.promise,"data-swiped":Te,"data-removed":O,"data-visible":G,"data-y-position":Gn,"data-x-position":un,"data-index":x,"data-front":F,"data-swiping":se,"data-dismissible":le,"data-type":te,"data-invert":Ap,"data-swipe-out":oe,"data-swipe-direction":Q,"data-expanded":!!(j||T&&q),"data-testid":c.testId,style:{"--index":x,"--toasts-before":x,"--z-index":y.length-x,"--offset":`${O?Ie:fe.current}px`,"--initial-height":T?"auto":`${it}px`,...z,...c.style},onDragEnd:()=>{Z(!1),$(null),Ye.current=null},onPointerDown:me=>{me.button!==2&&(Fl||!le||(ne.current=new Date,et(fe.current),me.target.setPointerCapture(me.pointerId),me.target.tagName!=="BUTTON"&&(Z(!0),Ye.current={x:me.clientX,y:me.clientY})))},onPointerUp:()=>{var me,Ve,tt;if(oe||!le)return;Ye.current=null;const Nt=Number(((me=ue.current)==null?void 0:me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Jr=Number(((Ve=ue.current)==null?void 0:Ve.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ge=new Date().getTime()-((tt=ne.current)==null?void 0:tt.getTime()),Pt=B==="x"?Nt:Jr,Xr=Math.abs(Pt)/Ge;if(Math.abs(Pt)>=Ig||Xr>.11){et(fe.current),c.onDismiss==null||c.onDismiss.call(c,c),C(B==="x"?Nt>0?"right":"left":Jr>0?"down":"up"),gs(),Re(!0);return}else{var Mt,At;(Mt=ue.current)==null||Mt.style.setProperty("--swipe-amount-x","0px"),(At=ue.current)==null||At.style.setProperty("--swipe-amount-y","0px")}Ae(!1),Z(!1),$(null)},onPointerMove:me=>{var Ve,tt,Nt;if(!Ye.current||!le||((Ve=window.getSelection())==null?void 0:Ve.toString().length)>0)return;const Ge=me.clientY-Ye.current.y,Pt=me.clientX-Ye.current.x;var Xr;const Mt=(Xr=e.swipeDirections)!=null?Xr:Ug(I);!B&&(Math.abs(Pt)>1||Math.abs(Ge)>1)&&$(Math.abs(Pt)>Math.abs(Ge)?"x":"y");let At={x:0,y:0};const zc=qs=>1/(1.5+Math.abs(qs)/20);if(B==="y"){if(Mt.includes("top")||Mt.includes("bottom"))if(Mt.includes("top")&&Ge<0||Mt.includes("bottom")&&Ge>0)At.y=Ge;else{const qs=Ge*zc(Ge);At.y=Math.abs(qs)<Math.abs(Ge)?qs:Ge}}else if(B==="x"&&(Mt.includes("left")||Mt.includes("right")))if(Mt.includes("left")&&Pt<0||Mt.includes("right")&&Pt>0)At.x=Pt;else{const qs=Pt*zc(Pt);At.x=Math.abs(qs)<Math.abs(Pt)?qs:Pt}(Math.abs(At.x)>0||Math.abs(At.y)>0)&&Ae(!0),(tt=ue.current)==null||tt.style.setProperty("--swipe-amount-x",`${At.x}px`),(Nt=ue.current)==null||Nt.style.setProperty("--swipe-amount-y",`${At.y}px`)}},be&&!c.jsx&&te!=="loading"?K.createElement("button",{"aria-label":D,"data-disabled":Fl,"data-close-button":!0,onClick:Fl||!le?()=>{}:()=>{gs(),c.onDismiss==null||c.onDismiss.call(c,c)},className:Gt(A==null?void 0:A.closeButton,c==null||(r=c.classNames)==null?void 0:r.closeButton)},(Pc=H==null?void 0:H.close)!=null?Pc:Cg):null,(te||c.icon||c.promise)&&c.icon!==null&&((H==null?void 0:H[te])!==null||c.icon)?K.createElement("div",{"data-icon":"",className:Gt(A==null?void 0:A.icon,c==null||(a=c.classNames)==null?void 0:a.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||Ip():null,c.type!=="loading"?Bp:null):null,K.createElement("div",{"data-content":"",className:Gt(A==null?void 0:A.content,c==null||(l=c.classNames)==null?void 0:l.content)},K.createElement("div",{"data-title":"",className:Gt(A==null?void 0:A.title,c==null||(o=c.classNames)==null?void 0:o.title)},c.jsx?c.jsx:typeof c.title=="function"?c.title():c.title),c.description?K.createElement("div",{"data-description":"",className:Gt(N,Ne,A==null?void 0:A.description,c==null||(d=c.classNames)==null?void 0:d.description)},typeof c.description=="function"?c.description():c.description):null),K.isValidElement(c.cancel)?c.cancel:c.cancel&&fa(c.cancel)?K.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||b,onClick:me=>{fa(c.cancel)&&le&&(c.cancel.onClick==null||c.cancel.onClick.call(c.cancel,me),gs())},className:Gt(A==null?void 0:A.cancelButton,c==null||(m=c.classNames)==null?void 0:m.cancelButton)},c.cancel.label):null,K.isValidElement(c.action)?c.action:c.action&&fa(c.action)?K.createElement("button",{"data-button":!0,"data-action":!0,style:c.actionButtonStyle||S,onClick:me=>{fa(c.action)&&(c.action.onClick==null||c.action.onClick.call(c.action,me),!me.defaultPrevented&&gs())},className:Gt(A==null?void 0:A.actionButton,c==null||(i=c.classNames)==null?void 0:i.actionButton)},c.action.label):null)};function Jd(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Vg(e,s){const n={};return[e,s].forEach((r,a)=>{const l=a===1,o=l?"--mobile-offset":"--offset",d=l?Dg:$g;function m(i){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof i=="number"?`${i}px`:i})}typeof r=="number"||typeof r=="string"?m(r):typeof r=="object"?["top","right","bottom","left"].forEach(i=>{r[i]===void 0?n[`${o}-${i}`]=d:n[`${o}-${i}`]=typeof r[i]=="number"?`${r[i]}px`:r[i]}):m(d)}),n}const Hg=K.forwardRef(function(s,n){const{id:r,invert:a,position:l="bottom-right",hotkey:o=["altKey","KeyT"],expand:d,closeButton:m,className:i,offset:u,mobileOffset:c,theme:h="light",richColors:g,duration:f,style:v,visibleToasts:w=Fg,toastOptions:x,dir:y=Jd(),gap:j=Ag,icons:_,containerAriaLabel:P="Notifications"}=s,[k,z]=K.useState([]),b=K.useMemo(()=>r?k.filter(q=>q.toasterId===r):k.filter(q=>!q.toasterId),[k,r]),S=K.useMemo(()=>Array.from(new Set([l].concat(b.filter(q=>q.position).map(q=>q.position)))),[b,l]),[E,N]=K.useState([]),[R,I]=K.useState(!1),[L,T]=K.useState(!1),[A,H]=K.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=K.useRef(null),B=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=K.useRef(null),Q=K.useRef(!1),C=K.useCallback(q=>{z(J=>{var O;return(O=J.find(W=>W.id===q.id))!=null&&O.delete||pt.dismiss(q.id),J.filter(({id:W})=>W!==q.id)})},[]);return K.useEffect(()=>pt.subscribe(q=>{if(q.dismiss){requestAnimationFrame(()=>{z(J=>J.map(O=>O.id===q.id?{...O,delete:!0}:O))});return}setTimeout(()=>{fy.flushSync(()=>{z(J=>{const O=J.findIndex(W=>W.id===q.id);return O!==-1?[...J.slice(0,O),{...J[O],...q},...J.slice(O+1)]:[q,...J]})})})}),[k]),K.useEffect(()=>{if(h!=="system"){H(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;const q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:J})=>{H(J?"dark":"light")})}catch{q.addListener(({matches:O})=>{try{H(O?"dark":"light")}catch(W){console.error(W)}})}},[h]),K.useEffect(()=>{k.length<=1&&I(!1)},[k]),K.useEffect(()=>{const q=J=>{var O;if(o.every(Z=>J[Z]||J.code===Z)){var se;I(!0),(se=D.current)==null||se.focus()}J.code==="Escape"&&(document.activeElement===D.current||(O=D.current)!=null&&O.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[o]),K.useEffect(()=>{if(D.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,Q.current=!1)}},[D.current]),K.createElement("section",{ref:n,"aria-label":`${P} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((q,J)=>{var O;const[W,se]=q.split("-");return b.length?K.createElement("ol",{key:q,dir:y==="auto"?Jd():y,tabIndex:-1,ref:D,className:i,"data-sonner-toaster":!0,"data-sonner-theme":A,"data-y-position":W,"data-x-position":se,style:{"--front-toast-height":`${((O=E[0])==null?void 0:O.height)||0}px`,"--width":`${Mg}px`,"--gap":`${j}px`,...v,...Vg(u,c)},onBlur:Z=>{Q.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(Q.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,$.current=Z.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{L||I(!1)},onDragEnd:()=>I(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||T(!0)},onPointerUp:()=>T(!1)},b.filter(Z=>!Z.position&&J===0||Z.position===q).map((Z,oe)=>{var Re,Te;return K.createElement(Wg,{key:Z.id,icons:_,index:oe,toast:Z,defaultRichColors:g,duration:(Re=x==null?void 0:x.duration)!=null?Re:f,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:a,visibleToasts:w,closeButton:(Te=x==null?void 0:x.closeButton)!=null?Te:m,interacting:L,position:q,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,closeButtonAriaLabel:x==null?void 0:x.closeButtonAriaLabel,removeToast:C,toasts:b.filter(Ae=>Ae.position==Z.position),heights:E.filter(Ae=>Ae.position==Z.position),setHeights:N,expandByDefault:d,gap:j,expanded:R,swipeDirections:s.swipeDirections})})):null}))});function Vx(e,s){return function(){return e.apply(s,arguments)}}const{toString:qg}=Object.prototype,{getPrototypeOf:gc}=Object,{iterator:Cl,toStringTag:Hx}=Symbol,El=(e=>s=>{const n=qg.call(s);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qt=e=>(e=e.toLowerCase(),s=>El(s)===e),Ll=e=>s=>typeof s===e,{isArray:Kn}=Array,In=Ll("undefined");function Qr(e){return e!==null&&!In(e)&&e.constructor!==null&&!In(e.constructor)&&jt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const qx=Qt("ArrayBuffer");function Qg(e){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(e):s=e&&e.buffer&&qx(e.buffer),s}const Kg=Ll("string"),jt=Ll("function"),Qx=Ll("number"),Kr=e=>e!==null&&typeof e=="object",Yg=e=>e===!0||e===!1,Ra=e=>{if(El(e)!=="object")return!1;const s=gc(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Hx in e)&&!(Cl in e)},Gg=e=>{if(!Kr(e)||Qr(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Jg=Qt("Date"),Xg=Qt("File"),Zg=Qt("Blob"),eb=Qt("FileList"),tb=e=>Kr(e)&&jt(e.pipe),sb=e=>{let s;return e&&(typeof FormData=="function"&&e instanceof FormData||jt(e.append)&&((s=El(e))==="formdata"||s==="object"&&jt(e.toString)&&e.toString()==="[object FormData]"))},nb=Qt("URLSearchParams"),[rb,ab,lb,ob]=["ReadableStream","Request","Response","Headers"].map(Qt),ib=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yr(e,s,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,a;if(typeof e!="object"&&(e=[e]),Kn(e))for(r=0,a=e.length;r<a;r++)s.call(null,e[r],r,e);else{if(Qr(e))return;const l=n?Object.getOwnPropertyNames(e):Object.keys(e),o=l.length;let d;for(r=0;r<o;r++)d=l[r],s.call(null,e[d],d,e)}}function Kx(e,s){if(Qr(e))return null;s=s.toLowerCase();const n=Object.keys(e);let r=n.length,a;for(;r-- >0;)if(a=n[r],s===a.toLowerCase())return a;return null}const Xs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Yx=e=>!In(e)&&e!==Xs;function mi(){const{caseless:e,skipUndefined:s}=Yx(this)&&this||{},n={},r=(a,l)=>{const o=e&&Kx(n,l)||l;Ra(n[o])&&Ra(a)?n[o]=mi(n[o],a):Ra(a)?n[o]=mi({},a):Kn(a)?n[o]=a.slice():(!s||!In(a))&&(n[o]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Yr(arguments[a],r);return n}const cb=(e,s,n,{allOwnKeys:r}={})=>(Yr(s,(a,l)=>{n&&jt(a)?e[l]=Vx(a,n):e[l]=a},{allOwnKeys:r}),e),db=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),mb=(e,s,n,r)=>{e.prototype=Object.create(s.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:s.prototype}),n&&Object.assign(e.prototype,n)},ub=(e,s,n,r)=>{let a,l,o;const d={};if(s=s||{},e==null)return s;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)o=a[l],(!r||r(o,e,s))&&!d[o]&&(s[o]=e[o],d[o]=!0);e=n!==!1&&gc(e)}while(e&&(!n||n(e,s))&&e!==Object.prototype);return s},xb=(e,s,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=s.length;const r=e.indexOf(s,n);return r!==-1&&r===n},pb=e=>{if(!e)return null;if(Kn(e))return e;let s=e.length;if(!Qx(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=e[s];return n},hb=(e=>s=>e&&s instanceof e)(typeof Uint8Array<"u"&&gc(Uint8Array)),fb=(e,s)=>{const r=(e&&e[Cl]).call(e);let a;for(;(a=r.next())&&!a.done;){const l=a.value;s.call(e,l[0],l[1])}},yb=(e,s)=>{let n;const r=[];for(;(n=e.exec(s))!==null;)r.push(n);return r},gb=Qt("HTMLFormElement"),bb=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),Xd=(({hasOwnProperty:e})=>(s,n)=>e.call(s,n))(Object.prototype),jb=Qt("RegExp"),Gx=(e,s)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Yr(n,(a,l)=>{let o;(o=s(a,l,e))!==!1&&(r[l]=o||a)}),Object.defineProperties(e,r)},vb=e=>{Gx(e,(s,n)=>{if(jt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(jt(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Nb=(e,s)=>{const n={},r=a=>{a.forEach(l=>{n[l]=!0})};return Kn(e)?r(e):r(String(e).split(s)),n},wb=()=>{},kb=(e,s)=>e!=null&&Number.isFinite(e=+e)?e:s;function _b(e){return!!(e&&jt(e.append)&&e[Hx]==="FormData"&&e[Cl])}const Sb=e=>{const s=new Array(10),n=(r,a)=>{if(Kr(r)){if(s.indexOf(r)>=0)return;if(Qr(r))return r;if(!("toJSON"in r)){s[a]=r;const l=Kn(r)?[]:{};return Yr(r,(o,d)=>{const m=n(o,a+1);!In(m)&&(l[d]=m)}),s[a]=void 0,l}}return r};return n(e,0)},Cb=Qt("AsyncFunction"),Eb=e=>e&&(Kr(e)||jt(e))&&jt(e.then)&&jt(e.catch),Jx=((e,s)=>e?setImmediate:s?((n,r)=>(Xs.addEventListener("message",({source:a,data:l})=>{a===Xs&&l===n&&r.length&&r.shift()()},!1),a=>{r.push(a),Xs.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",jt(Xs.postMessage)),Lb=typeof queueMicrotask<"u"?queueMicrotask.bind(Xs):typeof process<"u"&&process.nextTick||Jx,Pb=e=>e!=null&&jt(e[Cl]),M={isArray:Kn,isArrayBuffer:qx,isBuffer:Qr,isFormData:sb,isArrayBufferView:Qg,isString:Kg,isNumber:Qx,isBoolean:Yg,isObject:Kr,isPlainObject:Ra,isEmptyObject:Gg,isReadableStream:rb,isRequest:ab,isResponse:lb,isHeaders:ob,isUndefined:In,isDate:Jg,isFile:Xg,isBlob:Zg,isRegExp:jb,isFunction:jt,isStream:tb,isURLSearchParams:nb,isTypedArray:hb,isFileList:eb,forEach:Yr,merge:mi,extend:cb,trim:ib,stripBOM:db,inherits:mb,toFlatObject:ub,kindOf:El,kindOfTest:Qt,endsWith:xb,toArray:pb,forEachEntry:fb,matchAll:yb,isHTMLForm:gb,hasOwnProperty:Xd,hasOwnProp:Xd,reduceDescriptors:Gx,freezeMethods:vb,toObjectSet:Nb,toCamelCase:bb,noop:wb,toFiniteNumber:kb,findKey:Kx,global:Xs,isContextDefined:Yx,isSpecCompliantForm:_b,toJSONObject:Sb,isAsyncFn:Cb,isThenable:Eb,setImmediate:Jx,asap:Lb,isIterable:Pb};function ce(e,s,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}M.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.status}}});const Xx=ce.prototype,Zx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Zx[e]={value:e}});Object.defineProperties(ce,Zx);Object.defineProperty(Xx,"isAxiosError",{value:!0});ce.from=(e,s,n,r,a,l)=>{const o=Object.create(Xx);M.toFlatObject(e,o,function(u){return u!==Error.prototype},i=>i!=="isAxiosError");const d=e&&e.message?e.message:"Error",m=s==null&&e?e.code:s;return ce.call(o,d,m,n,r,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",l&&Object.assign(o,l),o};const zb=null;function ui(e){return M.isPlainObject(e)||M.isArray(e)}function ep(e){return M.endsWith(e,"[]")?e.slice(0,-2):e}function Zd(e,s,n){return e?e.concat(s).map(function(a,l){return a=ep(a),!n&&l?"["+a+"]":a}).join(n?".":""):s}function Ob(e){return M.isArray(e)&&!e.some(ui)}const Rb=M.toFlatObject(M,{},null,function(s){return/^is[A-Z]/.test(s)});function Pl(e,s,n){if(!M.isObject(e))throw new TypeError("target must be an object");s=s||new FormData,n=M.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,w){return!M.isUndefined(w[v])});const r=n.metaTokens,a=n.visitor||u,l=n.dots,o=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&M.isSpecCompliantForm(s);if(!M.isFunction(a))throw new TypeError("visitor must be a function");function i(f){if(f===null)return"";if(M.isDate(f))return f.toISOString();if(M.isBoolean(f))return f.toString();if(!m&&M.isBlob(f))throw new ce("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(f)||M.isTypedArray(f)?m&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,v,w){let x=f;if(f&&!w&&typeof f=="object"){if(M.endsWith(v,"{}"))v=r?v:v.slice(0,-2),f=JSON.stringify(f);else if(M.isArray(f)&&Ob(f)||(M.isFileList(f)||M.endsWith(v,"[]"))&&(x=M.toArray(f)))return v=ep(v),x.forEach(function(j,_){!(M.isUndefined(j)||j===null)&&s.append(o===!0?Zd([v],_,l):o===null?v:v+"[]",i(j))}),!1}return ui(f)?!0:(s.append(Zd(w,v,l),i(f)),!1)}const c=[],h=Object.assign(Rb,{defaultVisitor:u,convertValue:i,isVisitable:ui});function g(f,v){if(!M.isUndefined(f)){if(c.indexOf(f)!==-1)throw Error("Circular reference detected in "+v.join("."));c.push(f),M.forEach(f,function(x,y){(!(M.isUndefined(x)||x===null)&&a.call(s,x,M.isString(y)?y.trim():y,v,h))===!0&&g(x,v?v.concat(y):[y])}),c.pop()}}if(!M.isObject(e))throw new TypeError("data must be an object");return g(e),s}function em(e){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function bc(e,s){this._pairs=[],e&&Pl(e,this,s)}const tp=bc.prototype;tp.append=function(s,n){this._pairs.push([s,n])};tp.toString=function(s){const n=s?function(r){return s.call(this,r,em)}:em;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function Tb(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function sp(e,s,n){if(!s)return e;const r=n&&n.encode||Tb;M.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let l;if(a?l=a(s,n):l=M.isURLSearchParams(s)?s.toString():new bc(s,n).toString(r),l){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class tm{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){M.forEach(this.handlers,function(r){r!==null&&s(r)})}}const np={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Fb=typeof URLSearchParams<"u"?URLSearchParams:bc,$b=typeof FormData<"u"?FormData:null,Db=typeof Blob<"u"?Blob:null,Mb={isBrowser:!0,classes:{URLSearchParams:Fb,FormData:$b,Blob:Db},protocols:["http","https","file","blob","url","data"]},jc=typeof window<"u"&&typeof document<"u",xi=typeof navigator=="object"&&navigator||void 0,Ab=jc&&(!xi||["ReactNative","NativeScript","NS"].indexOf(xi.product)<0),Ib=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Bb=jc&&window.location.href||"http://localhost",Ub=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jc,hasStandardBrowserEnv:Ab,hasStandardBrowserWebWorkerEnv:Ib,navigator:xi,origin:Bb},Symbol.toStringTag,{value:"Module"})),at={...Ub,...Mb};function Wb(e,s){return Pl(e,new at.classes.URLSearchParams,{visitor:function(n,r,a,l){return at.isNode&&M.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...s})}function Vb(e){return M.matchAll(/\w+|\[(\w*)]/g,e).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Hb(e){const s={},n=Object.keys(e);let r;const a=n.length;let l;for(r=0;r<a;r++)l=n[r],s[l]=e[l];return s}function rp(e){function s(n,r,a,l){let o=n[l++];if(o==="__proto__")return!0;const d=Number.isFinite(+o),m=l>=n.length;return o=!o&&M.isArray(a)?a.length:o,m?(M.hasOwnProp(a,o)?a[o]=[a[o],r]:a[o]=r,!d):((!a[o]||!M.isObject(a[o]))&&(a[o]=[]),s(n,r,a[o],l)&&M.isArray(a[o])&&(a[o]=Hb(a[o])),!d)}if(M.isFormData(e)&&M.isFunction(e.entries)){const n={};return M.forEachEntry(e,(r,a)=>{s(Vb(r),a,n,0)}),n}return null}function qb(e,s,n){if(M.isString(e))try{return(s||JSON.parse)(e),M.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Gr={transitional:np,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,l=M.isObject(s);if(l&&M.isHTMLForm(s)&&(s=new FormData(s)),M.isFormData(s))return a?JSON.stringify(rp(s)):s;if(M.isArrayBuffer(s)||M.isBuffer(s)||M.isStream(s)||M.isFile(s)||M.isBlob(s)||M.isReadableStream(s))return s;if(M.isArrayBufferView(s))return s.buffer;if(M.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let d;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Wb(s,this.formSerializer).toString();if((d=M.isFileList(s))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Pl(d?{"files[]":s}:s,m&&new m,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),qb(s)):s}],transformResponse:[function(s){const n=this.transitional||Gr.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(M.isResponse(s)||M.isReadableStream(s))return s;if(s&&M.isString(s)&&(r&&!this.responseType||a)){const o=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(s,this.parseReviver)}catch(d){if(o)throw d.name==="SyntaxError"?ce.from(d,ce.ERR_BAD_RESPONSE,this,null,this.response):d}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:at.classes.FormData,Blob:at.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],e=>{Gr.headers[e]={}});const Qb=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Kb=e=>{const s={};let n,r,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),n=o.substring(0,a).trim().toLowerCase(),r=o.substring(a+1).trim(),!(!n||s[n]&&Qb[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},sm=Symbol("internals");function ar(e){return e&&String(e).trim().toLowerCase()}function Ta(e){return e===!1||e==null?e:M.isArray(e)?e.map(Ta):String(e)}function Yb(e){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)s[r[1]]=r[2];return s}const Gb=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function co(e,s,n,r,a){if(M.isFunction(r))return r.call(this,s,n);if(a&&(s=n),!!M.isString(s)){if(M.isString(r))return s.indexOf(r)!==-1;if(M.isRegExp(r))return r.test(s)}}function Jb(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function Xb(e,s){const n=M.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(a,l,o){return this[r].call(this,s,a,l,o)},configurable:!0})})}let vt=class{constructor(s){s&&this.set(s)}set(s,n,r){const a=this;function l(d,m,i){const u=ar(m);if(!u)throw new Error("header name must be a non-empty string");const c=M.findKey(a,u);(!c||a[c]===void 0||i===!0||i===void 0&&a[c]!==!1)&&(a[c||m]=Ta(d))}const o=(d,m)=>M.forEach(d,(i,u)=>l(i,u,m));if(M.isPlainObject(s)||s instanceof this.constructor)o(s,n);else if(M.isString(s)&&(s=s.trim())&&!Gb(s))o(Kb(s),n);else if(M.isObject(s)&&M.isIterable(s)){let d={},m,i;for(const u of s){if(!M.isArray(u))throw TypeError("Object iterator must return a key-value pair");d[i=u[0]]=(m=d[i])?M.isArray(m)?[...m,u[1]]:[m,u[1]]:u[1]}o(d,n)}else s!=null&&l(n,s,r);return this}get(s,n){if(s=ar(s),s){const r=M.findKey(this,s);if(r){const a=this[r];if(!n)return a;if(n===!0)return Yb(a);if(M.isFunction(n))return n.call(this,a,r);if(M.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=ar(s),s){const r=M.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||co(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let a=!1;function l(o){if(o=ar(o),o){const d=M.findKey(r,o);d&&(!n||co(r,r[d],d,n))&&(delete r[d],a=!0)}}return M.isArray(s)?s.forEach(l):l(s),a}clear(s){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const l=n[r];(!s||co(this,this[l],l,s,!0))&&(delete this[l],a=!0)}return a}normalize(s){const n=this,r={};return M.forEach(this,(a,l)=>{const o=M.findKey(r,l);if(o){n[o]=Ta(a),delete n[l];return}const d=s?Jb(l):String(l).trim();d!==l&&delete n[l],n[d]=Ta(a),r[d]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return M.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=s&&M.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(a=>r.set(a)),r}static accessor(s){const r=(this[sm]=this[sm]={accessors:{}}).accessors,a=this.prototype;function l(o){const d=ar(o);r[d]||(Xb(a,o),r[d]=!0)}return M.isArray(s)?s.forEach(l):l(s),this}};vt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);M.reduceDescriptors(vt.prototype,({value:e},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>e,set(r){this[n]=r}}});M.freezeMethods(vt);function mo(e,s){const n=this||Gr,r=s||n,a=vt.from(r.headers);let l=r.data;return M.forEach(e,function(d){l=d.call(n,l,a.normalize(),s?s.status:void 0)}),a.normalize(),l}function ap(e){return!!(e&&e.__CANCEL__)}function Yn(e,s,n){ce.call(this,e??"canceled",ce.ERR_CANCELED,s,n),this.name="CanceledError"}M.inherits(Yn,ce,{__CANCEL__:!0});function lp(e,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):s(new ce("Request failed with status code "+n.status,[ce.ERR_BAD_REQUEST,ce.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Zb(e){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return s&&s[1]||""}function e0(e,s){e=e||10;const n=new Array(e),r=new Array(e);let a=0,l=0,o;return s=s!==void 0?s:1e3,function(m){const i=Date.now(),u=r[l];o||(o=i),n[a]=m,r[a]=i;let c=l,h=0;for(;c!==a;)h+=n[c++],c=c%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),i-o<s)return;const g=u&&i-u;return g?Math.round(h*1e3/g):void 0}}function t0(e,s){let n=0,r=1e3/s,a,l;const o=(i,u=Date.now())=>{n=u,a=null,l&&(clearTimeout(l),l=null),e(...i)};return[(...i)=>{const u=Date.now(),c=u-n;c>=r?o(i,u):(a=i,l||(l=setTimeout(()=>{l=null,o(a)},r-c)))},()=>a&&o(a)]}const ol=(e,s,n=3)=>{let r=0;const a=e0(50,250);return t0(l=>{const o=l.loaded,d=l.lengthComputable?l.total:void 0,m=o-r,i=a(m),u=o<=d;r=o;const c={loaded:o,total:d,progress:d?o/d:void 0,bytes:m,rate:i||void 0,estimated:i&&d&&u?(d-o)/i:void 0,event:l,lengthComputable:d!=null,[s?"download":"upload"]:!0};e(c)},n)},nm=(e,s)=>{const n=e!=null;return[r=>s[0]({lengthComputable:n,total:e,loaded:r}),s[1]]},rm=e=>(...s)=>M.asap(()=>e(...s)),s0=at.hasStandardBrowserEnv?((e,s)=>n=>(n=new URL(n,at.origin),e.protocol===n.protocol&&e.host===n.host&&(s||e.port===n.port)))(new URL(at.origin),at.navigator&&/(msie|trident)/i.test(at.navigator.userAgent)):()=>!0,n0=at.hasStandardBrowserEnv?{write(e,s,n,r,a,l,o){if(typeof document>"u")return;const d=[`${e}=${encodeURIComponent(s)}`];M.isNumber(n)&&d.push(`expires=${new Date(n).toUTCString()}`),M.isString(r)&&d.push(`path=${r}`),M.isString(a)&&d.push(`domain=${a}`),l===!0&&d.push("secure"),M.isString(o)&&d.push(`SameSite=${o}`),document.cookie=d.join("; ")},read(e){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function r0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function a0(e,s){return s?e.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):e}function op(e,s,n){let r=!r0(s);return e&&(r||n==!1)?a0(e,s):s}const am=e=>e instanceof vt?{...e}:e;function on(e,s){s=s||{};const n={};function r(i,u,c,h){return M.isPlainObject(i)&&M.isPlainObject(u)?M.merge.call({caseless:h},i,u):M.isPlainObject(u)?M.merge({},u):M.isArray(u)?u.slice():u}function a(i,u,c,h){if(M.isUndefined(u)){if(!M.isUndefined(i))return r(void 0,i,c,h)}else return r(i,u,c,h)}function l(i,u){if(!M.isUndefined(u))return r(void 0,u)}function o(i,u){if(M.isUndefined(u)){if(!M.isUndefined(i))return r(void 0,i)}else return r(void 0,u)}function d(i,u,c){if(c in s)return r(i,u);if(c in e)return r(void 0,i)}const m={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:d,headers:(i,u,c)=>a(am(i),am(u),c,!0)};return M.forEach(Object.keys({...e,...s}),function(u){const c=m[u]||a,h=c(e[u],s[u],u);M.isUndefined(h)&&c!==d||(n[u]=h)}),n}const ip=e=>{const s=on({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:l,headers:o,auth:d}=s;if(s.headers=o=vt.from(o),s.url=sp(op(s.baseURL,s.url,s.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&o.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),M.isFormData(n)){if(at.hasStandardBrowserEnv||at.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(M.isFunction(n.getHeaders)){const m=n.getHeaders(),i=["content-type","content-length"];Object.entries(m).forEach(([u,c])=>{i.includes(u.toLowerCase())&&o.set(u,c)})}}if(at.hasStandardBrowserEnv&&(r&&M.isFunction(r)&&(r=r(s)),r||r!==!1&&s0(s.url))){const m=a&&l&&n0.read(l);m&&o.set(a,m)}return s},l0=typeof XMLHttpRequest<"u",o0=l0&&function(e){return new Promise(function(n,r){const a=ip(e);let l=a.data;const o=vt.from(a.headers).normalize();let{responseType:d,onUploadProgress:m,onDownloadProgress:i}=a,u,c,h,g,f;function v(){g&&g(),f&&f(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function x(){if(!w)return;const j=vt.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),P={data:!d||d==="text"||d==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:j,config:e,request:w};lp(function(z){n(z),v()},function(z){r(z),v()},P),w=null}"onloadend"in w?w.onloadend=x:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(x)},w.onabort=function(){w&&(r(new ce("Request aborted",ce.ECONNABORTED,e,w)),w=null)},w.onerror=function(_){const P=_&&_.message?_.message:"Network Error",k=new ce(P,ce.ERR_NETWORK,e,w);k.event=_||null,r(k),w=null},w.ontimeout=function(){let _=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||np;a.timeoutErrorMessage&&(_=a.timeoutErrorMessage),r(new ce(_,P.clarifyTimeoutError?ce.ETIMEDOUT:ce.ECONNABORTED,e,w)),w=null},l===void 0&&o.setContentType(null),"setRequestHeader"in w&&M.forEach(o.toJSON(),function(_,P){w.setRequestHeader(P,_)}),M.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),d&&d!=="json"&&(w.responseType=a.responseType),i&&([h,f]=ol(i,!0),w.addEventListener("progress",h)),m&&w.upload&&([c,g]=ol(m),w.upload.addEventListener("progress",c),w.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(u=j=>{w&&(r(!j||j.type?new Yn(null,e,w):j),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const y=Zb(a.url);if(y&&at.protocols.indexOf(y)===-1){r(new ce("Unsupported protocol "+y+":",ce.ERR_BAD_REQUEST,e));return}w.send(l||null)})},i0=(e,s)=>{const{length:n}=e=e?e.filter(Boolean):[];if(s||n){let r=new AbortController,a;const l=function(i){if(!a){a=!0,d();const u=i instanceof Error?i:this.reason;r.abort(u instanceof ce?u:new Yn(u instanceof Error?u.message:u))}};let o=s&&setTimeout(()=>{o=null,l(new ce(`timeout ${s} of ms exceeded`,ce.ETIMEDOUT))},s);const d=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(i=>{i.unsubscribe?i.unsubscribe(l):i.removeEventListener("abort",l)}),e=null)};e.forEach(i=>i.addEventListener("abort",l));const{signal:m}=r;return m.unsubscribe=()=>M.asap(d),m}},c0=function*(e,s){let n=e.byteLength;if(n<s){yield e;return}let r=0,a;for(;r<n;)a=r+s,yield e.slice(r,a),r=a},d0=async function*(e,s){for await(const n of m0(e))yield*c0(n,s)},m0=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const s=e.getReader();try{for(;;){const{done:n,value:r}=await s.read();if(n)break;yield r}}finally{await s.cancel()}},lm=(e,s,n,r)=>{const a=d0(e,s);let l=0,o,d=m=>{o||(o=!0,r&&r(m))};return new ReadableStream({async pull(m){try{const{done:i,value:u}=await a.next();if(i){d(),m.close();return}let c=u.byteLength;if(n){let h=l+=c;n(h)}m.enqueue(new Uint8Array(u))}catch(i){throw d(i),i}},cancel(m){return d(m),a.return()}},{highWaterMark:2})},om=64*1024,{isFunction:ya}=M,u0=(({Request:e,Response:s})=>({Request:e,Response:s}))(M.global),{ReadableStream:im,TextEncoder:cm}=M.global,dm=(e,...s)=>{try{return!!e(...s)}catch{return!1}},x0=e=>{e=M.merge.call({skipUndefined:!0},u0,e);const{fetch:s,Request:n,Response:r}=e,a=s?ya(s):typeof fetch=="function",l=ya(n),o=ya(r);if(!a)return!1;const d=a&&ya(im),m=a&&(typeof cm=="function"?(f=>v=>f.encode(v))(new cm):async f=>new Uint8Array(await new n(f).arrayBuffer())),i=l&&d&&dm(()=>{let f=!1;const v=new n(at.origin,{body:new im,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!v}),u=o&&d&&dm(()=>M.isReadableStream(new r("").body)),c={stream:u&&(f=>f.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!c[f]&&(c[f]=(v,w)=>{let x=v&&v[f];if(x)return x.call(v);throw new ce(`Response type '${f}' is not supported`,ce.ERR_NOT_SUPPORT,w)})});const h=async f=>{if(f==null)return 0;if(M.isBlob(f))return f.size;if(M.isSpecCompliantForm(f))return(await new n(at.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(M.isArrayBufferView(f)||M.isArrayBuffer(f))return f.byteLength;if(M.isURLSearchParams(f)&&(f=f+""),M.isString(f))return(await m(f)).byteLength},g=async(f,v)=>{const w=M.toFiniteNumber(f.getContentLength());return w??h(v)};return async f=>{let{url:v,method:w,data:x,signal:y,cancelToken:j,timeout:_,onDownloadProgress:P,onUploadProgress:k,responseType:z,headers:b,withCredentials:S="same-origin",fetchOptions:E}=ip(f),N=s||fetch;z=z?(z+"").toLowerCase():"text";let R=i0([y,j&&j.toAbortSignal()],_),I=null;const L=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let T;try{if(k&&i&&w!=="get"&&w!=="head"&&(T=await g(b,x))!==0){let Q=new n(v,{method:"POST",body:x,duplex:"half"}),C;if(M.isFormData(x)&&(C=Q.headers.get("content-type"))&&b.setContentType(C),Q.body){const[q,J]=nm(T,ol(rm(k)));x=lm(Q.body,om,q,J)}}M.isString(S)||(S=S?"include":"omit");const A=l&&"credentials"in n.prototype,H={...E,signal:R,method:w.toUpperCase(),headers:b.normalize().toJSON(),body:x,duplex:"half",credentials:A?S:void 0};I=l&&new n(v,H);let D=await(l?N(I,E):N(v,H));const B=u&&(z==="stream"||z==="response");if(u&&(P||B&&L)){const Q={};["status","statusText","headers"].forEach(O=>{Q[O]=D[O]});const C=M.toFiniteNumber(D.headers.get("content-length")),[q,J]=P&&nm(C,ol(rm(P),!0))||[];D=new r(lm(D.body,om,q,()=>{J&&J(),L&&L()}),Q)}z=z||"text";let $=await c[M.findKey(c,z)||"text"](D,f);return!B&&L&&L(),await new Promise((Q,C)=>{lp(Q,C,{data:$,headers:vt.from(D.headers),status:D.status,statusText:D.statusText,config:f,request:I})})}catch(A){throw L&&L(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new ce("Network Error",ce.ERR_NETWORK,f,I),{cause:A.cause||A}):ce.from(A,A&&A.code,f,I)}}},p0=new Map,cp=e=>{let s=e&&e.env||{};const{fetch:n,Request:r,Response:a}=s,l=[r,a,n];let o=l.length,d=o,m,i,u=p0;for(;d--;)m=l[d],i=u.get(m),i===void 0&&u.set(m,i=d?new Map:x0(s)),u=i;return i};cp();const vc={http:zb,xhr:o0,fetch:{get:cp}};M.forEach(vc,(e,s)=>{if(e){try{Object.defineProperty(e,"name",{value:s})}catch{}Object.defineProperty(e,"adapterName",{value:s})}});const mm=e=>`- ${e}`,h0=e=>M.isFunction(e)||e===null||e===!1;function f0(e,s){e=M.isArray(e)?e:[e];const{length:n}=e;let r,a;const l={};for(let o=0;o<n;o++){r=e[o];let d;if(a=r,!h0(r)&&(a=vc[(d=String(r)).toLowerCase()],a===void 0))throw new ce(`Unknown adapter '${d}'`);if(a&&(M.isFunction(a)||(a=a.get(s))))break;l[d||"#"+o]=a}if(!a){const o=Object.entries(l).map(([m,i])=>`adapter ${m} `+(i===!1?"is not supported by the environment":"is not available in the build"));let d=n?o.length>1?`since :
`+o.map(mm).join(`
`):" "+mm(o[0]):"as no adapter specified";throw new ce("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a}const dp={getAdapter:f0,adapters:vc};function uo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Yn(null,e)}function um(e){return uo(e),e.headers=vt.from(e.headers),e.data=mo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),dp.getAdapter(e.adapter||Gr.adapter,e)(e).then(function(r){return uo(e),r.data=mo.call(e,e.transformResponse,r),r.headers=vt.from(r.headers),r},function(r){return ap(r)||(uo(e),r&&r.response&&(r.response.data=mo.call(e,e.transformResponse,r.response),r.response.headers=vt.from(r.response.headers))),Promise.reject(r)})}const mp="1.13.2",zl={};["object","boolean","number","function","string","symbol"].forEach((e,s)=>{zl[e]=function(r){return typeof r===e||"a"+(s<1?"n ":" ")+e}});const xm={};zl.transitional=function(s,n,r){function a(l,o){return"[Axios v"+mp+"] Transitional option '"+l+"'"+o+(r?". "+r:"")}return(l,o,d)=>{if(s===!1)throw new ce(a(o," has been removed"+(n?" in "+n:"")),ce.ERR_DEPRECATED);return n&&!xm[o]&&(xm[o]=!0,console.warn(a(o," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(l,o,d):!0}};zl.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function y0(e,s,n){if(typeof e!="object")throw new ce("options must be an object",ce.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const l=r[a],o=s[l];if(o){const d=e[l],m=d===void 0||o(d,l,e);if(m!==!0)throw new ce("option "+l+" must be "+m,ce.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ce("Unknown option "+l,ce.ERR_BAD_OPTION)}}const Fa={assertOptions:y0,validators:zl},Jt=Fa.validators;let tn=class{constructor(s){this.defaults=s||{},this.interceptors={request:new tm,response:new tm}}async request(s,n){try{return await this._request(s,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=on(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:l}=n;r!==void 0&&Fa.assertOptions(r,{silentJSONParsing:Jt.transitional(Jt.boolean),forcedJSONParsing:Jt.transitional(Jt.boolean),clarifyTimeoutError:Jt.transitional(Jt.boolean)},!1),a!=null&&(M.isFunction(a)?n.paramsSerializer={serialize:a}:Fa.assertOptions(a,{encode:Jt.function,serialize:Jt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Fa.assertOptions(n,{baseUrl:Jt.spelling("baseURL"),withXsrfToken:Jt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=l&&M.merge(l.common,l[n.method]);l&&M.forEach(["delete","get","head","post","put","patch","common"],f=>{delete l[f]}),n.headers=vt.concat(o,l);const d=[];let m=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(m=m&&v.synchronous,d.unshift(v.fulfilled,v.rejected))});const i=[];this.interceptors.response.forEach(function(v){i.push(v.fulfilled,v.rejected)});let u,c=0,h;if(!m){const f=[um.bind(this),void 0];for(f.unshift(...d),f.push(...i),h=f.length,u=Promise.resolve(n);c<h;)u=u.then(f[c++],f[c++]);return u}h=d.length;let g=n;for(;c<h;){const f=d[c++],v=d[c++];try{g=f(g)}catch(w){v.call(this,w);break}}try{u=um.call(this,g)}catch(f){return Promise.reject(f)}for(c=0,h=i.length;c<h;)u=u.then(i[c++],i[c++]);return u}getUri(s){s=on(this.defaults,s);const n=op(s.baseURL,s.url,s.allowAbsoluteUrls);return sp(n,s.params,s.paramsSerializer)}};M.forEach(["delete","get","head","options"],function(s){tn.prototype[s]=function(n,r){return this.request(on(r||{},{method:s,url:n,data:(r||{}).data}))}});M.forEach(["post","put","patch"],function(s){function n(r){return function(l,o,d){return this.request(on(d||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}tn.prototype[s]=n(),tn.prototype[s+"Form"]=n(!0)});let g0=class up{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(a=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](a);r._listeners=null}),this.promise.then=a=>{let l;const o=new Promise(d=>{r.subscribe(d),l=d}).then(a);return o.cancel=function(){r.unsubscribe(l)},o},s(function(l,o,d){r.reason||(r.reason=new Yn(l,o,d),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new up(function(a){s=a}),cancel:s}}};function b0(e){return function(n){return e.apply(null,n)}}function j0(e){return M.isObject(e)&&e.isAxiosError===!0}const pi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(pi).forEach(([e,s])=>{pi[s]=e});function xp(e){const s=new tn(e),n=Vx(tn.prototype.request,s);return M.extend(n,tn.prototype,s,{allOwnKeys:!0}),M.extend(n,s,null,{allOwnKeys:!0}),n.create=function(a){return xp(on(e,a))},n}const ze=xp(Gr);ze.Axios=tn;ze.CanceledError=Yn;ze.CancelToken=g0;ze.isCancel=ap;ze.VERSION=mp;ze.toFormData=Pl;ze.AxiosError=ce;ze.Cancel=ze.CanceledError;ze.all=function(s){return Promise.all(s)};ze.spread=b0;ze.isAxiosError=j0;ze.mergeConfig=on;ze.AxiosHeaders=vt;ze.formToJSON=e=>rp(M.isHTMLForm(e)?new FormData(e):e);ze.getAdapter=dp.getAdapter;ze.HttpStatusCode=pi;ze.default=ze;const{Axios:zj,AxiosError:Oj,CanceledError:Rj,isCancel:Tj,CancelToken:Fj,VERSION:$j,all:Dj,Cancel:Mj,isAxiosError:Aj,spread:Ij,toFormData:Bj,AxiosHeaders:Uj,HttpStatusCode:Wj,formToJSON:Vj,getAdapter:Hj,mergeConfig:qj}=ze,pp=p.createContext(),v0=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:8001":"",Nc=v0();console.log(" Backend URL:",Nc,"| Hostname:",window.location.hostname);const dr=ze.create({baseURL:Nc,headers:{"Content-Type":"application/json"}});dr.interceptors.request.use(e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e));const de=()=>{const e=p.useContext(pp);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},N0=({children:e})=>{const[s,n]=p.useState(null),[r,a]=p.useState(!0);p.useEffect(()=>{l()},[]);const l=async()=>{if(localStorage.getItem("token"))try{const u=await dr.get("/api/auth/me");n(u.data)}catch{localStorage.removeItem("token"),localStorage.removeItem("user")}a(!1)},o=async(i,u)=>{var c,h;try{console.log("Attempting login to:",`${Nc}/api/auth/login`);const g=await dr.post("/api/auth/login",{email:i,password:u}),{access_token:f,user:v}=g.data;return localStorage.setItem("token",f),localStorage.setItem("user",JSON.stringify(v)),n(v),{success:!0}}catch(g){return console.error("Login error:",g),{success:!1,error:((h=(c=g.response)==null?void 0:c.data)==null?void 0:h.detail)||g.message||"Login failed - Network error"}}},d=async i=>{var u,c;try{return{success:!0,message:(await dr.post("/api/auth/register",i)).data.message}}catch(h){return{success:!1,error:((c=(u=h.response)==null?void 0:u.data)==null?void 0:c.detail)||"Registration failed"}}},m=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),n(null)};return t.jsx(pp.Provider,{value:{user:s,loading:r,login:o,register:d,logout:m,api:dr},children:e})},hp=p.createContext(),wc=()=>{const e=p.useContext(hp);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e},w0=({children:e})=>{const[s,n]=p.useState(()=>localStorage.getItem("theme")||"dark"),[r,a]=p.useState(()=>localStorage.getItem("language")||"ru");p.useEffect(()=>{localStorage.setItem("theme",s),s==="light"?document.documentElement.classList.add("light-theme"):document.documentElement.classList.remove("light-theme")},[s]),p.useEffect(()=>{localStorage.setItem("language",r)},[r]);const l=()=>{n(d=>d==="dark"?"light":"dark")},o=d=>{a(d)};return t.jsx(hp.Provider,{value:{theme:s,language:r,toggleTheme:l,changeLanguage:o},children:e})},pm={ru:{loading:"// ...",save:"",cancel:"",delete:"",edit:"",create:"",view:"",search:"",filter:"",actions:"",status:"",login:"",register:"",logout:"",email:"Email",password:"",fullName:" ",companyName:" ",inn:"",adminPanel:"",sellerPanel:"",overview:"",users:"",analytics:"",products:"",orders:"",inventory:"",apiKeys:"API ",finance:"",balance:"",promocodes:"",questions:"",reviews:"",dashboard:"",sellers:"",payouts:"",categories:"",addProduct:"+  ",editProduct:" ",createProduct:" ",productList:"",sku:"",name:"",price:"",description:"",tags:"",images:"",quality:"",variant:"",orderList:"",orderNumber:" ",customer:"",source:"",total:"",date:"",inventoryManagement:" ",fbs:"FBS ( )",fbo:"FBO ( )",history:" ",quantity:"",reserved:"",available:"",adjust:"",settings:"",theme:"",language:"",currency:"",dark:"",light:"",noDistractionsJustResults:"//  ,  ",enterCredentials:"//   ",manageProducts:"//   ",trackOrders:"//  ",warehouseManagement:"//   "},en:{loading:"// LOADING...",save:"SAVE",cancel:"CANCEL",delete:"DELETE",edit:"EDIT",create:"CREATE",view:"VIEW",search:"Search",filter:"Filter",actions:"Actions",status:"Status",login:"LOGIN",register:"REGISTER",logout:"LOGOUT",email:"Email",password:"Password",fullName:"Full Name",companyName:"Company Name",inn:"Tax ID",adminPanel:"ADMIN",sellerPanel:"SELLER",overview:"Overview",users:"Users",analytics:"Analytics",products:"Products",orders:"Orders",inventory:"Inventory",apiKeys:"API Keys",finance:"Finance",balance:"Balance",promocodes:"Promocodes",questions:"Questions",reviews:"Reviews",dashboard:"Dashboard",sellers:"Sellers",payouts:"Payouts",categories:"Categories",addProduct:"+ ADD PRODUCT",editProduct:"EDIT PRODUCT",createProduct:"CREATE PRODUCT",productList:"PRODUCTS",sku:"SKU",name:"Name",price:"Price",description:"Description",tags:"Tags",images:"Images",quality:"Quality",variant:"Variant",orderList:"ORDERS",orderNumber:"Order #",customer:"Customer",source:"Source",total:"Total",date:"Date",inventoryManagement:"INVENTORY",fbs:"FBS (Own Warehouse)",fbo:"FBO (Marketplace Warehouses)",history:"Movement History",quantity:"Quantity",reserved:"Reserved",available:"Available",adjust:"ADJUST",settings:"SETTINGS",theme:"THEME",language:"LANGUAGE",currency:"CURRENCY",dark:"Dark",light:"Light",noDistractionsJustResults:"// No distractions, Just results",enterCredentials:"// Enter your credentials",manageProducts:"// Manage your product catalog",trackOrders:"// Track your sales",warehouseManagement:"// Manage warehouse and stock levels"}},k0=e=>({t:n=>{var r;return((r=pm[e])==null?void 0:r[n])||pm.en[n]||n}});function _0(){const e=Dt(),{login:s}=de(),{language:n}=wc(),{t:r}=k0(n),[a,l]=p.useState({email:"",password:""}),[o,d]=p.useState(""),[m,i]=p.useState(!1),u=async h=>{h.preventDefault(),d(""),i(!0);const g=await s(a.email,a.password);g.success?e("/"):d(g.error),i(!1)},c=h=>{l({...a,[h.target.name]:h.target.value})};return t.jsx("div",{className:"min-h-screen bg-mm-black flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsxs("h1",{className:"text-5xl font-bold mb-4 text-mm-text",children:["MINIMAL",t.jsx("span",{className:"text-mm-purple",children:"MOD"})]}),t.jsx("p",{className:"comment",children:r("noDistractionsJustResults")})]}),t.jsxs("div",{className:"card-neon",children:[t.jsx("h2",{className:"text-2xl mb-2 text-mm-cyan",children:r("login")}),t.jsx("p",{className:"comment mb-8",children:r("enterCredentials")}),o&&t.jsx("div",{className:"mb-6 p-4 border border-mm-red bg-mm-red/10 text-mm-red text-sm font-mono",children:o}),t.jsxs("form",{onSubmit:u,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase tracking-wider",children:r("email")}),t.jsx("input",{type:"email",name:"email",value:a.email,onChange:c,className:"input-neon w-full",placeholder:"admin@minimalmod.com",required:!0,"data-testid":"login-email-input"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase tracking-wider",children:r("password")}),t.jsx("input",{type:"password",name:"password",value:a.password,onChange:c,className:"input-neon w-full",placeholder:"",required:!0,"data-testid":"login-password-input"})]}),t.jsx("button",{type:"submit",disabled:m,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"login-submit-button",children:m?r("loading"):`// ${r("login")}`})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-mm-border",children:t.jsxs("p",{className:"text-mm-text-secondary text-sm text-center",children:[t.jsx("span",{className:"comment",children:"// New seller?"})," ",t.jsx(Oa,{to:"/register",className:"text-mm-cyan hover:text-mm-cyan/80 transition-colors",children:"Register here"})]})}),t.jsxs("div",{className:"mt-6 p-4 bg-mm-darker border border-mm-border",children:[t.jsx("p",{className:"comment text-xs mb-2",children:"// Demo credentials:"}),t.jsx("p",{className:"text-xs text-mm-text-secondary",children:"Admin: admin@minimalmod.com / admin123"})]})]})]})})}var fp={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hm=K.createContext&&K.createContext(fp),Ds=function(){return Ds=Object.assign||function(e){for(var s,n=1,r=arguments.length;n<r;n++){s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ds.apply(this,arguments)},S0=function(e,s){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function yp(e){return e&&e.map(function(s,n){return K.createElement(s.tag,Ds({key:n},s.attr),yp(s.child))})}function ae(e){return function(s){return K.createElement(C0,Ds({attr:Ds({},e.attr)},s),yp(e.child))}}function C0(e){var s=function(n){var r=e.attr,a=e.size,l=e.title,o=S0(e,["attr","size","title"]),d=a||n.size||"1em",m;return n.className&&(m=n.className),e.className&&(m=(m?m+" ":"")+e.className),K.createElement("svg",Ds({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:m,style:Ds(Ds({color:e.color||n.color},n.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&K.createElement("title",null,l),e.children)};return hm!==void 0?K.createElement(hm.Consumer,null,function(n){return s(n)}):s(fp)}function hi(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"}}]})(e)}function cs(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"}}]})(e)}function gp(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(e)}function fi(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"}},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"}}]})(e)}function il(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"}}]})(e)}function E0(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"}},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"}}]})(e)}function lt(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(e)}function Ol(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(e)}function L0(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"}}]})(e)}function ps(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polyline",attr:{points:"12 6 12 12 16 14"}}]})(e)}function cn(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"}},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}}]})(e)}function mt(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(e)}function bp(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}}]})(e)}function Is(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}}]})(e)}function Rl(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(e)}function P0(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}},{tag:"polyline",attr:{points:"14 2 14 8 20 8"}},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"}},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"}},{tag:"polyline",attr:{points:"10 9 9 9 8 9"}}]})(e)}function kc(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}}]})(e)}function fm(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"}},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}}]})(e)}function jp(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(e)}function yi(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"}},{tag:"polyline",attr:{points:"21 15 16 10 5 21"}}]})(e)}function vp(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"}}]})(e)}function z0(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"}},{tag:"polyline",attr:{points:"2 17 12 22 22 17"}},{tag:"polyline",attr:{points:"2 12 12 17 22 12"}}]})(e)}function vr(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}}]})(e)}function ym(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"}},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"}}]})(e)}function O0(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(e)}function We(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"}},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"}},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"}}]})(e)}function gm(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"}},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"}},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"}}]})(e)}function Np(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"}}]})(e)}function Ct(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function wp(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 6 2 18 2 18 9"}},{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8"}}]})(e)}function qe(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"polyline",attr:{points:"1 20 1 14 7 14"}},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}}]})(e)}function Br(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(e)}function hs(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function kp(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(e)}function R0(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"path",attr:{d:"M16 10a4 4 0 0 1-8 0"}}]})(e)}function gi(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"}},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"}},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"}}]})(e)}function T0(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}}]})(e)}function ga(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(e)}function F0(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(e)}function $0(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"}}]})(e)}function Kt(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(e)}function _c(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"}},{tag:"polyline",attr:{points:"17 18 23 18 23 12"}}]})(e)}function Tl(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"}},{tag:"polyline",attr:{points:"17 6 23 6 23 12"}}]})(e)}function _p(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"}},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"}},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"}},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"}}]})(e)}function ss(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"17 8 12 3 7 8"}},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"}}]})(e)}function Bn(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(e)}function D0(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"}},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"}},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}]})(e)}function Sc(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"}}]})(e)}function Ke(e){return ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}function Sp(){const[e,s]=p.useState(!1),n=p.useRef(null),{theme:r,language:a,toggleTheme:l,changeLanguage:o}=wc();return p.useEffect(()=>{const d=m=>{n.current&&!n.current.contains(m.target)&&s(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),t.jsxs("div",{className:"relative",ref:n,children:[t.jsx("button",{onClick:()=>s(!e),className:"p-2 border-2 border-mm-cyan text-mm-cyan hover:bg-mm-cyan/10 transition-colors","data-testid":"settings-button",children:t.jsx(kp,{size:20,className:e?"animate-spin":""})}),e&&t.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-mm-dark border-2 border-mm-cyan shadow-neon-cyan z-50","data-testid":"settings-dropdown",children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-mm-text-secondary uppercase text-xs mb-3 font-mono",children:"THEME"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>{r!=="dark"&&l()},className:`p-4 border-2 transition-all ${r==="dark"?"border-mm-purple bg-mm-purple/10 text-mm-purple":"border-mm-border text-mm-text-secondary hover:border-mm-cyan"}`,"data-testid":"theme-dark",children:[t.jsx(O0,{className:"mx-auto mb-2",size:24}),t.jsx("p",{className:"font-mono text-sm",children:"Dark"})]}),t.jsxs("button",{onClick:()=>{r!=="light"&&l()},className:`p-4 border-2 transition-all ${r==="light"?"border-mm-purple bg-mm-purple/10 text-mm-purple":"border-mm-border text-mm-text-secondary hover:border-mm-cyan"}`,"data-testid":"theme-light",children:[t.jsx(F0,{className:"mx-auto mb-2",size:24}),t.jsx("p",{className:"font-mono text-sm",children:"Light"})]})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-mm-text-secondary uppercase text-xs mb-3 font-mono",children:"LANGUAGE"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>o("ru"),className:`p-4 border-2 transition-all ${a==="ru"?"border-mm-purple bg-mm-purple/10 text-mm-purple":"border-mm-border text-mm-text-secondary hover:border-mm-cyan"}`,"data-testid":"lang-ru",children:[t.jsx(fm,{className:"mx-auto mb-2",size:24}),t.jsx("p",{className:"font-mono text-sm",children:"RU"})]}),t.jsxs("button",{onClick:()=>o("en"),className:`p-4 border-2 transition-all ${a==="en"?"border-mm-purple bg-mm-purple/10 text-mm-purple":"border-mm-border text-mm-text-secondary hover:border-mm-cyan"}`,"data-testid":"lang-en",children:[t.jsx(fm,{className:"mx-auto mb-2",size:24}),t.jsx("p",{className:"font-mono text-sm",children:"EN"})]})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-mm-text-secondary uppercase text-xs mb-3 font-mono",children:"CURRENCY"}),t.jsxs("select",{className:"input-neon w-full",defaultValue:"RUB",children:[t.jsx("option",{value:"RUB",children:"RUB "}),t.jsx("option",{value:"USD",children:"USD $"}),t.jsx("option",{value:"EUR",children:"EUR "})]})]}),t.jsx("div",{className:"pt-4 border-t border-mm-border",children:t.jsx("p",{className:"comment text-xs text-center",children:"// Settings saved automatically"})})]})})]})}function Un(e){return ae({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"}}]})(e)}const Cp=()=>{const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!0),[l,o]=p.useState(!1),[d,m]=p.useState(""),[i,u]=p.useState({name:"",client_id:"",api_key:"",auto_sync_stock:!0,auto_update_prices:!1,auto_get_orders:!0}),[c,h]=p.useState(!1),[g,f]=p.useState(!1),v=[{id:"ozon",name:"Ozon",logo:"",description:"  Ozon    ,  FBS  ",helpText:"        : Admin, Product, Posting, Finance, Analytics, Warehouse, Orders",requiredPermissions:["Admin","Product","Posting","Finance","Analytics","Warehouse","Orders"],docsLink:"https://seller.ozon.ru/app/settings/api-keys?currentTab=sellerApi",fields:[{name:"name",label:" ",type:"text",placeholder:":   OZON"},{name:"client_id",label:"Client ID",type:"text",placeholder:" Client ID"},{name:"api_key",label:"API Key",type:"password",placeholder:" API ",helpText:"   "}]},{id:"wb",name:"Wildberries",logo:"",description:"  Wildberries    ,  FBS  ",fields:[{name:"name",label:" ",type:"text",placeholder:":   WB"},{name:"api_key",label:"API Token",type:"password",placeholder:" API "}]},{id:"yandex",name:"Yandex.Market",logo:"",description:"  .    ,  FBS  ",fields:[{name:"name",label:" ",type:"text",placeholder:":   "},{name:"client_id",label:"Campaign ID",type:"text",placeholder:" Campaign ID"},{name:"api_key",label:"OAuth Token",type:"password",placeholder:" OAuth "}]}];p.useEffect(()=>{w()},[]);const w=async()=>{try{const S=await e.get("/api/seller/api-keys");n(S.data)}catch(S){console.error("Error loading API keys:",S)}finally{a(!1)}},x=S=>{m(S),u({name:"",client_id:"",api_key:"",auto_sync_stock:!0,auto_update_prices:!1,auto_get_orders:!0}),o(!0)},y=async()=>{var S,E;h(!0);try{const N=await e.post("/api/seller/api-keys/test",{marketplace:d,client_id:i.client_id,api_key:i.api_key});N.data.success,alert(N.data.message)}catch(N){alert(" : "+(((E=(S=N.response)==null?void 0:S.data)==null?void 0:E.detail)||N.message))}finally{h(!1)}},j=async()=>{var S,E;if(!i.api_key||!i.api_key.trim()){alert("API  ");return}f(!0);try{await e.post("/api/seller/api-keys",{marketplace:d,name:i.name,client_id:i.client_id,api_key:i.api_key}),alert("   !"),o(!1),w()}catch(N){alert(": "+(((E=(S=N.response)==null?void 0:S.data)==null?void 0:E.detail)||N.message))}finally{f(!1)}},_=async(S,E)=>{var N,R;if(confirm(`  ${E.toUpperCase()}?`))try{await e.delete(`/api/seller/api-keys/${S}`),alert("  "),w()}catch(I){alert(": "+(((R=(N=I.response)==null?void 0:N.data)==null?void 0:R.detail)||I.message))}},P=async(S,E,N)=>{var R,I;try{await e.put(`/api/seller/api-keys/${S}`,{[E]:!N}),w()}catch(L){alert(" : "+(((I=(R=L.response)==null?void 0:R.data)==null?void 0:I.detail)||L.message))}},k=S=>{const E=v.find(N=>N.id===S);return E?E.logo:""},z=S=>{const E=v.find(N=>N.id===S);return E?E.name:S};if(r)return t.jsx("div",{className:"p-8",children:t.jsx("div",{className:"text-mm-cyan",children:"..."})});const b=v.find(S=>S.id===d);return t.jsxs("div",{className:"p-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-mm-cyan mb-2",children:""}),t.jsx("p",{className:"text-gray-400",children:"    "})]}),s.length>0&&t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(S=>t.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800 hover:border-mm-cyan transition",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-4xl",children:k(S.marketplace)}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white",children:S.name||z(S.marketplace)}),t.jsx("p",{className:"text-xs text-gray-500",children:z(S.marketplace)})]})]}),t.jsx("button",{onClick:()=>_(S.id,S.marketplace),className:"p-2 text-red-500 hover:bg-red-500/10 rounded transition",title:"",children:t.jsx(Kt,{})})]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Client ID:"}),t.jsx("span",{className:"text-gray-300",children:S.client_id||""})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"API Key:"}),t.jsx("span",{className:"text-gray-300",children:S.api_key_masked})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:":"}),t.jsx("span",{className:"text-gray-300",children:new Date(S.created_at).toLocaleDateString("ru-RU")})]})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 space-y-2",children:[t.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[t.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:" "}),t.jsx("input",{type:"checkbox",checked:S.auto_sync_stock!==!1,onChange:()=>P(S.id,"auto_sync_stock",S.auto_sync_stock!==!1),className:"w-4 h-4 rounded"})]}),t.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[t.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:" "}),t.jsx("input",{type:"checkbox",checked:S.auto_update_prices===!0,onChange:()=>P(S.id,"auto_update_prices",S.auto_update_prices===!0),className:"w-4 h-4 rounded"})]}),t.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[t.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:" "}),t.jsx("input",{type:"checkbox",checked:S.auto_get_orders!==!1,onChange:()=>P(S.id,"auto_get_orders",S.auto_get_orders!==!1),className:"w-4 h-4 rounded"})]})]})]},S.id))})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(S=>{const E=s.some(N=>N.marketplace===S.id);return t.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800 hover:border-mm-cyan transition",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("div",{className:"text-6xl mb-3",children:S.logo}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:S.name}),t.jsx("p",{className:"text-sm text-gray-400",children:S.description})]}),t.jsxs("button",{onClick:()=>x(S.id),className:"w-full px-4 py-3 bg-mm-purple hover:bg-purple-600 rounded-lg transition font-medium flex items-center justify-center space-x-2",children:[t.jsx(Ct,{}),t.jsx("span",{children:E?" ":""})]})]},S.id)})})]}),l&&b&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-gray-900 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b border-gray-800",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-3xl",children:b.logo}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-mm-cyan",children:b.name}),t.jsx("p",{className:"text-sm text-gray-400",children:b.description})]})]}),t.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-white transition",children:t.jsx(Ke,{size:24})})]})}),t.jsxs("div",{className:"p-6 space-y-4",children:[b.helpText&&t.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-600/30 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-yellow-200 mb-3 font-semibold",children:b.helpText}),b.requiredPermissions&&t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-xs text-yellow-300/80 mb-2",children:"  :"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:b.requiredPermissions.map(S=>t.jsxs("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-200 text-xs rounded border border-yellow-600/30",children:[" ",S]},S))})]}),b.docsLink&&t.jsx("a",{href:b.docsLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-xs text-cyan-400 hover:text-cyan-300 underline",children:"    Ozon Seller (  !)"})]}),b.fields.map(S=>t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:[S.label,S.name!=="name"&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"}),S.helpText&&t.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",S.helpText,")"]})]}),t.jsx("input",{type:S.type,value:i[S.name],onChange:E=>u({...i,[S.name]:E.target.value}),placeholder:S.placeholder,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan text-white"})]},S.name)),t.jsxs("div",{className:"pt-4 border-t border-gray-800",children:[t.jsx("p",{className:"text-sm font-medium mb-3 text-gray-300",children:" :"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:i.auto_sync_stock,onChange:S=>u({...i,auto_sync_stock:S.target.checked}),className:"w-5 h-5 rounded"}),t.jsx("span",{className:"text-sm text-gray-400",children:"  "})]}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:i.auto_update_prices,onChange:S=>u({...i,auto_update_prices:S.target.checked}),className:"w-5 h-5 rounded"}),t.jsx("span",{className:"text-sm text-gray-400",children:"  "})]}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:i.auto_get_orders,onChange:S=>u({...i,auto_get_orders:S.target.checked}),className:"w-5 h-5 rounded"}),t.jsx("span",{className:"text-sm text-gray-400",children:"  "})]})]})]})]}),t.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-end space-x-3",children:[t.jsx("button",{onClick:y,disabled:c||!i.api_key,className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:cursor-not-allowed rounded-lg transition font-medium",children:c?"...":" "}),t.jsx("button",{onClick:j,disabled:g||!i.api_key,className:"px-6 py-3 bg-mm-cyan hover:bg-cyan-400 text-black disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed rounded-lg transition font-bold",children:g?"...":""})]})]})})]})};function M0(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!0),[l,o]=p.useState({status:"",source:""});p.useEffect(()=>{d()},[l]);const d=async()=>{try{const u=new URLSearchParams;l.status&&u.append("status",l.status),l.source&&u.append("source",l.source);const c=await e.get(`/api/orders?${u.toString()}`);n(c.data)}catch(u){console.error("Failed to load orders:",u)}a(!1)},m=u=>{switch(u){case"new":return t.jsx(ps,{className:"inline text-mm-blue"});case"awaiting_shipment":return t.jsx(We,{className:"inline text-mm-yellow"});case"shipped":return t.jsx(_p,{className:"inline text-mm-cyan"});case"delivered":return t.jsx(il,{className:"inline text-mm-green"});case"cancelled":return t.jsx(Sc,{className:"inline text-mm-red"});default:return t.jsx(ps,{className:"inline"})}},i=u=>({minimalmod:"border-mm-purple text-mm-purple",ozon:"border-mm-blue text-mm-blue",wildberries:"border-mm-purple text-mm-purple",yandex_market:"border-mm-yellow text-mm-yellow"})[u]||"border-mm-cyan text-mm-cyan";return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl mb-2 text-mm-cyan uppercase",children:"Orders"}),t.jsx("p",{className:"comment",children:"// Manage all your orders"})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsxs("select",{value:l.status,onChange:u=>o({...l,status:u.target.value}),className:"input-neon",children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"new",children:"New"}),t.jsx("option",{value:"awaiting_shipment",children:"Awaiting Shipment"}),t.jsx("option",{value:"shipped",children:"Shipped"}),t.jsx("option",{value:"delivered",children:"Delivered"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]}),t.jsxs("select",{value:l.source,onChange:u=>o({...l,source:u.target.value}),className:"input-neon",children:[t.jsx("option",{value:"",children:"All Sources"}),t.jsx("option",{value:"minimalmod",children:"MinimalMod"}),t.jsx("option",{value:"ozon",children:"Ozon"}),t.jsx("option",{value:"wildberries",children:"Wildberries"}),t.jsx("option",{value:"yandex_market",children:"Yandex.Market"})]})]})]}),r?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):s.length===0?t.jsxs("div",{className:"card-neon text-center py-12",children:[t.jsx(We,{className:"mx-auto text-mm-text-tertiary mb-4",size:48}),t.jsx("p",{className:"text-mm-text-secondary mb-2",children:"No orders found"}),t.jsx("p",{className:"comment",children:"// Orders will appear here once created"})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Order #"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Date"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Customer"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Source"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Total"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Status"}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Actions"})]})}),t.jsx("tbody",{children:s.map(u=>{var c,h,g,f;return t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors",children:[t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-cyan",children:u.order_number}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-text-secondary",children:new Date((c=u.dates)==null?void 0:c.created_at).toLocaleDateString()}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:((h=u.customer)==null?void 0:h.name)||"N/A"}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:`px-2 py-1 text-xs font-mono border ${i(u.source)}`,children:u.source})}),t.jsxs("td",{className:"py-4 px-4 font-mono text-sm",children:["",((f=(g=u.totals)==null?void 0:g.total)==null?void 0:f.toLocaleString())||0]}),t.jsx("td",{className:"py-4 px-4",children:t.jsxs("span",{className:"flex items-center space-x-2",children:[m(u.status),t.jsx("span",{className:"text-sm font-mono uppercase",children:u.status})]})}),t.jsx("td",{className:"py-4 px-4 text-right",children:t.jsx("button",{onClick:()=>window.location.href=`/orders/${u.id}`,className:"px-3 py-1 border border-mm-cyan text-mm-cyan hover:bg-mm-cyan/10 transition-colors text-xs uppercase font-mono","data-testid":`view-order-${u.id}`,children:"View"})})]},u.id)})})]})})})]})}function Ep(){const{api:e}=de(),{language:s}=wc(),[n,r]=p.useState({revenue:0,costs:0,cogs:0,gross_profit:0,net_profit:0,margin:0,transactions_count:0}),[a,l]=p.useState(!0);p.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await e.get("/api/finance/dashboard");r(d.data)}catch(d){console.error("Failed to load finance dashboard:",d)}l(!1)};return a?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl mb-2 text-mm-cyan uppercase",children:"FINANCIAL DASHBOARD"}),t.jsx("p",{className:"comment",children:"// Your financial overview"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"card-neon",children:[t.jsx("p",{className:"comment mb-2",children:"// Revenue"}),t.jsxs("p",{className:"text-4xl font-bold text-mm-green flex items-center",children:[t.jsx(Tl,{className:"mr-2"}),"",n.revenue.toLocaleString()]})]}),t.jsxs("div",{className:"card-neon",children:[t.jsx("p",{className:"comment mb-2",children:"// Costs"}),t.jsxs("p",{className:"text-4xl font-bold text-mm-red flex items-center",children:[t.jsx(_c,{className:"mr-2"}),"",n.costs.toLocaleString()]})]}),t.jsxs("div",{className:"card-neon",children:[t.jsx("p",{className:"comment mb-2",children:"// Net Profit"}),t.jsxs("p",{className:`text-4xl font-bold flex items-center ${n.net_profit>=0?"text-mm-green":"text-mm-red"}`,children:[t.jsx(cn,{className:"mr-2"}),"",n.net_profit.toLocaleString()]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"card-neon",children:[t.jsx("p",{className:"comment mb-2",children:"// COGS (Cost of Goods)"}),t.jsxs("p",{className:"text-2xl font-bold text-mm-yellow",children:["",n.cogs.toLocaleString()]})]}),t.jsxs("div",{className:"card-neon",children:[t.jsx("p",{className:"comment mb-2",children:"// Gross Profit"}),t.jsxs("p",{className:"text-2xl font-bold text-mm-cyan",children:["",n.gross_profit.toLocaleString()]})]}),t.jsxs("div",{className:"card-neon",children:[t.jsx("p",{className:"comment mb-2",children:"// Margin"}),t.jsxs("p",{className:"text-2xl font-bold text-mm-purple",children:[n.margin,"%"]})]})]}),t.jsxs("div",{className:"card-neon",children:[t.jsx("h3",{className:"text-xl mb-4 text-mm-cyan uppercase",children:"PROFIT BREAKDOWN"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-mm-border",children:[t.jsx("span",{className:"font-mono text-mm-text-secondary",children:"Revenue"}),t.jsxs("span",{className:"font-mono text-mm-green",children:["+ ",n.revenue.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-mm-border",children:[t.jsx("span",{className:"font-mono text-mm-text-secondary",children:"COGS"}),t.jsxs("span",{className:"font-mono text-mm-red",children:["- ",n.cogs.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-mm-border font-bold",children:[t.jsx("span",{className:"font-mono",children:"Gross Profit"}),t.jsxs("span",{className:"font-mono text-mm-cyan",children:["",n.gross_profit.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-mm-border",children:[t.jsx("span",{className:"font-mono text-mm-text-secondary",children:"Operating Costs"}),t.jsxs("span",{className:"font-mono text-mm-red",children:["- ",n.costs.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 font-bold text-lg",children:[t.jsx("span",{className:"font-mono",children:"Net Profit"}),t.jsxs("span",{className:`font-mono ${n.net_profit>=0?"text-mm-green":"text-mm-red"}`,children:["",n.net_profit.toLocaleString()]})]})]})]}),t.jsx("div",{className:"card-neon",children:t.jsxs("p",{className:"comment",children:["// Transactions processed: ",n.transactions_count]})})]})}function Lp({isAdmin:e=!1}){const{api:s}=de(),[n,r]=p.useState([]),[a,l]=p.useState(!0),[o,d]=p.useState(!1),[m,i]=p.useState("");p.useEffect(()=>{u()},[]);const u=async()=>{try{const w=await s.get("/api/payouts");r(w.data)}catch(w){console.error("Failed to load payouts:",w)}l(!1)},c=async w=>{w.preventDefault();try{await s.post("/api/payouts/request",null,{params:{amount:parseFloat(m)}}),d(!1),i(""),u(),alert("Payout request submitted!")}catch{alert("Failed to request payout")}},h=async w=>{try{await s.put(`/api/admin/payouts/${w}/approve`),u()}catch(x){console.error("Failed to approve:",x)}},g=async w=>{try{await s.put(`/api/admin/payouts/${w}/paid`),u()}catch(x){console.error("Failed to mark paid:",x)}},f=async w=>{try{await s.put(`/api/admin/payouts/${w}/reject`),u()}catch(x){console.error("Failed to reject:",x)}},v=w=>{const x={pending:{class:"status-pending",icon:ps,text:"PENDING"},approved:{class:"status-new",icon:il,text:"APPROVED"},paid:{class:"status-active",icon:il,text:"PAID"},rejected:{class:"status-error",icon:Sc,text:"REJECTED"}};return x[w]||x.pending};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl mb-2 text-mm-cyan uppercase",children:e?"PAYOUT REQUESTS":"BALANCE & PAYOUTS"}),t.jsx("p",{className:"comment",children:e?"// Manage seller payout requests":"// Request withdrawals"})]}),!e&&t.jsx("button",{onClick:()=>d(!0),className:"btn-primary","data-testid":"request-payout-button",children:" REQUEST PAYOUT"})]}),a?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):n.length===0?t.jsxs("div",{className:"card-neon text-center py-12",children:[t.jsx(cn,{className:"mx-auto text-mm-text-tertiary mb-4",size:48}),t.jsx("p",{className:"text-mm-text-secondary mb-2",children:"No payout requests"}),t.jsxs("p",{className:"comment",children:["// ",e?"Requests will appear here":'Click "REQUEST PAYOUT" to withdraw funds']})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Date"}),e&&t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Seller"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Amount"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Status"}),e&&t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Actions"})]})}),t.jsx("tbody",{children:n.map(w=>{const x=v(w.status),y=x.icon;return t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors",children:[t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-text-secondary",children:new Date(w.created_at).toLocaleDateString()}),e&&t.jsxs("td",{className:"py-4 px-4 font-mono text-sm",children:[w.seller_id.substring(0,8),"..."]}),t.jsxs("td",{className:"py-4 px-4 font-mono text-lg text-mm-green",children:["",w.amount.toLocaleString()]}),t.jsx("td",{className:"py-4 px-4",children:t.jsxs("span",{className:x.class,children:[t.jsx(y,{className:"inline mr-1"}),x.text]})}),e&&t.jsxs("td",{className:"py-4 px-4 text-right space-x-2",children:[w.status==="pending"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>h(w.id),className:"px-3 py-1 border border-mm-green text-mm-green hover:bg-mm-green/10 text-xs uppercase font-mono",children:"APPROVE"}),t.jsx("button",{onClick:()=>f(w.id),className:"px-3 py-1 border border-mm-red text-mm-red hover:bg-mm-red/10 text-xs uppercase font-mono",children:"REJECT"})]}),w.status==="approved"&&t.jsx("button",{onClick:()=>g(w.id),className:"px-3 py-1 border border-mm-cyan text-mm-cyan hover:bg-mm-cyan/10 text-xs uppercase font-mono",children:"MARK AS PAID"})]})]},w.id)})})]})})}),o&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"card-neon max-w-md w-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl text-mm-cyan",children:"REQUEST PAYOUT"}),t.jsx("button",{onClick:()=>d(!1),className:"text-mm-text-secondary hover:text-mm-red transition-colors",children:""})]}),t.jsxs("form",{onSubmit:c,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"Amount"}),t.jsx("input",{type:"number",step:"0.01",value:m,onChange:w=>i(w.target.value),className:"input-neon w-full",placeholder:"10000.00",required:!0}),t.jsx("p",{className:"comment text-xs mt-1",children:"// Enter amount in RUB"})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"REQUEST"}),t.jsx("button",{type:"button",onClick:()=>d(!1),className:"btn-secondary flex-1",children:"CANCEL"})]})]})]})})]})}function Pp(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!0),[l,o]=p.useState(!1),[d,m]=p.useState(null);p.useEffect(()=>{i()},[]);const i=async()=>{a(!0);try{const c=await e.get("/api/warehouses");n(c.data)}catch(c){V.error("  "),console.error(c)}a(!1)},u=async c=>{var h,g;if(confirm(`  "${c.name}"?`))try{await e.delete(`/api/warehouses/${c.id}`),V.success(" "),i()}catch(f){V.error(((g=(h=f.response)==null?void 0:h.data)==null?void 0:g.detail)||" ")}};return t.jsx("div",{className:"min-h-screen bg-mm-black text-mm-text p-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-mm-cyan uppercase mb-2","data-testid":"warehouses-title",children:""}),t.jsx("p",{className:"text-mm-text-secondary text-sm",children:"//    "})]}),t.jsxs("button",{onClick:()=>{m(null),o(!0)},className:"btn-primary flex items-center space-x-2","data-testid":"create-warehouse-btn",children:[t.jsx(Ct,{}),t.jsx("span",{children:" "})]})]}),r?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):s.length===0?t.jsxs("div",{className:"card-neon text-center py-16","data-testid":"empty-state",children:[t.jsx(Un,{className:"mx-auto text-mm-text-tertiary mb-6",size:64}),t.jsx("p",{className:"text-mm-text-secondary text-lg mb-2",children:" "}),t.jsx("p",{className:"text-sm text-mm-text-tertiary mb-6",children:"//      "}),t.jsxs("button",{onClick:()=>o(!0),className:"btn-primary",children:[t.jsx(Ct,{className:"inline mr-2"})," "]})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""})]})}),t.jsx("tbody",{children:s.map(c=>t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors","data-testid":`warehouse-row-${c.id}`,children:[t.jsx("td",{className:"py-4 px-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Un,{className:"text-mm-cyan",size:20}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold",children:c.name}),c.address&&t.jsx("div",{className:"text-xs text-mm-text-tertiary",children:c.address})]})]})}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:`px-3 py-1 text-xs font-mono uppercase rounded ${c.type==="main"?"bg-mm-cyan/20 text-mm-cyan border border-mm-cyan":c.type==="marketplace"?"bg-mm-purple/20 text-mm-purple border border-mm-purple":"bg-mm-yellow/20 text-mm-yellow border border-mm-yellow"}`,children:c.type})}),t.jsx("td",{className:"py-4 px-4 text-center",children:t.jsx("span",{className:"text-mm-cyan font-mono font-bold",children:c.priority||1})}),t.jsx("td",{className:"py-4 px-4 text-center",children:c.transfer_stock?t.jsx(lt,{className:"inline text-mm-green",size:20}):t.jsx(Ke,{className:"inline text-mm-red",size:20})}),t.jsx("td",{className:"py-4 px-4 text-center",children:c.use_for_orders?t.jsx(lt,{className:"inline text-mm-green",size:20}):t.jsx(Ke,{className:"inline text-mm-red",size:20})}),t.jsxs("td",{className:"py-4 px-4 text-right space-x-2",children:[t.jsx("button",{onClick:()=>{m(c),o(!0)},className:"px-3 py-2 border border-mm-cyan text-mm-cyan hover:bg-mm-cyan/10 transition-colors","data-testid":`edit-warehouse-${c.id}`,children:t.jsx(Is,{size:16})}),c.type!=="main"&&t.jsx("button",{onClick:()=>u(c),className:"px-3 py-2 border border-mm-red text-mm-red hover:bg-mm-red/10 transition-colors","data-testid":`delete-warehouse-${c.id}`,children:t.jsx(Kt,{size:16})})]})]},c.id))})]})}),l&&t.jsx(A0,{warehouse:d,onClose:()=>{o(!1),m(null)},onSuccess:()=>{o(!1),m(null),i()}})]})})}function A0({warehouse:e,onClose:s,onSuccess:n}){const{api:r}=de(),[a,l]=p.useState({name:"",type:"main",address:"",comment:"",transfer_stock:!0,load_orders:!0,use_for_orders:!0,priority:1,fbo_accounting:!1,return_on_cancel:!0}),[o,d]=p.useState([]),[m,i]=p.useState([]),[u,c]=p.useState(""),[h,g]=p.useState([]),[f,v]=p.useState(!1);p.useEffect(()=>{e&&(l({name:e.name||"",type:e.type||"main",address:e.address||"",comment:e.comment||"",transfer_stock:e.transfer_stock!==!1,load_orders:e.load_orders!==!1,use_for_orders:e.use_for_orders!==!1,priority:e.priority||1,fbo_accounting:e.fbo_accounting||!1,return_on_cancel:e.return_on_cancel!==void 0?e.return_on_cancel:!0}),w(),x())},[e]);const w=async()=>{if(e)try{const k=await r.get(`/api/warehouse-links/${e.id}/links`);d(k.data)}catch(k){console.error("Failed to load links:",k)}},x=async()=>{try{const k=await r.get("/api/seller/api-keys");i(k.data)}catch(k){console.error("Failed to load integrations:",k)}},y=async()=>{var k,z,b;if(!u){V.error(" ");return}v(!0);try{const S=await r.get(`/api/marketplace/${u}/warehouses`);g(S.data.warehouses||[]),((k=S.data.warehouses)==null?void 0:k.length)===0?V.error("  FBS   "):V.success(` ${S.data.warehouses.length} `)}catch(S){V.error(((b=(z=S.response)==null?void 0:z.data)==null?void 0:b.detail)||"  "),g([])}v(!1)},j=async k=>{var z,b;if(e)try{const S=m.find(E=>E.marketplace===u);await r.post(`/api/warehouse-links/${e.id}/links`,{integration_id:S.id,marketplace_name:u,marketplace_warehouse_id:k.id,marketplace_warehouse_name:k.name}),V.success(" "),w(),g([]),c("")}catch(S){V.error(((b=(z=S.response)==null?void 0:z.data)==null?void 0:b.detail)||"  ")}},_=async k=>{if(confirm(" ?"))try{await r.delete(`/api/warehouse-links/${e.id}/links/${k}`),V.success(" "),w()}catch{V.error("  ")}},P=async k=>{var z,b;k.preventDefault();try{e?(await r.put(`/api/warehouses/${e.id}`,a),V.success(" ")):(await r.post("/api/warehouses",a),V.success(" ")),n()}catch(S){V.error(((b=(z=S.response)==null?void 0:z.data)==null?void 0:b.detail)||" ")}};return t.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50","data-testid":"warehouse-modal",children:t.jsxs("div",{className:"card-neon max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl text-mm-cyan uppercase",children:e?" ":" "}),t.jsx("button",{onClick:s,className:"text-mm-text-secondary hover:text-mm-red transition-colors",children:t.jsx(Ke,{size:24})})]}),t.jsxs("form",{onSubmit:P,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  *"}),t.jsx("input",{type:"text",value:a.name,onChange:k=>l({...a,name:k.target.value}),className:"input-neon w-full",placeholder:"  ",required:!0,"data-testid":"warehouse-name-input"})]}),!e&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  *"}),t.jsxs("select",{value:a.type,onChange:k=>l({...a,type:k.target.value}),className:"input-neon w-full","data-testid":"warehouse-type-select",children:[t.jsx("option",{value:"main",children:""}),t.jsx("option",{value:"marketplace",children:""}),t.jsx("option",{value:"transit",children:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:""}),t.jsx("input",{type:"text",value:a.address,onChange:k=>l({...a,address:k.target.value}),className:"input-neon w-full",placeholder:". , . , 10","data-testid":"warehouse-address-input"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:""}),t.jsx("textarea",{value:a.comment,onChange:k=>l({...a,comment:k.target.value}),className:"input-neon w-full",rows:"3",placeholder:" ","data-testid":"warehouse-comment-input"})]}),t.jsxs("div",{className:"border-t border-mm-border pt-6",children:[t.jsx("h4",{className:"text-mm-cyan uppercase text-sm mb-4",children:"//  "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("label",{className:"flex items-center justify-between p-3 border border-mm-border hover:border-mm-cyan transition-colors cursor-pointer",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-mm-text",children:"   "}),t.jsx("div",{className:"text-xs text-mm-text-tertiary",children:"  "})]}),t.jsx("input",{type:"checkbox",checked:a.transfer_stock,onChange:k=>l({...a,transfer_stock:k.target.checked}),className:"toggle-switch","data-testid":"transfer-stock-toggle"})]}),t.jsxs("label",{className:"flex items-center justify-between p-3 border border-mm-border hover:border-mm-cyan transition-colors cursor-pointer",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-mm-text",children:" "}),t.jsx("div",{className:"text-xs text-mm-text-tertiary",children:"   "})]}),t.jsx("input",{type:"checkbox",checked:a.load_orders,onChange:k=>l({...a,load_orders:k.target.checked}),className:"toggle-switch","data-testid":"load-orders-toggle"})]}),t.jsxs("label",{className:"flex items-center justify-between p-3 border border-mm-border hover:border-mm-cyan transition-colors cursor-pointer",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-mm-text",children:"  "}),t.jsx("div",{className:"text-xs text-mm-text-tertiary",children:"   "})]}),t.jsx("input",{type:"checkbox",checked:a.use_for_orders,onChange:k=>l({...a,use_for_orders:k.target.checked}),className:"toggle-switch","data-testid":"use-for-orders-toggle"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:" "}),t.jsx("input",{type:"number",min:"1",max:"10",value:a.priority,onChange:k=>l({...a,priority:parseInt(k.target.value)||1}),className:"input-neon w-32","data-testid":"priority-input"}),t.jsx("p",{className:"text-xs text-mm-text-tertiary mt-1",children:"//  =   (1, 2, 3...)"})]}),t.jsxs("label",{className:"flex items-center justify-between p-3 border border-mm-border hover:border-mm-cyan transition-colors cursor-pointer",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-mm-text",children:" FBO"}),t.jsx("div",{className:"text-xs text-mm-text-tertiary",children:"   FBO (FIFO)"})]}),t.jsx("input",{type:"checkbox",checked:a.fbo_accounting,onChange:k=>l({...a,fbo_accounting:k.target.checked}),className:"toggle-switch","data-testid":"fbo-accounting-toggle"})]}),t.jsxs("label",{className:"flex items-center justify-between p-3 border border-mm-border hover:border-mm-cyan transition-colors cursor-pointer",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-mm-text",children:"  "}),t.jsx("div",{className:"text-xs text-mm-text-tertiary",children:"      "})]}),t.jsx("input",{type:"checkbox",checked:a.return_on_cancel!==void 0?a.return_on_cancel:!0,onChange:k=>l({...a,return_on_cancel:k.target.checked}),className:"toggle-switch","data-testid":"return-on-cancel-toggle"})]})]})]}),e&&t.jsxs("div",{className:"border-t border-mm-border pt-6",children:[t.jsx("h4",{className:"text-mm-cyan uppercase text-sm mb-4",children:"//    "}),t.jsx("p",{className:"text-xs text-mm-text-tertiary mb-4",children:"  FBS  ,    "}),o.length>0&&t.jsx("div",{className:"mb-4 space-y-2",children:o.map(k=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-mm-darker border border-mm-border",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-semibold text-sm",children:[t.jsx("span",{className:"text-mm-purple uppercase",children:k.marketplace_name}),"  ",k.marketplace_warehouse_name]}),t.jsxs("div",{className:"text-xs text-mm-text-tertiary font-mono",children:["ID: ",k.marketplace_warehouse_id]})]}),t.jsx("button",{type:"button",onClick:()=>_(k.id),className:"px-3 py-1 border border-mm-red text-mm-red hover:bg-mm-red/10 text-xs",children:""})]},k.id))}),t.jsxs("div",{className:"space-y-3 p-4 bg-mm-darker border border-mm-border",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs mb-1 text-mm-text-tertiary uppercase",children:" 1: "}),t.jsxs("select",{value:u,onChange:k=>{c(k.target.value),g([])},className:"input-neon w-full text-sm","data-testid":"marketplace-select",children:[t.jsx("option",{value:"",children:"..."}),m.map(k=>t.jsx("option",{value:k.marketplace,children:k.name||k.marketplace.toUpperCase()},k.id))]})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{type:"button",onClick:y,disabled:!u||f,className:"btn-secondary w-full text-xs disabled:opacity-50","data-testid":"load-mp-warehouses-btn",children:f?"...":" 2:  "})})]}),h.length>0&&t.jsx("div",{className:"mt-3 max-h-48 overflow-y-auto border border-mm-border",children:h.map(k=>t.jsxs("button",{type:"button",onClick:()=>j(k),className:"w-full text-left px-3 py-2 hover:bg-mm-gray transition-colors border-b border-mm-border last:border-b-0","data-testid":`add-link-${k.id}`,children:[t.jsx("div",{className:"text-sm font-semibold",children:k.name}),t.jsxs("div",{className:"text-xs text-mm-text-tertiary",children:[": ",k.type," | ID: ",k.id]})]},k.id))})]})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{type:"button",onClick:s,className:"btn-secondary flex-1","data-testid":"cancel-btn",children:""}),t.jsx("button",{type:"submit",className:"btn-primary flex-1","data-testid":"submit-btn",children:e?"":""})]})]})]})})}function I0(){const{api:e}=de(),[s,n]=p.useState("fbs"),[r,a]=p.useState([]),[l,o]=p.useState([]),[d,m]=p.useState([]),[i,u]=p.useState(!0),[c,h]=p.useState(!1),[g,f]=p.useState(!1),[v,w]=p.useState({product_id:"",quantity_change:"",reason:""}),[x,y]=p.useState({marketplace:"ozon",warehouse:"",products:[]}),[j,_]=p.useState([]);p.useEffect(()=>{k(),P()},[s]);const P=async()=>{try{const b=await e.get("/api/products");_(b.data)}catch(b){console.error("Failed to load products:",b)}},k=async()=>{u(!0);try{if(s==="fbs"){const b=await e.get("/api/inventory");a(b.data)}else if(s==="fbo"){const b=await e.get("/api/inventory/fbo");o(b.data)}else if(s==="history"){const b=await e.get("/api/inventory/history");m(b.data)}}catch(b){console.error("Failed to load data:",b)}u(!1)},z=async b=>{var S,E;b.preventDefault();try{await e.post(`/api/inventory/${v.product_id}/adjust`,{quantity_change:parseInt(v.quantity_change),reason:v.reason}),h(!1),w({product_id:"",quantity_change:"",reason:""}),k(),alert("Inventory adjusted successfully!")}catch(N){console.error("Failed to adjust inventory:",N),alert("Failed to adjust: "+(((E=(S=N.response)==null?void 0:S.data)==null?void 0:E.detail)||N.message))}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl mb-2 text-mm-cyan uppercase",children:"Inventory & Stock"}),t.jsx("p",{className:"comment",children:"// Manage warehouse and stock levels"})]}),s==="fbs"&&t.jsx("button",{onClick:()=>f(!0),className:"btn-primary","data-testid":"create-fbo-shipment-button",children:"+ CREATE FBO SHIPMENT"})]}),t.jsxs("div",{className:"flex space-x-4 border-b border-mm-border",children:[t.jsx("button",{onClick:()=>n("fbs"),className:`px-4 py-3 font-mono uppercase text-sm transition-colors ${s==="fbs"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,children:"FBS (Own Warehouse)"}),t.jsx("button",{onClick:()=>n("fbo"),className:`px-4 py-3 font-mono uppercase text-sm transition-colors ${s==="fbo"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,children:"FBO (Marketplace Warehouses)"}),t.jsx("button",{onClick:()=>n("history"),className:`px-4 py-3 font-mono uppercase text-sm transition-colors ${s==="history"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,children:"Movement History"})]}),s==="fbs"&&t.jsx("div",{children:i?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):r.length===0?t.jsxs("div",{className:"card-neon text-center py-12",children:[t.jsx(We,{className:"mx-auto text-mm-text-tertiary mb-4",size:48}),t.jsx("p",{className:"text-mm-text-secondary mb-2",children:"No inventory records"}),t.jsx("p",{className:"comment",children:"// Add products first, then manage stock"})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"SKU"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Product"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Total"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Reserved"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Available"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Alert"}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Actions"})]})}),t.jsx("tbody",{children:r.map(b=>t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors",children:[t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-cyan",children:b.sku}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:b.product_name||"N/A"}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:b.quantity}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-yellow",children:b.reserved}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:t.jsx("span",{className:b.available<=(b.alert_threshold||0)?"text-mm-red":"text-mm-green",children:b.available})}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-text-secondary",children:b.alert_threshold||10}),t.jsx("td",{className:"py-4 px-4 text-right",children:t.jsx("button",{onClick:()=>{w({...v,product_id:b.product_id}),h(!0)},className:"px-3 py-1 border border-mm-cyan text-mm-cyan hover:bg-mm-cyan/10 transition-colors text-xs uppercase font-mono",children:"Adjust"})})]},b.id))})]})})})}),s==="fbo"&&t.jsx("div",{children:i?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):l.length===0?t.jsxs("div",{className:"card-neon text-center py-12",children:[t.jsx(We,{className:"mx-auto text-mm-text-tertiary mb-4",size:48}),t.jsx("p",{className:"text-mm-text-secondary mb-2",children:"No FBO inventory"}),t.jsx("p",{className:"comment",children:"// FBO stock will appear here"})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"SKU"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Product"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Marketplace"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Warehouse"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Quantity"})]})}),t.jsx("tbody",{children:l.map(b=>t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors",children:[t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-cyan",children:b.sku}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:b.product_name||"N/A"}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:"px-2 py-1 text-xs font-mono border border-mm-purple text-mm-purple",children:b.marketplace})}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-text-secondary",children:b.warehouse_name}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-green",children:b.quantity})]},b.id))})]})})})}),s==="history"&&t.jsx("div",{children:i?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):d.length===0?t.jsxs("div",{className:"card-neon text-center py-12",children:[t.jsx("p",{className:"text-mm-text-secondary mb-2",children:"No movement history"}),t.jsx("p",{className:"comment",children:"// All stock movements will be logged here"})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Date"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"SKU"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Product"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Operation"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Change"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"Reason"})]})}),t.jsx("tbody",{children:d.map(b=>t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors",children:[t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-text-secondary",children:new Date(b.created_at).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-cyan",children:b.sku}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:b.product_name||"N/A"}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:"px-2 py-1 text-xs font-mono border border-mm-cyan text-mm-cyan",children:b.operation_type})}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:t.jsxs("span",{className:`flex items-center space-x-1 ${b.quantity_change>0?"text-mm-green":"text-mm-red"}`,children:[b.quantity_change>0?t.jsx(Tl,{}):t.jsx(_c,{}),t.jsxs("span",{children:[b.quantity_change>0?"+":"",b.quantity_change]})]})}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-text-secondary",children:b.reason})]},b.id))})]})})})}),c&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"card-neon max-w-md w-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl text-mm-cyan",children:"ADJUST INVENTORY"}),t.jsx("button",{onClick:()=>h(!1),className:"text-mm-text-secondary hover:text-mm-red transition-colors",children:""})]}),t.jsxs("form",{onSubmit:z,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"Quantity Change"}),t.jsx("input",{type:"number",value:v.quantity_change,onChange:b=>w({...v,quantity_change:b.target.value}),className:"input-neon w-full",placeholder:"+100 or -50",required:!0}),t.jsx("p",{className:"comment text-xs mt-1",children:"// Use + for adding, - for removing"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"Reason"}),t.jsx("textarea",{value:v.reason,onChange:b=>w({...v,reason:b.target.value}),className:"input-neon w-full",rows:"3",placeholder:"Reason for adjustment...",required:!0})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"ADJUST STOCK"}),t.jsx("button",{type:"button",onClick:()=>h(!1),className:"btn-secondary flex-1",children:"CANCEL"})]})]})]})}),g&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"card-neon max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl text-mm-cyan",children:"CREATE FBO SHIPMENT"}),t.jsx("button",{onClick:()=>f(!1),className:"text-mm-text-secondary hover:text-mm-red",children:""})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-neon bg-mm-darker",children:[t.jsx("p",{className:"comment mb-3",children:"// Step 1: Select Warehouse"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"Marketplace"}),t.jsxs("select",{value:x.marketplace,onChange:b=>y({...x,marketplace:b.target.value}),className:"input-neon w-full",children:[t.jsx("option",{value:"ozon",children:"Ozon"}),t.jsx("option",{value:"wb",children:"Wildberries"}),t.jsx("option",{value:"yandex",children:"Yandex.Market"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"Warehouse"}),t.jsxs("select",{value:x.warehouse,onChange:b=>y({...x,warehouse:b.target.value}),className:"input-neon w-full",children:[t.jsx("option",{value:"",children:"Select warehouse"}),t.jsx("option",{value:"moscow",children:"Moscow - Khoruzhino"}),t.jsx("option",{value:"spb",children:"Saint Petersburg"}),t.jsx("option",{value:"kazan",children:"Kazan"}),t.jsx("option",{value:"ekb",children:"Ekaterinburg"})]})]})]})]}),t.jsxs("div",{className:"card-neon bg-mm-darker",children:[t.jsx("p",{className:"comment mb-3",children:"// Step 2: Add Products to Shipment"}),t.jsx("div",{className:"space-y-2 mb-4",children:x.products.map((b,S)=>t.jsxs("div",{className:"flex items-center space-x-2 bg-mm-black p-2 border border-mm-border",children:[t.jsx("span",{className:"flex-1 font-mono text-sm",children:b.name}),t.jsx("span",{className:"text-mm-text-secondary",children:"Qty:"}),t.jsx("input",{type:"number",value:b.quantity,onChange:E=>{const N=[...x.products];N[S].quantity=parseInt(E.target.value)||0,y({...x,products:N})},className:"input-neon w-20",min:"1"}),t.jsx("button",{onClick:()=>{y({...x,products:x.products.filter((E,N)=>N!==S)})},className:"text-mm-red",children:""})]},S))}),t.jsxs("select",{onChange:b=>{const S=j.find(E=>E.id===b.target.value);S&&!x.products.find(E=>E.id===S.id)&&y({...x,products:[...x.products,{id:S.id,name:S.minimalmod.name,sku:S.sku,quantity:1}]}),b.target.value=""},className:"input-neon w-full",children:[t.jsx("option",{value:"",children:"+ Add product to shipment"}),j.map(b=>t.jsxs("option",{value:b.id,children:[b.sku," - ",b.minimalmod.name]},b.id))]})]}),x.products.length>0&&t.jsxs("div",{className:"card-neon bg-mm-darker",children:[t.jsx("p",{className:"comment mb-3",children:"// Step 3: Confirm Shipment"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-secondary",children:"Total Items:"}),t.jsx("span",{className:"font-bold",children:x.products.reduce((b,S)=>b+S.quantity,0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-secondary",children:"Products:"}),t.jsx("span",{className:"font-bold",children:x.products.length})]})]})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{onClick:async()=>{var b,S;if(!x.warehouse){alert("Please select warehouse");return}if(x.products.length===0){alert("Please add products");return}try{const E=await e.post("/api/inventory/fbo-shipment",x);alert(E.data.message),f(!1),y({marketplace:"ozon",warehouse:"",products:[]}),k()}catch(E){alert("Failed to create shipment: "+(((S=(b=E.response)==null?void 0:b.data)==null?void 0:S.detail)||E.message))}},className:"btn-primary flex-1",disabled:!x.warehouse||x.products.length===0,children:"CREATE SHIPMENT"}),t.jsx("button",{onClick:()=>{f(!1),y({marketplace:"ozon",warehouse:"",products:[]})},className:"btn-secondary flex-1",children:"CANCEL"})]})]})]})})]})}function zp(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState([]),[l,o]=p.useState(null),[d,m]=p.useState(!0),[i,u]=p.useState(!1),[c,h]=p.useState(null),[g,f]=p.useState(""),[v,w]=p.useState(""),[x,y]=p.useState("all"),[j,_]=p.useState({field:"sku",direction:"asc"}),[P,k]=p.useState(!1),[z,b]=p.useState(!1),[S,E]=p.useState(!1),[N,R]=p.useState([]),[I,L]=p.useState(null),[T,A]=p.useState([]),[H,D]=p.useState(null),[B,$]=p.useState(!1),Q=p.useMemo(()=>{let U=[...s];if(v.trim()){const X=v.toLowerCase();U=U.filter(ne=>ne.sku.toLowerCase().includes(X)||ne.product_name&&ne.product_name.toLowerCase().includes(X))}return x==="in_stock"?U=U.filter(X=>X.quantity>0):x==="out_of_stock"&&(U=U.filter(X=>X.quantity===0)),P&&(U=U.filter(X=>X.quantity<X.alert_threshold)),z&&(U=U.filter(X=>X.reserved>0)),U.sort((X,ne)=>{let ue,F;return j.field==="name"?(ue=X.product_name||"",F=ne.product_name||""):j.field==="sku"?(ue=X.sku||"",F=ne.sku||""):j.field==="quantity"&&(ue=X.quantity||0,F=ne.quantity||0),j.direction==="asc"?ue>F?1:-1:ue<F?1:-1}),U},[s,v,x,j,P,z]),C=()=>{w(""),y("all"),_({field:"sku",direction:"asc"}),k(!1),b(!1)},q=U=>{_(X=>({field:U,direction:X.field===U&&X.direction==="asc"?"desc":"asc"}))};p.useEffect(()=>{(async()=>{await J(),await W(),l&&await O()})()},[]),p.useEffect(()=>{l&&O()},[l]);const J=async()=>{try{const X=(await e.get("/api/warehouses")).data;a(X);const ne=localStorage.getItem("selectedWarehouseId");if(ne){const ue=X.find(F=>F.id===ne);ue?o(ue):X.length>0&&o(X[0])}else X.length>0&&o(X[0])}catch(U){V.error("  "),console.error(U)}},O=async()=>{m(!0);try{const U=await e.get("/api/inventory/fbs");n(U.data)}catch(U){V.error("  "),console.error(U)}m(!1)},W=async()=>{try{const U=await e.post("/api/inventory/sync-catalog");return console.log("Inventory synced:",U.data),U.data}catch(U){return console.error("Failed to sync inventory:",U),null}},se=U=>{const X=r.find(ne=>ne.id===U);X&&(o(X),localStorage.setItem("selectedWarehouseId",U))},Z=U=>{h(U.id),f(U.quantity.toString())},oe=()=>{h(null),f("")},Re=async U=>{var ue,F,G,te;const X=parseInt(g,10);if(console.log("[SAVE STOCK]  :",{stock_id:U.id,product_id:U.product_id,sku:U.sku,editValue:g,parsedQuantity:X,selectedWarehouse:l}),isNaN(X)||X<0){console.error("[SAVE STOCK]   :",X),V.error(" ");return}if(!l){console.error("[SAVE STOCK]    "),V.error(" ");return}const ne={product_id:U.product_id,article:U.sku,new_quantity:X,warehouse_id:l.id};console.log("[SAVE STOCK]     /api/inventory/update-stock:",ne);try{const le=await e.put("/api/inventory/update-stock",ne);console.log("[SAVE STOCK]     :",le.data),V.success(le.data.message||" "),n(s.map(re=>re.id===U.id?{...re,quantity:X,available:X-re.reserved}:re)),oe()}catch(le){console.error("[SAVE STOCK]   :",{message:le.message,response:(ue=le.response)==null?void 0:ue.data,status:(F=le.response)==null?void 0:F.status}),V.error(((te=(G=le.response)==null?void 0:G.data)==null?void 0:te.detail)||"  "),console.error(le)}},Te=async()=>{m(!0);try{const U=await W();U&&U.created>0?V.success(` ${U.created}    `):V.success(" "),await O()}catch(U){V.error("  "),console.error(U)}m(!1)},Ae=async()=>{var U,X;if(!l){V.error("   ");return}if(confirm(`     "${l.name}"?`)){u(!0);try{const ne=await e.post("/api/inventory/sync-all-stocks",{warehouse_id:l.id});V.success(ne.data.message||" ")}catch(ne){V.error(((X=(U=ne.response)==null?void 0:U.data)==null?void 0:X.detail)||" "),console.error(ne)}u(!1)}},Ie=async()=>{try{const U=await e.get("/api/seller/api-keys");R(U.data),E(!0)}catch(U){V.error("  "),console.error(U)}},et=async U=>{if(L(U),D(null),A([]),!!U)try{const X=await e.get(`/api/inventory/marketplace-warehouses/${U}`);A(X.data.warehouses||[])}catch(X){V.error("   "),console.error(X)}},it=async()=>{var U,X;if(!I||!H){V.error("   ");return}$(!0);try{const ne=await e.post("/api/inventory/import-stocks-from-marketplace",{integration_id:I,marketplace_warehouse_id:H});V.success(ne.data.message||" "),E(!1),await O()}catch(ne){V.error(((X=(U=ne.response)==null?void 0:U.data)==null?void 0:X.detail)||"  "),console.error(ne)}$(!1)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl text-mm-cyan uppercase mb-2","data-testid":"stocks-title",children:"  "}),t.jsx("p",{className:"text-mm-text-secondary text-sm",children:"      "})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("button",{onClick:Ie,className:"btn-secondary flex items-center space-x-2 text-sm","data-testid":"import-stocks-btn",children:[t.jsx(mt,{}),t.jsx("span",{children:"  "})]}),t.jsxs("button",{onClick:Te,disabled:d,className:"btn-secondary flex items-center space-x-2 disabled:opacity-50","data-testid":"sync-catalog-btn",children:[t.jsx(qe,{className:d?"animate-spin":""}),t.jsx("span",{children:" "})]}),t.jsxs("button",{onClick:Ae,disabled:!l||i,className:"btn-primary flex items-center space-x-2 disabled:opacity-50","data-testid":"sync-all-btn",children:[t.jsx(ss,{}),t.jsx("span",{children:i?"...":"   "})]}),t.jsxs("button",{onClick:O,disabled:d,className:"btn-secondary flex items-center space-x-2","data-testid":"refresh-btn",children:[t.jsx(qe,{className:d?"animate-spin":""}),t.jsx("span",{children:""})]})]})]}),t.jsxs("div",{className:"card-neon p-4",children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  "}),t.jsxs("select",{value:(l==null?void 0:l.id)||"",onChange:U=>se(U.target.value),className:"input-neon w-full max-w-md","data-testid":"warehouse-select",children:[t.jsx("option",{value:"",children:" ..."}),r.map(U=>t.jsxs("option",{value:U.id,children:[U.name," ",U.sends_stock?"( )":""]},U.id))]}),t.jsx("p",{className:"text-xs text-mm-text-tertiary mt-2",children:l?` : ${l.name}.      .`:"     "})]}),l&&s.length>0&&t.jsxs("div",{className:"card-neon p-4 space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[t.jsxs("div",{className:"flex-1 min-w-[250px]",children:[t.jsx("label",{className:"block text-xs text-mm-text-secondary uppercase mb-2",children:""}),t.jsxs("div",{className:"relative",children:[t.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-mm-text-tertiary"}),t.jsx("input",{type:"text",placeholder:"    ...",value:v,onChange:U=>w(U.target.value),className:"input-neon w-full pl-10","data-testid":"search-input"})]})]}),t.jsxs("div",{className:"min-w-[200px]",children:[t.jsx("label",{className:"block text-xs text-mm-text-secondary uppercase mb-2",children:""}),t.jsxs("select",{value:x,onChange:U=>y(U.target.value),className:"input-neon w-full","data-testid":"availability-filter",children:[t.jsx("option",{value:"all",children:" "}),t.jsx("option",{value:"in_stock",children:" "}),t.jsx("option",{value:"out_of_stock",children:"  "})]})]}),t.jsxs("div",{className:"min-w-[200px]",children:[t.jsx("label",{className:"block text-xs text-mm-text-secondary uppercase mb-2",children:""}),t.jsxs("select",{value:j.field,onChange:U=>q(U.target.value),className:"input-neon w-full","data-testid":"sort-select",children:[t.jsx("option",{value:"sku",children:" "}),t.jsx("option",{value:"name",children:" "}),t.jsx("option",{value:"quantity",children:" "})]})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer","data-testid":"critical-filter",children:[t.jsx("input",{type:"checkbox",checked:P,onChange:U=>k(U.target.checked),className:"w-4 h-4 bg-mm-dark border-mm-border rounded text-mm-cyan focus:ring-mm-cyan focus:ring-offset-0"}),t.jsx("span",{className:"text-sm text-mm-text-secondary",children:" "})]}),t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer","data-testid":"reserved-filter",children:[t.jsx("input",{type:"checkbox",checked:z,onChange:U=>b(U.target.checked),className:"w-4 h-4 bg-mm-dark border-mm-border rounded text-mm-cyan focus:ring-mm-cyan focus:ring-offset-0"}),t.jsx("span",{className:"text-sm text-mm-text-secondary",children:" "})]}),(v||x!=="all"||P||z||j.field!=="sku")&&t.jsxs("button",{onClick:C,className:"text-sm text-mm-cyan hover:text-mm-green transition-colors flex items-center space-x-1","data-testid":"reset-filters-btn",children:[t.jsx(Ke,{size:16}),t.jsx("span",{children:" "})]}),t.jsxs("div",{className:"ml-auto text-sm text-mm-text-tertiary",children:[": ",t.jsx("span",{className:"text-mm-cyan font-mono",children:Q.length}),"  ",s.length]})]})]}),l?d?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):s.length===0?t.jsxs("div",{className:"card-neon text-center py-16",children:[t.jsx("p",{className:"text-mm-text-secondary text-lg mb-2",children:" "}),t.jsx("p",{className:"text-sm text-mm-text-tertiary",children:"     "})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"SKU"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""})]})}),t.jsx("tbody",{children:Q.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:"7",className:"py-12 text-center",children:[t.jsx("p",{className:"text-mm-text-secondary",children:" ,  "}),t.jsx("button",{onClick:C,className:"mt-2 text-sm text-mm-cyan hover:underline",children:" "})]})}):Q.map(U=>t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors",children:[t.jsxs("td",{className:"py-4 px-4",children:[U.product_image?t.jsx("img",{src:U.product_image,alt:U.product_name||U.sku,className:"w-12 h-12 object-cover rounded bg-mm-dark",onError:X=>{X.target.style.display="none",X.target.nextSibling.style.display="flex"}}):null,t.jsx("div",{className:"w-12 h-12 bg-mm-dark rounded flex items-center justify-center text-mm-text-secondary text-xs",style:{display:U.product_image?"none":"flex"},children:" "})]}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-cyan",children:U.sku}),t.jsx("td",{className:"py-4 px-4 text-sm",children:U.product_name||""}),t.jsx("td",{className:"py-4 px-4 text-center",children:c===U.id?t.jsx("input",{type:"number",value:g,onChange:X=>f(X.target.value),className:"input-neon w-24 text-center",autoFocus:!0,"data-testid":`edit-input-${U.sku}`}):t.jsx("span",{className:"font-mono font-bold",children:U.quantity})}),t.jsx("td",{className:"py-4 px-4 text-center font-mono text-mm-yellow",children:U.reserved}),t.jsx("td",{className:"py-4 px-4 text-center font-mono font-bold text-mm-green",children:U.available}),t.jsx("td",{className:"py-4 px-4 text-center",children:c===U.id?t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("button",{onClick:()=>Re(U),className:"text-mm-green hover:text-mm-cyan transition-colors","data-testid":`save-btn-${U.sku}`,children:t.jsx(lt,{size:20})}),t.jsx("button",{onClick:oe,className:"text-mm-red hover:text-mm-text-secondary transition-colors","data-testid":`cancel-btn-${U.sku}`,children:t.jsx(Ke,{size:20})})]}):t.jsx("button",{onClick:()=>Z(U),className:"text-mm-cyan hover:text-mm-green transition-colors","data-testid":`edit-btn-${U.sku}`,children:t.jsx(bp,{size:18})})})]},U.id))})]})}):t.jsx("div",{className:"card-neon text-center py-16",children:t.jsx("p",{className:"text-mm-text-secondary text-lg",children:"     "})}),t.jsx("div",{className:"card-neon p-4 bg-mm-dark-secondary/30",children:t.jsxs("p",{className:"text-sm text-mm-text-secondary",children:[t.jsx("span",{className:"text-mm-cyan font-bold",children:" :"}),"       15 .    ,      ."]})}),S&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"card-neon max-w-md w-full p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-xl text-mm-cyan uppercase font-mono",children:"   "}),t.jsx("button",{onClick:()=>E(!1),className:"text-mm-text-secondary hover:text-mm-cyan transition-colors",children:t.jsx(Ke,{size:24})})]}),t.jsx("p",{className:"text-sm text-mm-text-secondary",children:"      "}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:""}),t.jsxs("select",{value:I||"",onChange:U=>et(U.target.value),className:"input-neon w-full",children:[t.jsx("option",{value:"",children:" ..."}),N.map(U=>t.jsxs("option",{value:U.id,children:[U.marketplace.toUpperCase()," - ",U.name||U.client_id]},U.id))]})]}),I&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  "}),t.jsxs("select",{value:H||"",onChange:U=>D(U.target.value),className:"input-neon w-full",disabled:T.length===0,children:[t.jsx("option",{value:"",children:" ..."}),T.map(U=>t.jsx("option",{value:U.id,children:U.name},U.id))]}),T.length===0&&t.jsx("p",{className:"text-xs text-mm-text-tertiary mt-2",children:" ..."})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:()=>E(!1),className:"btn-secondary flex-1",disabled:B,children:""}),t.jsx("button",{onClick:it,disabled:!I||!H||B,className:"btn-primary flex-1 disabled:opacity-50",children:B?"...":""})]}),t.jsxs("div",{className:"text-xs text-mm-text-tertiary space-y-1",children:[t.jsx("p",{children:"       "}),t.jsx("p",{children:"    "}),t.jsx("p",{children:"      "})]})]})})]})}function Op(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!0),[l,o]=p.useState(!1),[d,m]=p.useState(null);p.useEffect(()=>{i()},[]);const i=async()=>{a(!0);try{const c=await e.get("/api/suppliers");n(c.data)}catch(c){V.error("  "),console.error(c)}a(!1)},u=async c=>{var h,g;if(confirm(`  "${c.name}"?`))try{await e.delete(`/api/suppliers/${c.id}`),V.success(" "),i()}catch(f){V.error(((g=(h=f.response)==null?void 0:h.data)==null?void 0:g.detail)||" ")}};return t.jsx("div",{className:"min-h-screen bg-mm-black text-mm-text p-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-mm-cyan uppercase mb-2","data-testid":"suppliers-title",children:""}),t.jsx("p",{className:"text-mm-text-secondary text-sm",children:"//  "})]}),t.jsxs("button",{onClick:()=>{m(null),o(!0)},className:"btn-primary flex items-center space-x-2","data-testid":"create-supplier-btn",children:[t.jsx(Ct,{}),t.jsx("span",{children:" "})]})]}),r?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):s.length===0?t.jsxs("div",{className:"card-neon text-center py-16","data-testid":"empty-state",children:[t.jsx(Bn,{className:"mx-auto text-mm-text-tertiary mb-6",size:64}),t.jsx("p",{className:"text-mm-text-secondary text-lg mb-2",children:" "}),t.jsx("p",{className:"text-sm text-mm-text-tertiary mb-6",children:"//   "}),t.jsxs("button",{onClick:()=>o(!0),className:"btn-primary",children:[t.jsx(Ct,{className:"inline mr-2"})," "]})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""})]})}),t.jsx("tbody",{children:s.map(c=>t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors","data-testid":`supplier-row-${c.id}`,children:[t.jsx("td",{className:"py-4 px-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Bn,{className:"text-mm-cyan",size:20}),t.jsx("div",{className:"font-semibold",children:c.name})]})}),t.jsx("td",{className:"py-4 px-4 text-sm text-mm-text-secondary",children:c.contact_person||""}),t.jsx("td",{className:"py-4 px-4 text-sm text-mm-text-secondary font-mono",children:c.phone||""}),t.jsx("td",{className:"py-4 px-4 text-sm text-mm-text-secondary font-mono",children:c.inn||""}),t.jsxs("td",{className:"py-4 px-4 text-right space-x-2",children:[t.jsx("button",{onClick:()=>{m(c),o(!0)},className:"px-3 py-2 border border-mm-cyan text-mm-cyan hover:bg-mm-cyan/10 transition-colors","data-testid":`edit-supplier-${c.id}`,children:t.jsx(Is,{size:16})}),t.jsx("button",{onClick:()=>u(c),className:"px-3 py-2 border border-mm-red text-mm-red hover:bg-mm-red/10 transition-colors","data-testid":`delete-supplier-${c.id}`,children:t.jsx(Kt,{size:16})})]})]},c.id))})]})}),l&&t.jsx(B0,{supplier:d,onClose:()=>{o(!1),m(null)},onSuccess:()=>{o(!1),m(null),i()}})]})})}function B0({supplier:e,onClose:s,onSuccess:n}){const{api:r}=de(),[a,l]=p.useState({name:"",contact_person:"",phone:"",email:"",inn:"",address:"",comment:""});p.useEffect(()=>{e&&l({name:e.name||"",contact_person:e.contact_person||"",phone:e.phone||"",email:e.email||"",inn:e.inn||"",address:e.address||"",comment:e.comment||""})},[e]);const o=async d=>{var m,i;d.preventDefault();try{e?(await r.put(`/api/suppliers/${e.id}`,a),V.success(" ")):(await r.post("/api/suppliers",a),V.success(" ")),n()}catch(u){V.error(((i=(m=u.response)==null?void 0:m.data)==null?void 0:i.detail)||" ")}};return t.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50","data-testid":"supplier-modal",children:t.jsxs("div",{className:"card-neon max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl text-mm-cyan uppercase",children:e?" ":" "}),t.jsx("button",{onClick:s,className:"text-mm-text-secondary hover:text-mm-red transition-colors",children:t.jsx(Ke,{size:24})})]}),t.jsxs("form",{onSubmit:o,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:" *"}),t.jsx("input",{type:"text",value:a.name,onChange:d=>l({...a,name:d.target.value}),className:"input-neon w-full",placeholder:" ",required:!0,"data-testid":"supplier-name-input"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:" "}),t.jsx("input",{type:"text",value:a.contact_person,onChange:d=>l({...a,contact_person:d.target.value}),className:"input-neon w-full",placeholder:" ","data-testid":"contact-person-input"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:""}),t.jsx("input",{type:"tel",value:a.phone,onChange:d=>l({...a,phone:d.target.value}),className:"input-neon w-full",placeholder:"+7 (900) 123-45-67","data-testid":"phone-input"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"Email"}),t.jsx("input",{type:"email",value:a.email,onChange:d=>l({...a,email:d.target.value}),className:"input-neon w-full",placeholder:"supplier@example.com","data-testid":"email-input"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:""}),t.jsx("input",{type:"text",value:a.inn,onChange:d=>l({...a,inn:d.target.value}),className:"input-neon w-full",placeholder:"1234567890","data-testid":"inn-input"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:""}),t.jsx("input",{type:"text",value:a.address,onChange:d=>l({...a,address:d.target.value}),className:"input-neon w-full",placeholder:". , . , 5","data-testid":"address-input"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:""}),t.jsx("textarea",{value:a.comment,onChange:d=>l({...a,comment:d.target.value}),className:"input-neon w-full",rows:"3",placeholder:" ","data-testid":"comment-input"})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{type:"button",onClick:s,className:"btn-secondary flex-1","data-testid":"cancel-btn",children:""}),t.jsx("button",{type:"submit",className:"btn-primary flex-1","data-testid":"submit-btn",children:e?"":""})]})]})]})})}function Rp(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!0),[l,o]=p.useState("all");p.useEffect(()=>{d()},[l]);const d=async()=>{a(!0);try{const u=l!=="all"?`?status=${l}`:"",c=await e.get(`/api/income-orders${u}`);n(c.data)}catch(u){V.error(" "),console.error(u)}a(!1)},m=u=>u?new Date(u).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"",i=u=>u==="draft"?t.jsx("span",{className:"px-3 py-1 text-xs font-mono uppercase bg-mm-yellow/20 text-mm-yellow border border-mm-yellow",children:""}):u==="accepted"?t.jsx("span",{className:"px-3 py-1 text-xs font-mono uppercase bg-mm-green/20 text-mm-green border border-mm-green",children:""}):t.jsx("span",{className:"px-3 py-1 text-xs font-mono uppercase bg-mm-text-tertiary/20 text-mm-text-tertiary",children:u});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl text-mm-cyan uppercase mb-2","data-testid":"title",children:"  "}),t.jsx("p",{className:"text-mm-text-secondary text-sm",children:" "})]}),t.jsxs(Oa,{to:"/income-orders/new",className:"btn-primary flex items-center space-x-2","data-testid":"create-btn",children:[t.jsx(Ct,{}),t.jsx("span",{children:" "})]})]}),t.jsx("div",{className:"card-neon",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("label",{className:"text-sm text-mm-text-secondary uppercase",children:":"}),t.jsx("div",{className:"flex space-x-2",children:["all","draft","accepted"].map(u=>t.jsx("button",{onClick:()=>o(u),className:`px-4 py-2 text-xs font-mono uppercase border transition-colors ${l===u?"border-mm-cyan text-mm-cyan bg-mm-cyan/10":"border-mm-border text-mm-text-secondary hover:border-mm-cyan"}`,"data-testid":`filter-${u}`,children:u==="all"?"":u==="draft"?"":""},u))})]})}),r?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):s.length===0?t.jsxs("div",{className:"card-neon text-center py-16","data-testid":"empty-state",children:[t.jsx(We,{className:"mx-auto text-mm-text-tertiary mb-6",size:64}),t.jsx("p",{className:"text-mm-text-secondary text-lg mb-2",children:" "}),t.jsx("p",{className:"text-sm text-mm-text-tertiary mb-6",children:"   "}),t.jsxs(Oa,{to:"/income-orders/new",className:"btn-primary inline-flex items-center space-x-2",children:[t.jsx(Ct,{}),t.jsx("span",{children:" "})]})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:"-"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""})]})}),t.jsx("tbody",{children:s.map(u=>{var c;return t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors","data-testid":`order-row-${u.id}`,children:[t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-cyan",children:u.id.substring(0,8)}),t.jsx("td",{className:"py-4 px-4 text-sm text-mm-text-secondary",children:m(u.created_at)}),t.jsx("td",{className:"py-4 px-4 text-sm",children:u.supplier_name||""}),t.jsx("td",{className:"py-4 px-4 text-sm",children:u.warehouse_name||""}),t.jsx("td",{className:"py-4 px-4 text-center font-mono text-sm",children:((c=u.items)==null?void 0:c.length)||0}),t.jsx("td",{className:"py-4 px-4 text-center font-mono text-sm text-mm-cyan font-bold",children:u.total_quantity||0}),t.jsx("td",{className:"py-4 px-4",children:i(u.status)}),t.jsx("td",{className:"py-4 px-4 text-right",children:t.jsx(Oa,{to:`/income-orders/${u.id}/edit`,className:"px-3 py-2 border border-mm-cyan text-mm-cyan hover:bg-mm-cyan/10 transition-colors inline-flex items-center","data-testid":`edit-order-${u.id}`,children:t.jsx(Is,{size:16})})})]},u.id)})})]})})]})}function Tp(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!0),[l,o]=p.useState({marketplace:"",status:""});p.useEffect(()=>{d()},[l]);const d=async()=>{a(!0);try{const i=new URLSearchParams;l.marketplace&&i.append("marketplace",l.marketplace),l.status&&i.append("status",l.status);const u=await e.get(`/api/stock-sync/history?${i}`);n(u.data)}catch(i){V.error("  "),console.error(i)}a(!1)},m=i=>i?new Date(i).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl text-mm-cyan uppercase mb-2",children:"  "}),t.jsx("p",{className:"text-mm-text-secondary text-sm",children:"    "})]}),t.jsxs("button",{onClick:d,className:"btn-secondary flex items-center space-x-2","data-testid":"refresh-btn",children:[t.jsx(qe,{}),t.jsx("span",{children:""})]})]}),t.jsx("div",{className:"card-neon",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(kc,{className:"text-mm-cyan"}),t.jsxs("select",{value:l.marketplace,onChange:i=>o({...l,marketplace:i.target.value}),className:"input-neon text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"ozon",children:"Ozon"}),t.jsx("option",{value:"wb",children:"Wildberries"}),t.jsx("option",{value:"yandex",children:"Yandex"})]}),t.jsxs("select",{value:l.status,onChange:i=>o({...l,status:i.target.value}),className:"input-neon text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"success",children:""}),t.jsx("option",{value:"failed",children:""})]})]})}),r?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):s.length===0?t.jsxs("div",{className:"card-neon text-center py-16",children:[t.jsx(qe,{className:"mx-auto text-mm-text-tertiary mb-6",size:64}),t.jsx("p",{className:"text-mm-text-secondary text-lg mb-2",children:" "}),t.jsx("p",{className:"text-sm text-mm-text-tertiary",children:"    "})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-3 px-3 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-3 px-3 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-3 px-3 text-mm-text-secondary uppercase text-xs font-mono",children:" "}),t.jsx("th",{className:"text-left py-3 px-3 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-center py-3 px-3 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-3 px-3 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-3 px-3 text-mm-text-secondary uppercase text-xs font-mono",children:""})]})}),t.jsx("tbody",{children:s.map(i=>t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors",children:[t.jsx("td",{className:"py-3 px-3 font-mono text-xs text-mm-text-secondary",children:m(i.synced_at)}),t.jsx("td",{className:"py-3 px-3",children:t.jsx("span",{className:"px-2 py-1 text-xs font-mono uppercase bg-mm-purple/20 text-mm-purple border border-mm-purple",children:i.marketplace})}),t.jsx("td",{className:"py-3 px-3 font-mono text-xs text-mm-text-secondary",children:i.marketplace_warehouse_id}),t.jsx("td",{className:"py-3 px-3 font-mono text-xs text-mm-cyan",children:i.product_article}),t.jsx("td",{className:"py-3 px-3 text-center font-mono font-bold text-mm-green",children:i.quantity_sent}),t.jsx("td",{className:"py-3 px-3",children:i.status==="success"?t.jsxs("span",{className:"flex items-center text-mm-green text-xs",children:[t.jsx(lt,{className:"mr-1"}),""]}):t.jsxs("span",{className:"flex items-center text-mm-red text-xs",children:[t.jsx(Ke,{className:"mr-1"}),""]})}),t.jsx("td",{className:"py-3 px-3 text-xs text-mm-red",children:i.error_message||""})]},i.id))})]})})]})}function U0(){const[e,s]=p.useState("warehouses");return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex space-x-4 border-b border-mm-border overflow-x-auto",children:[t.jsxs("button",{onClick:()=>s("warehouses"),className:`px-4 py-3 font-mono uppercase text-sm transition-colors whitespace-nowrap ${e==="warehouses"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"tab-warehouses",children:[t.jsx(Un,{className:"inline mr-2"}),""]}),t.jsxs("button",{onClick:()=>s("suppliers"),className:`px-4 py-3 font-mono uppercase text-sm transition-colors whitespace-nowrap ${e==="suppliers"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"tab-suppliers",children:[t.jsx(Bn,{className:"inline mr-2"}),""]}),t.jsxs("button",{onClick:()=>s("income"),className:`px-4 py-3 font-mono uppercase text-sm transition-colors whitespace-nowrap ${e==="income"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"tab-income",children:[t.jsx(mt,{className:"inline mr-2"}),"  "]}),t.jsxs("button",{onClick:()=>s("stock"),className:`px-4 py-3 font-mono uppercase text-sm transition-colors whitespace-nowrap ${e==="stock"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"tab-stock",children:[t.jsx(fi,{className:"inline mr-2"}),""]}),t.jsxs("button",{onClick:()=>s("inventory"),className:`px-4 py-3 font-mono uppercase text-sm transition-colors whitespace-nowrap ${e==="inventory"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"tab-inventory",children:[t.jsx(z0,{className:"inline mr-2"}),""]}),t.jsxs("button",{onClick:()=>s("sync"),className:`px-4 py-3 font-mono uppercase text-sm transition-colors whitespace-nowrap ${e==="sync"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"tab-sync",children:[t.jsx(hi,{className:"inline mr-2"}),""]})]}),t.jsxs("div",{children:[e==="warehouses"&&t.jsx(Pp,{}),e==="suppliers"&&t.jsx(Op,{}),e==="income"&&t.jsx(Rp,{}),e==="stock"&&t.jsx(zp,{}),e==="inventory"&&t.jsx(I0,{}),e==="sync"&&t.jsx(Tp,{})]})]})}function W0(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!0),[l,o]=p.useState("all");p.useEffect(()=>{d()},[l]);const d=async()=>{try{a(!0);const u=await e.get("/api/sync/logs",{params:{status:l!=="all"?l:void 0}});n(u.data.logs||[])}catch(u){console.error("Failed to load sync logs:",u),n([])}finally{a(!1)}},m=u=>{switch(u){case"success":return t.jsx(lt,{className:"w-5 h-5 text-green-400"});case"error":return t.jsx(Ke,{className:"w-5 h-5 text-red-400"});case"pending":return t.jsx(ps,{className:"w-5 h-5 text-yellow-400"});default:return t.jsx(cs,{className:"w-5 h-5 text-gray-400"})}},i=u=>{const c={success:"bg-green-500/20 text-green-400 border-green-500/30",error:"bg-red-500/20 text-red-400 border-red-500/30",pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"};return t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${c[u]||"bg-gray-500/20 text-gray-400"}`,children:u==="success"?"":u==="error"?"":" "})};return r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(qe,{className:"w-8 h-8 animate-spin text-mm-cyan"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-mm-text",children:" "}),t.jsx("p",{className:"text-sm text-mm-text-secondary mt-1",children:"      "})]}),t.jsxs("button",{onClick:d,className:"px-4 py-2 bg-mm-secondary text-mm-text border border-mm-border rounded hover:border-mm-cyan transition-colors flex items-center gap-2",children:[t.jsx(qe,{className:"w-4 h-4"}),""]})]}),t.jsx("div",{className:"flex gap-2",children:["all","success","error"].map(u=>t.jsx("button",{onClick:()=>o(u),className:`px-4 py-2 rounded transition-colors ${l===u?"bg-mm-cyan text-mm-dark font-medium":"bg-mm-secondary text-mm-text hover:border-mm-cyan border border-mm-border"}`,children:u==="all"?"":u==="success"?"":""},u))}),t.jsx("div",{className:"bg-mm-secondary rounded-lg border border-mm-border overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-mm-dark",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:"/"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""})]})}),t.jsx("tbody",{children:s.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"6",className:"px-4 py-12 text-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[t.jsx(ps,{className:"w-12 h-12 text-mm-text-secondary opacity-50"}),t.jsx("p",{className:"text-mm-text-secondary",children:"   "}),t.jsx("p",{className:"text-sm text-mm-text-secondary opacity-70",children:"        "})]})})}):s.map((u,c)=>t.jsxs("tr",{className:"border-t border-mm-border hover:bg-mm-dark/30 transition-colors",children:[t.jsx("td",{className:"px-4 py-3 text-sm text-mm-text",children:new Date(u.timestamp).toLocaleString("ru-RU")}),t.jsx("td",{className:"px-4 py-3 text-sm",children:t.jsx("span",{className:"px-2 py-1 bg-mm-dark rounded text-xs text-mm-cyan",children:u.type==="product"?"":u.type==="price"?"":u.type})}),t.jsxs("td",{className:"px-4 py-3 text-sm",children:[u.marketplace==="ozon"&&t.jsxs("span",{className:"inline-flex items-center gap-1",children:[t.jsx("span",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"O"}),t.jsx("span",{className:"text-mm-text",children:"Ozon"})]}),u.marketplace==="wb"&&t.jsxs("span",{className:"inline-flex items-center gap-1",children:[t.jsx("span",{className:"w-6 h-6 bg-purple-600 text-white rounded flex items-center justify-center text-xs font-bold",children:"WB"}),t.jsx("span",{className:"text-mm-text",children:"Wildberries"})]})]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"text-sm text-mm-text font-mono",children:u.product_article}),t.jsx("div",{className:"text-xs text-mm-text-secondary truncate max-w-xs",children:u.product_name})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[m(u.status),i(u.status)]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-mm-text-secondary max-w-md truncate",children:u.message||u.error||""})]},c))})]})}),t.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(cs,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"text-sm text-blue-300",children:[t.jsx("p",{className:"font-medium mb-1",children:"  "}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-300/80",children:[t.jsx("li",{children:"      "}),t.jsx("li",{children:"       "}),t.jsx("li",{children:"     "})]})]})]})})]})}function Fp(){const{api:e}=de(),[s,n]=p.useState("products"),[r,a]=p.useState([]),[l,o]=p.useState([]),[d,m]=p.useState([]),[i,u]=p.useState(!0),[c,h]=p.useState(""),[g,f]=p.useState(""),[v,w]=p.useState(""),[x,y]=p.useState(""),[j,_]=p.useState(!1),[P,k]=p.useState(1),[z,b]=p.useState("created_at"),[S,E]=p.useState(!1);p.useEffect(()=>{N(),R()},[c,g,v,x,P,z,S]);const N=async()=>{try{const T=await e.get("/api/catalog/categories");m(T.data)}catch(T){console.error("Failed to load categories:",T)}},R=async()=>{try{u(!0);const T={page:P,limit:50,sort_by:z,ascending:S};c&&(T.search=c),g&&(T.category_id=g),v&&(T.brand=v),x&&(T.status=x);const H=(await e.get("/api/catalog/products",{params:T})).data;a(H);const D=await Promise.all(H.map(async B=>{try{const Q=(await e.get(`/api/catalog/products/${B.id}/photos`)).data;return{...B,firstPhoto:Q.length>0?Q[0].url:null}}catch($){return console.error(`Failed to load photos for product ${B.id}:`,$),{...B,firstPhoto:null}}}));o(D)}catch(T){console.error("Failed to load products:",T)}finally{u(!1)}},I=async T=>{if(window.confirm(" ,      ?    ."))try{await e.delete(`/api/catalog/products/${T}`),R()}catch(A){alert("   : "+A.message)}},L=T=>{const A={active:t.jsx("span",{className:"px-2 py-1 text-xs rounded bg-green-500/20 text-green-400",children:""}),draft:t.jsx("span",{className:"px-2 py-1 text-xs rounded bg-yellow-500/20 text-yellow-400",children:""}),archived:t.jsx("span",{className:"px-2 py-1 text-xs rounded bg-gray-500/20 text-gray-400",children:""})};return A[T]||A.draft};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-mm-cyan",children:""}),t.jsx("p",{className:"text-sm text-mm-text-secondary mt-1",children:" "})]}),t.jsx("div",{className:"flex gap-2",children:t.jsxs("button",{onClick:()=>window.location.href="/catalog/products/new",className:"px-4 py-2 bg-mm-cyan text-mm-dark hover:bg-mm-cyan/90 rounded flex items-center gap-2",children:[t.jsx(Ct,{}),"  "]})})]}),t.jsx("div",{className:"border-b border-mm-border mb-6",children:t.jsxs("div",{className:"flex gap-1",children:[t.jsxs("button",{onClick:()=>n("products"),className:`px-6 py-3 font-medium transition-colors relative ${s==="products"?"text-mm-cyan":"text-mm-text-secondary hover:text-mm-text"}`,children:[" ",s==="products"&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-mm-cyan"})]}),t.jsxs("button",{onClick:()=>n("sync"),className:`px-6 py-3 font-medium transition-colors relative ${s==="sync"?"text-mm-cyan":"text-mm-text-secondary hover:text-mm-text"}`,children:["",s==="sync"&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-mm-cyan"})]})]})}),s==="sync"?t.jsx(W0,{}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-mm-secondary p-6 rounded-lg space-y-4",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-mm-text-secondary"}),t.jsx("input",{type:"text",placeholder:"  , , -...",value:c,onChange:T=>h(T.target.value),className:"w-full pl-10 pr-4 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]}),t.jsxs("button",{onClick:()=>_(!j),className:`px-4 py-2 rounded flex items-center gap-2 ${j?"bg-mm-cyan text-mm-dark":"bg-mm-dark text-mm-text hover:bg-mm-dark/80"}`,children:[t.jsx(kc,{})," "]})]}),j&&t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-1",children:""}),t.jsxs("select",{value:g,onChange:T=>f(T.target.value),className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none",children:[t.jsx("option",{value:"",children:" "}),d.map(T=>t.jsx("option",{value:T.id,children:T.name},T.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-1",children:""}),t.jsx("input",{type:"text",value:v,onChange:T=>w(T.target.value),placeholder:"  ",className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-1",children:""}),t.jsxs("select",{value:x,onChange:T=>y(T.target.value),className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"active",children:""}),t.jsx("option",{value:"draft",children:""}),t.jsx("option",{value:"archived",children:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-1",children:""}),t.jsxs("select",{value:z,onChange:T=>b(T.target.value),className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none",children:[t.jsx("option",{value:"created_at",children:"  "}),t.jsx("option",{value:"name",children:" "}),t.jsx("option",{value:"article",children:" "})]})]})]})]}),i?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-mm-cyan"}),t.jsx("p",{className:"text-mm-text-secondary mt-4",children:" ..."})]}):l.length===0?t.jsxs("div",{className:"text-center py-12 bg-mm-secondary rounded-lg",children:[t.jsx(We,{className:"mx-auto text-6xl text-mm-text-secondary mb-4"}),t.jsx("p",{className:"text-mm-text-secondary text-lg",children:" "}),t.jsx("p",{className:"text-mm-text-secondary text-sm mt-2",children:"     "}),t.jsx("button",{onClick:()=>window.location.href="/catalog/products/new",className:"mt-4 px-6 py-2 bg-mm-cyan text-mm-dark hover:bg-mm-cyan/90 rounded",children:" "})]}):t.jsx("div",{className:"bg-mm-secondary rounded-lg overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-mm-dark border-b border-mm-border",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-mm-text-secondary uppercase",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-mm-border",children:l.map(T=>t.jsxs("tr",{className:"hover:bg-mm-dark/50 transition",children:[t.jsxs("td",{className:"px-4 py-3",children:[T.firstPhoto?t.jsx("img",{src:T.firstPhoto,alt:T.name,className:"w-12 h-12 object-cover rounded bg-mm-dark",onError:A=>{A.target.style.display="none",A.target.nextSibling.style.display="flex"}}):null,t.jsx("div",{className:"w-12 h-12 bg-mm-dark rounded flex items-center justify-center",style:{display:T.firstPhoto?"none":"flex"},children:t.jsx(We,{className:"text-mm-text-secondary"})})]}),t.jsx("td",{className:"px-4 py-3 text-sm text-mm-text font-mono",children:T.article}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"text-sm text-mm-text",children:T.name}),T.description&&t.jsx("div",{className:"text-xs text-mm-text-secondary mt-1 truncate max-w-xs",children:T.description})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{className:"flex items-center gap-1",children:(()=>{var D,B,$,Q,C,q,J,O;const A=T.marketplace_specific_data||T.marketplace_data||{},H=[];return((D=A.ozon)!=null&&D.product_id||(B=A.ozon)!=null&&B.offer_id||($=A.ozon)!=null&&$.id)&&H.push(t.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-[10px] font-bold",title:"Ozon ()",children:"O"},"ozon")),((Q=A.wb)!=null&&Q.nm_id||(C=A.wb)!=null&&C.id||(q=A.wb)!=null&&q.vendor_code)&&H.push(t.jsx("div",{className:"w-6 h-6 bg-purple-600 text-white rounded flex items-center justify-center text-[9px] font-bold",title:"Wildberries ()",children:"WB"},"wb")),((J=A.yandex)!=null&&J.offer_id||(O=A.yandex)!=null&&O.shop_sku)&&H.push(t.jsx("div",{className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center text-[10px] font-bold",title:". ()",children:""},"yandex")),H.length>0?H:t.jsx("span",{className:"text-xs text-mm-text-secondary",children:""})})()})}),t.jsx("td",{className:"px-4 py-3",children:T.price_discounted?t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("span",{className:"text-mm-cyan font-bold text-base",children:[(T.price_discounted/100).toFixed(2)," "]}),t.jsxs("span",{className:"text-mm-text-secondary text-xs line-through",children:[(T.price/100).toFixed(2)," "]})]}):T.price>0?t.jsxs("span",{className:"text-mm-text text-sm",children:[(T.price/100).toFixed(2)," "]}):t.jsx("span",{className:"text-mm-text-secondary text-sm",children:""})}),t.jsx("td",{className:"px-4 py-3 text-sm text-mm-text",children:T.brand||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-mm-text",children:T.category_name||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-mm-text",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-mm-cyan",children:T.variants_count}),T.is_grouped&&t.jsx("span",{className:"text-xs text-mm-text-secondary",children:"(.)"})]})}),t.jsx("td",{className:"px-4 py-3",children:L(T.status)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>window.location.href=`/catalog/products/${T.id}/edit`,className:"p-2 text-mm-cyan hover:bg-mm-cyan/10 rounded transition",title:"",children:t.jsx(Is,{})}),t.jsx("button",{onClick:()=>I(T.id),className:"p-2 text-red-400 hover:bg-red-400/10 rounded transition",title:" ",children:t.jsx(Kt,{})})]})})]},T.id))})]})}),l.length>0&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"text-sm text-mm-text-secondary",children:[" : ",l.length]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>k(Math.max(1,P-1)),disabled:P===1,className:"px-4 py-2 bg-mm-secondary text-mm-text hover:bg-mm-secondary/80 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:""}),t.jsxs("span",{className:"px-4 py-2 bg-mm-dark rounded text-mm-text",children:[" ",P]}),t.jsx("button",{onClick:()=>k(P+1),disabled:l.length<50,className:"px-4 py-2 bg-mm-secondary text-mm-text hover:bg-mm-secondary/80 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})]})]})}function V0(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!0);p.useEffect(()=>{l()},[]);const l=async()=>{try{const m=await e.get("/api/admin/users");n(m.data)}catch(m){console.error("Failed to load users:",m)}a(!1)},o=async m=>{try{await e.put(`/api/admin/users/${m}/approve`),l()}catch(i){console.error("Failed to approve:",i)}},d=async m=>{try{await e.put(`/api/admin/users/${m}/block`),l()}catch(i){console.error("Failed to block:",i)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-2xl mb-4 text-mm-cyan",children:" "}),r?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm",children:"Email"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm",children:"Name"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm",children:"Role"}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm",children:"Status"}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm",children:"Actions"})]})}),t.jsx("tbody",{children:s.map(m=>t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray",children:[t.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:m.email}),t.jsx("td",{className:"py-4 px-4",children:m.full_name}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:m.role==="admin"?"status-active":"status-new",children:m.role})}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:m.is_active?"status-active":"status-pending",children:m.is_active?"ACTIVE":"PENDING"})}),t.jsxs("td",{className:"py-4 px-4 text-right space-x-2",children:[!m.is_active&&m.role==="seller"&&t.jsx("button",{onClick:()=>o(m.id),className:"px-3 py-1 border border-mm-green text-mm-green text-xs",children:"APPROVE"}),m.is_active&&m.role==="seller"&&t.jsx("button",{onClick:()=>d(m.id),className:"px-3 py-1 border border-mm-red text-mm-red text-xs",children:"BLOCK"})]})]},m.id))})]})})]})}function H0(){const{user:e,logout:s}=de(),[n,r]=p.useState("sellers");return t.jsxs("div",{className:"min-h-screen bg-mm-black",children:[t.jsx("header",{className:"border-b border-mm-border bg-mm-darker",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h1",{className:"text-2xl font-bold",children:["MINIMAL",t.jsx("span",{className:"text-mm-purple",children:"MOD"})," ",t.jsx("span",{className:"status-active",children:"ADMIN"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("span",{className:"text-mm-text-secondary",children:e==null?void 0:e.email}),t.jsx(Sp,{}),t.jsx("button",{onClick:s,className:"btn-primary",children:"LOGOUT"})]})]})})}),t.jsx("nav",{className:"border-b border-mm-border bg-mm-dark",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4",children:t.jsxs("div",{className:"flex space-x-6 h-12 overflow-x-auto",children:[t.jsxs("button",{onClick:()=>r("sellers"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap ${n==="sellers"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"admin-tab-sellers",children:[t.jsx(D0,{className:"inline mr-2"}),""]}),t.jsxs("button",{onClick:()=>r("api-keys"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap ${n==="api-keys"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"admin-tab-integrations",children:[t.jsx(vp,{className:"inline mr-2"}),""]}),t.jsxs("button",{onClick:()=>r("warehouses"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap ${n==="warehouses"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"admin-tab-warehouses",children:[t.jsx(Un,{className:"inline mr-2"}),""]}),t.jsxs("button",{onClick:()=>r("products"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap ${n==="products"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"admin-tab-products",children:[t.jsx(We,{className:"inline mr-2"}),""]}),t.jsxs("button",{onClick:()=>r("orders"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap ${n==="orders"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"admin-tab-orders",children:[t.jsx(gi,{className:"inline mr-2"}),"ORDERS"]}),t.jsxs("button",{onClick:()=>r("finance"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap ${n==="finance"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"admin-tab-finance",children:[t.jsx(Np,{className:"inline mr-2"}),"FINANCE"]}),t.jsxs("button",{onClick:()=>r("balance"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap ${n==="balance"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,"data-testid":"admin-tab-balance",children:[t.jsx(cn,{className:"inline mr-2"}),"BALANCE"]})]})})}),t.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[n==="sellers"&&t.jsx(V0,{}),n==="api-keys"&&t.jsx(Cp,{}),n==="warehouses"&&t.jsx(U0,{}),n==="products"&&t.jsx(Fp,{}),n==="orders"&&t.jsx(M0,{}),n==="finance"&&t.jsx(Ep,{}),n==="balance"&&t.jsx(Lp,{})]})]})}function q0(){const{api:e}=de(),[s,n]=p.useState({}),[r,a]=p.useState({}),[l,o]=p.useState(null);p.useEffect(()=>{d()},[]);const d=async()=>{try{const c=await e.get("/api/admin/categories/preload/status");a(c.data)}catch(c){console.error("Failed to load status:",c),o("  ")}},m=async c=>{var h,g;n({...s,[c]:!0}),o(null);try{const f=await e.post(`/api/admin/categories/preload?marketplace=${c}`);alert(` ${f.data.message}`),setTimeout(()=>{d()},3e3)}catch(f){console.error(`Failed to preload ${c}:`,f);const v=((g=(h=f.response)==null?void 0:h.data)==null?void 0:g.detail)||f.message;alert(`   ${c}: ${v}`),o(v)}finally{n({...s,[c]:!1})}},i=[{id:"ozon",name:"Ozon",color:"blue",description:"   Ozon"},{id:"wb",name:"Wildberries",color:"purple",description:"   WB"},{id:"yandex",name:" ",color:"yellow",description:"  "}],u=c=>c?new Date(c).toLocaleString("ru-RU"):"";return t.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"  "}),t.jsx("p",{className:"text-gray-600",children:"          "})]}),l&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start gap-3",children:[t.jsx(cs,{className:"text-red-600 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-red-800 font-medium",children:""}),t.jsx("p",{className:"text-red-600 text-sm",children:l})]})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[t.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"   ?"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsx("li",{children:"       "}),t.jsx("li",{children:"        "}),t.jsx("li",{children:"          "}),t.jsx("li",{children:"   1-3     "})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map(c=>{const h=r[c.id]||{},g=h.total_categories>0,f=h.last_updated;return t.jsxs("div",{className:`bg-white border-2 border-${c.color}-200 rounded-lg p-6 shadow-sm`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:`text-lg font-bold text-${c.color}-700`,children:c.name}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c.description})]}),g&&t.jsx(lt,{className:"text-green-600 text-xl flex-shrink-0"})]}),t.jsxs("div",{className:"space-y-3 mb-4",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:" :"}),t.jsx("span",{className:"font-bold text-gray-900",children:h.total_categories||0})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:" :"}),t.jsx("span",{className:"font-medium text-gray-700 text-xs",children:u(f)})]})]}),t.jsx("button",{onClick:()=>m(c.id),disabled:s[c.id],className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-colors flex items-center justify-center gap-2 ${s[c.id]?`bg-${c.color}-300 cursor-not-allowed`:`bg-${c.color}-600 hover:bg-${c.color}-700`}`,children:s[c.id]?t.jsxs(t.Fragment,{children:[t.jsx(qe,{className:"animate-spin"}),"..."]}):g?t.jsxs(t.Fragment,{children:[t.jsx(qe,{})," "]}):t.jsxs(t.Fragment,{children:[t.jsx(mt,{})," "]})})]},c.id)})}),t.jsxs("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-medium text-yellow-900 mb-2",children:" "}),t.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[t.jsx("li",{children:"      API  "}),t.jsx("li",{children:' ,       ""'}),t.jsx("li",{children:"    ,      "})]})]})]})}function Q0(){const{id:e}=Sl(),s=Dt(),{api:n}=de(),[r,a]=p.useState(!0),[l,o]=p.useState([]),[d,m]=p.useState(null),[i,u]=p.useState({sku:"",price:"",cogs:"",status:"draft",category_id:"",visibility:{show_on_minimalmod:!0,show_in_search:!0,is_featured:!1},seo:{meta_title:"",meta_description:"",url_slug:""},minimalmod:{name:"",variant_name:"",description:"",tags:[],images:[],attributes:{}},marketplaces:{images:[],ozon:{enabled:!1,product_id:"",name:"",description:"",price:"",category_id:"",attributes:{}},wildberries:{enabled:!1,product_id:"",name:"",description:"",price:"",category_id:"",attributes:{}},yandex_market:{enabled:!1,product_id:"",name:"",description:"",price:"",category_id:"",attributes:{}}}});p.useEffect(()=>{c(),e!=="new"?h():a(!1)},[e]);const c=async()=>{try{const x=await n.get("/api/admin/categories");o(x.data)}catch(x){console.error("Failed to load categories:",x)}},h=async()=>{try{const x=await n.get(`/api/products/${e}`);if(u(x.data),x.data.category_id){const y=l.find(j=>j.id===x.data.category_id);m(y)}}catch(x){console.error("Failed to load product:",x)}a(!1)},g=x=>{const y=l.find(j=>j.id===x);if(m(y),y&&y.attributes){const j={};y.attributes.forEach(_=>{j[_]=i.minimalmod.attributes[_]||""}),u({...i,category_id:x,minimalmod:{...i.minimalmod,attributes:j}})}else u({...i,category_id:x})},f=()=>{if(!d)return;const x=d.marketplace_mapping||{};if(i.marketplaces.ozon.enabled&&x.ozon){const y={};Object.entries(i.minimalmod.attributes).forEach(([j,_])=>{var k;const P=(k=x.ozon.attribute_mapping)==null?void 0:k[j];P&&_&&(y[P]=_)}),u({...i,marketplaces:{...i.marketplaces,ozon:{...i.marketplaces.ozon,attributes:y}}})}alert("    !")},v=async()=>{var x,y;try{const j={...i,visibility:{...i.visibility,show_on_minimalmod:!0},status:"active"};e==="new"?await n.post("/api/products",j):await n.put(`/api/products/${e}`,j),alert("    MinimalMod!"),s(-1)}catch(j){alert(": "+(((y=(x=j.response)==null?void 0:x.data)==null?void 0:y.detail)||j.message))}},w=async()=>{var y,j;const x=[];if(i.marketplaces.ozon.enabled&&x.push("Ozon"),i.marketplaces.wildberries.enabled&&x.push("Wildberries"),i.marketplaces.yandex_market.enabled&&x.push("."),x.length===0){alert("    !");return}try{f(),e==="new"?await n.post("/api/products",i):await n.put(`/api/products/${e}`,i),alert(`  : ${x.join(", ")}!

      API  .`),s(-1)}catch(_){alert(": "+(((j=(y=_.response)==null?void 0:y.data)==null?void 0:j.detail)||_.message))}};return r?t.jsx("div",{className:"min-h-screen bg-mm-black flex items-center justify-center",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):t.jsxs("div",{className:"min-h-screen bg-mm-black",children:[t.jsx("header",{className:"border-b border-mm-border bg-mm-darker sticky top-0 z-10",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-2xl font-bold text-mm-cyan uppercase",children:e==="new"?" ":" "}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{onClick:v,className:"btn-primary",children:[t.jsx(ss,{className:"inline mr-2"}),"  "]}),t.jsxs("button",{onClick:w,className:"btn-secondary border-mm-green text-mm-green",children:[t.jsx(ss,{className:"inline mr-2"}),"  "]}),t.jsxs("button",{onClick:()=>s(-1),className:"btn-secondary",children:[t.jsx(Ke,{className:"inline mr-2"}),""]})]})]})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[t.jsxs("div",{className:"card-neon mb-6",children:[t.jsx("p",{className:"comment mb-3",children:"//      :"}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsxs("label",{className:"flex items-center space-x-2 p-4 border-2 border-mm-border hover:border-mm-cyan transition-all cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"w-5 h-5"}),t.jsx("span",{className:"font-mono text-mm-cyan",children:"  ()"})]}),t.jsxs("label",{className:`flex items-center space-x-2 p-4 border-2 transition-all cursor-pointer ${i.marketplaces.ozon.enabled?"border-mm-blue bg-mm-blue/10":"border-mm-border hover:border-mm-blue"}`,children:[t.jsx("input",{type:"checkbox",checked:i.marketplaces.ozon.enabled,onChange:x=>u({...i,marketplaces:{...i.marketplaces,ozon:{...i.marketplaces.ozon,enabled:x.target.checked}}}),className:"w-5 h-5"}),t.jsx("span",{className:`font-mono ${i.marketplaces.ozon.enabled?"text-mm-blue":"text-mm-text-secondary"}`,children:" OZON"})]}),t.jsxs("label",{className:`flex items-center space-x-2 p-4 border-2 transition-all cursor-pointer ${i.marketplaces.wildberries.enabled?"border-mm-purple bg-mm-purple/10":"border-mm-border hover:border-mm-purple"}`,children:[t.jsx("input",{type:"checkbox",checked:i.marketplaces.wildberries.enabled,onChange:x=>u({...i,marketplaces:{...i.marketplaces,wildberries:{...i.marketplaces.wildberries,enabled:x.target.checked}}}),className:"w-5 h-5"}),t.jsx("span",{className:`font-mono ${i.marketplaces.wildberries.enabled?"text-mm-purple":"text-mm-text-secondary"}`,children:" WILDBERRIES"})]}),t.jsxs("label",{className:`flex items-center space-x-2 p-4 border-2 transition-all cursor-pointer ${i.marketplaces.yandex_market.enabled?"border-mm-yellow bg-mm-yellow/10":"border-mm-border hover:border-mm-yellow"}`,children:[t.jsx("input",{type:"checkbox",checked:i.marketplaces.yandex_market.enabled,onChange:x=>u({...i,marketplaces:{...i.marketplaces,yandex_market:{...i.marketplaces.yandex_market,enabled:x.target.checked}}}),className:"w-5 h-5"}),t.jsx("span",{className:`font-mono ${i.marketplaces.yandex_market.enabled?"text-mm-yellow":"text-mm-text-secondary"}`,children:" ."})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("div",{className:"card-neon",children:[t.jsx("h3",{className:"text-xl mb-4 text-mm-cyan uppercase",children:" "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"SKU *"}),t.jsx("input",{type:"text",value:i.sku,onChange:x=>u({...i,sku:x.target.value}),className:"input-neon w-full",placeholder:"PRODUCT-123"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  *"}),t.jsx("input",{type:"number",step:"0.01",value:i.price,onChange:x=>u({...i,price:x.target.value}),className:"input-neon w-full"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:" *"}),t.jsx("input",{type:"text",value:i.minimalmod.name,onChange:x=>u({...i,minimalmod:{...i.minimalmod,name:x.target.value}}),className:"input-neon w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:" *"}),t.jsxs("select",{value:i.category_id||"",onChange:x=>g(x.target.value),className:"input-neon w-full",children:[t.jsx("option",{value:"",children:" "}),l.map(x=>t.jsx("option",{value:x.id,children:x.name},x.id))]}),t.jsx("p",{className:"comment text-xs mt-1",children:"//     "})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:""}),t.jsx("textarea",{value:i.minimalmod.description,onChange:x=>u({...i,minimalmod:{...i.minimalmod,description:x.target.value}}),className:"input-neon w-full",rows:"6"})]})]})]}),t.jsxs("div",{className:"card-neon",children:[t.jsxs("h3",{className:"text-xl mb-4 text-mm-cyan uppercase",children:[t.jsx(yi,{className:"inline mr-2"}),"   ( 8 )"]}),t.jsxs("div",{className:"space-y-2",children:[i.minimalmod.images.map((x,y)=>t.jsxs("div",{className:"flex items-center space-x-2",children:[x&&t.jsx("img",{src:x,alt:"",className:"w-16 h-16 object-cover border border-mm-border"}),t.jsx("input",{type:"text",value:x,onChange:j=>{const _=[...i.minimalmod.images];_[y]=j.target.value,u({...i,minimalmod:{...i.minimalmod,images:_}})},className:"input-neon flex-1",placeholder:"https://example.com/image.jpg"}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:`file-mm-${y}`,onChange:j=>{const _=j.target.files[0];if(_){const P=new FileReader;P.onload=k=>{const z=[...i.minimalmod.images];z[y]=k.target.result,u({...i,minimalmod:{...i.minimalmod,images:z}})},P.readAsDataURL(_)}}}),t.jsx("label",{htmlFor:`file-mm-${y}`,className:"btn-secondary px-3 py-2 cursor-pointer",children:""}),t.jsx("button",{onClick:()=>{u({...i,minimalmod:{...i.minimalmod,images:i.minimalmod.images.filter((j,_)=>_!==y)}})},className:"text-mm-red hover:text-mm-red/80 text-xl",children:""})]},y)),i.minimalmod.images.length<8&&t.jsx("button",{onClick:()=>u({...i,minimalmod:{...i.minimalmod,images:[...i.minimalmod.images,""]}}),className:"btn-secondary w-full",children:"+  "})]})]}),t.jsxs("div",{className:"card-neon border-2 border-mm-purple",children:[t.jsxs("h3",{className:"text-xl mb-4 text-mm-purple uppercase",children:[t.jsx(yi,{className:"inline mr-2"}),"   ( 10 ,  3:4)"]}),t.jsx("p",{className:"comment mb-3",children:"//     Ozon, Wildberries, ."}),t.jsxs("div",{className:"space-y-2",children:[i.marketplaces.images.map((x,y)=>t.jsxs("div",{className:"flex items-center space-x-2",children:[x&&t.jsx("img",{src:x,alt:"",className:"w-16 h-16 object-cover border border-mm-border"}),t.jsx("input",{type:"text",value:x,onChange:j=>{const _=[...i.marketplaces.images];_[y]=j.target.value,u({...i,marketplaces:{...i.marketplaces,images:_}})},className:"input-neon flex-1",placeholder:"https://example.com/marketplace-image.jpg"}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:`file-mp-${y}`,onChange:j=>{const _=j.target.files[0];if(_){const P=new FileReader;P.onload=k=>{const z=[...i.marketplaces.images];z[y]=k.target.result,u({...i,marketplaces:{...i.marketplaces,images:z}})},P.readAsDataURL(_)}}}),t.jsx("label",{htmlFor:`file-mp-${y}`,className:"btn-secondary px-3 py-2 cursor-pointer",children:""}),t.jsx("button",{onClick:()=>u({...i,marketplaces:{...i.marketplaces,images:i.marketplaces.images.filter((j,_)=>_!==y)}}),className:"text-mm-red hover:text-mm-red/80 text-xl",children:""})]},y)),i.marketplaces.images.length<10&&t.jsx("button",{onClick:()=>u({...i,marketplaces:{...i.marketplaces,images:[...i.marketplaces.images,""]}}),className:"btn-secondary w-full",children:"+  "})]}),t.jsx("p",{className:"comment text-xs mt-3",children:"//  : 3:4 (, 900x1200px)"})]}),d&&d.attributes&&t.jsxs("div",{className:"card-neon",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-xl text-mm-cyan uppercase",children:""}),t.jsxs("button",{onClick:f,className:"btn-secondary text-xs",children:[t.jsx(lt,{className:"inline mr-1"}),"  "]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:d.attributes.map(x=>t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:x}),t.jsx("input",{type:"text",value:i.minimalmod.attributes[x]||"",onChange:y=>u({...i,minimalmod:{...i.minimalmod,attributes:{...i.minimalmod.attributes,[x]:y.target.value}}}),className:"input-neon w-full",placeholder:` ${x}`})]},x))}),t.jsx("p",{className:"comment text-xs mt-3",children:'//   ,   ""     '})]}),i.marketplaces.ozon.enabled&&t.jsxs("div",{className:"card-neon border-2 border-mm-blue",children:[t.jsx("h3",{className:"text-xl mb-4 text-mm-blue uppercase",children:" OZON "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  Ozon"}),t.jsx("input",{type:"number",step:"0.01",value:i.marketplaces.ozon.price,onChange:x=>u({...i,marketplaces:{...i.marketplaces,ozon:{...i.marketplaces.ozon,price:x.target.value}}}),className:"input-neon w-full",placeholder:"   Ozon"}),t.jsx("p",{className:"comment text-xs mt-1",children:"//  ,    "})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  Ozon"}),t.jsx("textarea",{value:i.marketplaces.ozon.description,onChange:x=>u({...i,marketplaces:{...i.marketplaces,ozon:{...i.marketplaces.ozon,description:x.target.value}}}),className:"input-neon w-full",rows:"4",placeholder:"  Ozon (   )"}),t.jsx("p",{className:"comment text-xs mt-1",children:"//  ,    "})]})]})]}),i.marketplaces.wildberries.enabled&&t.jsxs("div",{className:"card-neon border-2 border-mm-purple",children:[t.jsx("h3",{className:"text-xl mb-4 text-mm-purple uppercase",children:" WILDBERRIES "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  WB"}),t.jsx("input",{type:"number",step:"0.01",value:i.marketplaces.wildberries.price,onChange:x=>u({...i,marketplaces:{...i.marketplaces,wildberries:{...i.marketplaces.wildberries,price:x.target.value}}}),className:"input-neon w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  WB"}),t.jsx("textarea",{value:i.marketplaces.wildberries.description,onChange:x=>u({...i,marketplaces:{...i.marketplaces,wildberries:{...i.marketplaces.wildberries,description:x.target.value}}}),className:"input-neon w-full",rows:"4"})]})]})]}),i.marketplaces.yandex_market.enabled&&t.jsxs("div",{className:"card-neon border-2 border-mm-yellow",children:[t.jsx("h3",{className:"text-xl mb-4 text-mm-yellow uppercase",children:" . "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  "}),t.jsx("input",{type:"number",step:"0.01",value:i.marketplaces.yandex_market.price,onChange:x=>u({...i,marketplaces:{...i.marketplaces,yandex_market:{...i.marketplaces.yandex_market,price:x.target.value}}}),className:"input-neon w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  "}),t.jsx("textarea",{value:i.marketplaces.yandex_market.description,onChange:x=>u({...i,marketplaces:{...i.marketplaces,yandex_market:{...i.marketplaces.yandex_market,description:x.target.value}}}),className:"input-neon w-full",rows:"4"})]})]})]})]}),t.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[t.jsxs("div",{className:"card-neon",children:[t.jsx("h3",{className:"text-lg mb-4 text-mm-cyan uppercase",children:""}),t.jsxs("select",{value:i.status,onChange:x=>u({...i,status:x.target.value}),className:"input-neon w-full",children:[t.jsx("option",{value:"draft",children:""}),t.jsx("option",{value:"active",children:""}),t.jsx("option",{value:"out_of_stock",children:"  "}),t.jsx("option",{value:"archived",children:""})]})]}),t.jsxs("div",{className:"card-neon",children:[t.jsx("h3",{className:"text-lg mb-4 text-mm-cyan uppercase",children:""}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:i.visibility.show_on_minimalmod,onChange:x=>u({...i,visibility:{...i.visibility,show_on_minimalmod:x.target.checked}}),className:"w-4 h-4"}),t.jsx("span",{className:"text-mm-text-secondary",children:"  "})]}),t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:i.visibility.is_featured,onChange:x=>u({...i,visibility:{...i.visibility,is_featured:x.target.checked}}),className:"w-4 h-4"}),t.jsx("span",{className:"text-mm-text-secondary",children:""})]})]})]}),t.jsxs("div",{className:"card-neon bg-mm-blue/5 border-mm-blue",children:[t.jsx("p",{className:"text-mm-blue font-bold text-sm mb-2",children:"   :"}),t.jsxs("ul",{className:"text-xs text-mm-text-secondary space-y-1",children:[t.jsx("li",{children:"1.   "}),t.jsx("li",{children:"2.  "}),t.jsx("li",{children:"3.  "}),t.jsx("li",{children:"4.   ( )"}),t.jsx("li",{children:"5.    "}),t.jsx("li",{children:'6.  "  "'})]})]})]})]})]})]})}const K0="http://localhost:8001",Y0=()=>{const e=Dt(),[s,n]=p.useState([]),[r,a]=p.useState(!0),[l,o]=p.useState(""),[d,m]=p.useState("Wildberries"),[i,u]=p.useState([]),[c,h]=p.useState(!1),[g,f]=p.useState(2);p.useEffect(()=>{v()},[]);const v=async()=>{try{const S=localStorage.getItem("token"),E=await ze.get(`${K0}/api/products`,{headers:{Authorization:`Bearer ${S}`}});n(E.data),a(!1)}catch(S){console.error("Error fetching products:",S),a(!1)}},w=()=>{e("/products/new")},x=()=>{e("/orders/new")},y=()=>{if(i.length===0){alert("   ");return}alert("  -  ")},j=()=>{alert(" -  ")},_=()=>{if(i.length===0){alert("   ");return}confirm(` ${i.length}   ?`)&&alert(" -  ")},P=()=>{if(i.length===0){alert("   ");return}confirm(` ${i.length} ?`)&&alert(" -  ")},k=()=>{alert("  -  ")},z=S=>{i.includes(S)?u(i.filter(E=>E!==S)):u([...i,S])},b=s.filter(S=>S.name.toLowerCase().includes(l.toLowerCase())||S.sku&&S.sku.toLowerCase().includes(l.toLowerCase())||S.barcode&&S.barcode.toLowerCase().includes(l.toLowerCase()));return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:w,className:"px-6 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700",children:" "}),t.jsx("button",{onClick:x,className:"px-6 py-2 bg-yellow-500 text-white font-semibold rounded-lg hover:bg-yellow-600",children:" "})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:" "}),t.jsx("button",{onClick:j,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:""}),t.jsx("button",{onClick:_,className:"p-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",title:"  ",children:""}),t.jsx("button",{onClick:P,className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",title:"",children:""})]})]}),t.jsxs("div",{className:"flex gap-4 items-center",children:[t.jsx("button",{onClick:()=>h(!c),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-semibold",children:""}),t.jsx("input",{type:"text",value:l,onChange:S=>o(S.target.value),placeholder:"  , -, , ",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsxs("select",{value:d,onChange:S=>m(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[t.jsx("option",{children:"Wildberries"}),t.jsx("option",{children:"Ozon"}),t.jsx("option",{children:"."})]}),t.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-lg",children:[t.jsx("option",{children:"   "}),t.jsx("option",{children:" "})]}),t.jsx("button",{onClick:k,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold",children:""})]})]}),c&&t.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:""}),t.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:t.jsx("option",{children:" "})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:""}),t.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:t.jsx("option",{children:" "})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:""}),t.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:t.jsx("option",{children:" "})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:""}),t.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[t.jsx("option",{children:" "}),t.jsx("option",{children:""}),t.jsx("option",{children:" "})]})]})]})}),t.jsxs("div",{className:"bg-white px-6 py-3 flex justify-between items-center border-b",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:" "}),t.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:"  "}),t.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:""})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:" "}),t.jsx("input",{type:"range",min:"1",max:"3",value:g,onChange:S=>f(parseInt(S.target.value)),className:"w-24"})]})]}),t.jsxs("div",{className:"bg-white",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left",children:t.jsx("input",{type:"checkbox",onChange:S=>{S.target.checked?u(b.map(E=>E.id)):u([])},className:"w-4 h-4"})}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"-"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""})]})}),t.jsx("tbody",{children:r?t.jsx("tr",{children:t.jsx("td",{colSpan:"12",className:"px-4 py-8 text-center text-gray-500",children:"..."})}):b.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"12",className:"px-4 py-8 text-center text-gray-500",children:"  "})}):b.map(S=>t.jsxs("tr",{className:`border-b hover:bg-gray-50 ${g===1?"h-12":g===2?"h-16":"h-24"}`,children:[t.jsx("td",{className:"px-4",children:t.jsx("input",{type:"checkbox",checked:i.includes(S.id),onChange:()=>z(S.id),className:"w-4 h-4"})}),t.jsx("td",{className:"px-4",children:t.jsx("div",{className:`bg-gray-200 rounded flex items-center justify-center text-gray-400 ${g===1?"w-10 h-10":g===2?"w-12 h-12":"w-16 h-16"}`,children:""})}),t.jsx("td",{className:"px-4",children:t.jsx("button",{onClick:()=>e(`/products/${S.id}`),className:"text-blue-600 hover:underline font-medium",children:S.name})}),t.jsx("td",{className:"px-4 text-sm text-gray-600",children:S.size||"-"}),t.jsx("td",{className:"px-4",children:t.jsx("button",{className:"text-blue-600 hover:underline text-sm",children:""})}),t.jsx("td",{className:"px-4 text-sm text-gray-600",children:S.brand||"-"}),t.jsx("td",{className:"px-4",children:t.jsx("button",{className:"text-yellow-500 hover:text-yellow-600",children:""})}),t.jsx("td",{className:"px-4 text-sm text-gray-600",children:S.barcode||"-"}),t.jsx("td",{className:"px-4 text-sm text-gray-600",children:S.sku||"-"}),t.jsx("td",{className:"px-4 text-sm font-semibold text-gray-800",children:S.price?`${S.price} `:"-"}),t.jsx("td",{className:"px-4 text-sm text-gray-600",children:S.stock_quantity||0}),t.jsx("td",{className:"px-4",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>e(`/products/${S.id}/edit`),className:"text-blue-600 hover:underline text-sm",children:""}),t.jsx("button",{className:"text-red-600 hover:underline text-sm",children:""})]})})]},S.id))})]})}),t.jsxs("div",{className:"px-6 py-4 flex justify-between items-center border-t",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("select",{className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[t.jsx("option",{children:"50"}),t.jsx("option",{children:"100"}),t.jsx("option",{children:"200"})]}),t.jsx("span",{className:"text-sm text-gray-600",children:"  "})]}),t.jsxs("div",{className:"text-sm text-gray-600",children:[" 1  1 |  : ",i.length]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-100 text-sm",children:""}),t.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-100 text-sm",children:""}),t.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-100 text-sm",children:""}),t.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-100 text-sm",children:""})]})]})]}),t.jsx("div",{className:"fixed left-0 top-16 w-64 bg-gray-800 text-white h-full overflow-y-auto hidden",children:t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"font-semibold mb-2",children:""}),t.jsxs("ul",{className:"space-y-1 text-sm",children:[t.jsx("li",{children:t.jsx("a",{href:"/products",className:"block px-3 py-2 rounded hover:bg-gray-700",children:""})}),t.jsx("li",{children:t.jsx("a",{href:"/products/import",className:"block px-3 py-2 rounded hover:bg-gray-700",children:" "})}),t.jsx("li",{children:t.jsx("a",{href:"/products/merge",className:"block px-3 py-2 rounded hover:bg-gray-700",children:""})}),t.jsx("li",{children:t.jsx("a",{href:"/products/photos",className:"block px-3 py-2 rounded hover:bg-gray-700",children:""})}),t.jsx("li",{children:t.jsx("a",{href:"/products/categories",className:"block px-3 py-2 rounded hover:bg-gray-700",children:""})}),t.jsx("li",{children:t.jsx("a",{href:"/products/brands",className:"block px-3 py-2 rounded hover:bg-gray-700",children:""})}),t.jsx("li",{children:t.jsx("a",{href:"/products/manufacturers",className:"block px-3 py-2 rounded hover:bg-gray-700",children:""})}),t.jsx("li",{children:t.jsx("a",{href:"/products/parameters",className:"block px-3 py-2 rounded hover:bg-gray-700",children:""})})]})]})})]})},G0="http://localhost:8001",J0=()=>{const[e,s]=p.useState([]),[n,r]=p.useState(!0),[a,l]=p.useState("MAin"),[o,d]=p.useState(!0),[m,i]=p.useState(!0),[u,c]=p.useState(!1),[h,g]=p.useState(!1),[f,v]=p.useState(""),[w,x]=p.useState([]);p.useEffect(()=>{y()},[]);const y=async()=>{try{const _=localStorage.getItem("token"),P=await ze.get(`${G0}/api/stock`,{headers:{Authorization:`Bearer ${_}`}});s(P.data),r(!1)}catch(_){console.error("Error fetching stock:",_),r(!1)}},j=e.filter(_=>{var P,k,z;return((P=_.product_name)==null?void 0:P.toLowerCase().includes(f.toLowerCase()))||((k=_.sku)==null?void 0:k.toLowerCase().includes(f.toLowerCase()))||((z=_.barcode)==null?void 0:z.toLowerCase().includes(f.toLowerCase()))});return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("div",{className:"bg-white border-b px-6 py-4",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"   "}),t.jsxs("div",{className:"flex gap-4 items-center mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),t.jsxs("select",{value:a,onChange:_=>l(_.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[t.jsx("option",{value:"MAin",children:"MAin"}),t.jsx("option",{value:"all",children:" "})]})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:_=>d(_.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:m,onChange:_=>i(_.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:"  "})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:u,onChange:_=>c(_.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:h,onChange:_=>g(_.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:'  ""'})]})]})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx("input",{type:"text",value:f,onChange:_=>v(_.target.value),placeholder:"  , -, , ",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),t.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:""})]})]}),t.jsx("div",{className:"bg-white border-b px-6",children:t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{className:"px-6 py-3 bg-blue-500 text-white font-semibold border-b-2 border-blue-600",children:""}),t.jsx("button",{className:"px-6 py-3 text-gray-600 hover:bg-gray-50",children:""}),t.jsx("button",{className:"px-6 py-3 text-gray-600 hover:bg-gray-50",children:" "}),t.jsx("button",{className:"px-6 py-3 text-gray-600 hover:bg-gray-50",children:""}),t.jsx("button",{className:"px-6 py-3 text-gray-600 hover:bg-gray-50",children:""}),t.jsx("button",{className:"px-6 py-3 text-gray-600 hover:bg-gray-50",children:""})]})}),t.jsxs("div",{className:"bg-white px-6 py-3 flex justify-between items-center border-b",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:" "}),t.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:"  "}),t.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:""})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:" "}),t.jsx("input",{type:"range",min:"1",max:"3",className:"w-24"})]})]}),t.jsxs("div",{className:"bg-white",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left",children:t.jsx("input",{type:"checkbox",className:"w-4 h-4"})}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"  ..."}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:" "}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"-"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"  / "}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"SKU"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"ID"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:" "}),h&&t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:""})]})}),t.jsx("tbody",{children:n?t.jsx("tr",{children:t.jsx("td",{colSpan:"20",className:"px-4 py-8 text-center text-gray-500",children:"..."})}):j.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"20",className:"px-4 py-8 text-center text-gray-500",children:"  "})}):j.map((_,P)=>t.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("input",{type:"checkbox",className:"w-4 h-4"})}),t.jsx("td",{className:"px-4 py-3",children:_.error&&t.jsx("span",{className:"text-red-600",children:""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded flex items-center justify-center text-gray-400",children:""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-blue-600 hover:underline cursor-pointer font-medium",children:_.product_name||" "})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.size||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-800",children:_.quantity||0}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{className:"text-blue-600 hover:underline text-sm",children:""})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.reserved||0}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.location||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{className:"text-blue-600 hover:underline text-sm",children:""})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.barcode||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.size||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{className:"text-blue-600 hover:underline text-sm",children:""})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.brand||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.color||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"text-gray-600 hover:text-gray-800",children:""}),t.jsx("button",{className:"text-red-600 hover:text-red-800",children:""})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.sku||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.id||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.seller_sku||"-"}),h&&t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{className:"text-blue-600 hover:underline text-sm",children:""})})]},P))})]})}),t.jsxs("div",{className:"px-6 py-4 flex justify-between items-center border-t",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("select",{className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[t.jsx("option",{children:"200"}),t.jsx("option",{children:"50"}),t.jsx("option",{children:"100"})]}),t.jsx("span",{className:"text-sm text-gray-600",children:"  "})]}),t.jsx("div",{className:"text-sm text-gray-600",children:"0 - 0  0.  1  1"}),t.jsx("div",{className:"flex gap-1",children:t.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-100 text-sm",children:" : 0"})})]})]})]})},X0=()=>{const{id:e}=Sl(),s=Dt(),{api:n}=de(),[r,a]=p.useState(null),[l,o]=p.useState(!0),[d,m]=p.useState(!1),[i,u]=p.useState(!1),[c,h]=p.useState(!1),[g,f]=p.useState(""),[v,w]=p.useState([]),[x,y]=p.useState(""),[j,_]=p.useState(!1),[P,k]=p.useState([]),[z,b]=p.useState(""),[S,E]=p.useState(""),[N,R]=p.useState({name:"",is_fbo:!1,send_stock:!0,load_orders:!0,use_for_orders:!0,priority:0,default_cell:"",description:"",longitude:null,latitude:null,address:"",brand:"",working_hours:"",assembly_hours:0,storage_days:0,online_payment:!1,cash_payment:!1,card_payment:!1,show_on_goods:!1});p.useEffect(()=>{I(),L()},[e]);const I=async()=>{try{const C=await n.get(`/api/warehouses/${e}`);a(C.data),R({name:C.data.name||"",is_fbo:C.data.is_fbo||!1,send_stock:C.data.send_stock!==!1,load_orders:C.data.load_orders!==!1,use_for_orders:C.data.use_for_orders!==!1,priority:C.data.priority||0,default_cell:C.data.default_cell||"",description:C.data.description||"",longitude:C.data.longitude,latitude:C.data.latitude,address:C.data.address||"",brand:C.data.brand||"",working_hours:C.data.working_hours||"",assembly_hours:C.data.assembly_hours||0,storage_days:C.data.storage_days||0,online_payment:C.data.online_payment||!1,cash_payment:C.data.cash_payment||!1,card_payment:C.data.card_payment||!1,show_on_goods:C.data.show_on_goods||!1}),o(!1)}catch(C){console.error("Error fetching warehouse:",C),o(!1)}},L=async()=>{try{const C=await n.get(`/api/warehouses/${e}/links`);k(C.data||[])}catch(C){console.error("Error fetching warehouse links:",C)}},T=async C=>{var q,J;if(!C){w([]);return}_(!0);try{const O=await n.get(`/api/marketplaces/${C}/all-warehouses`);w(O.data.warehouses||[]),O.data.warehouses.length===0&&O.data.message&&alert(O.data.message)}catch(O){console.error("Error loading MP warehouses:",O),alert("  : "+(((J=(q=O.response)==null?void 0:q.data)==null?void 0:J.detail)||O.message))}finally{_(!1)}},A=C=>{f(C),y(""),w([]),b(""),E(""),C&&C!=="yandex"&&T(C)},H=async()=>{var C,q;if(!g){alert(" ");return}if(g==="yandex"){if(!z||!S){alert(" ID     .");return}}else if(!x){alert("   ");return}try{let J;if(g==="yandex"){const W=(await n.get("/api/seller/api-keys")).data.find(se=>se.marketplace==="yandex");if(!W){alert("   .   ");return}J={integration_id:W.id,marketplace_name:"yandex",marketplace_warehouse_id:z,marketplace_warehouse_name:S}}else{const O=v.find(W=>W.id===x);J={integration_id:O.integration_id,marketplace_name:g,marketplace_warehouse_id:O.id,marketplace_warehouse_name:O.name}}await n.post(`/api/warehouses/${e}/links`,J),await L(),f(""),y(""),w([]),b(""),E(""),alert(`    ${g.toUpperCase()} !`)}catch(J){console.error("Error adding link:",J),alert(": "+(((q=(C=J.response)==null?void 0:C.data)==null?void 0:q.detail)||J.message))}},D=async C=>{var q,J;if(confirm(" ?"))try{await n.delete(`/api/warehouses/${e}/links/${C}`),alert("  "),L()}catch(O){console.error("Error deleting link:",O),alert(": "+(((J=(q=O.response)==null?void 0:q.data)==null?void 0:J.detail)||O.message))}},B=(C,q)=>{R(J=>({...J,[C]:q}))},$=async()=>{m(!0);try{await n.put(`/api/warehouses/${e}`,N),alert("  "),s(-1)}catch(C){console.error("Error saving warehouse:",C),alert("   ")}finally{m(!1)}},Q=async()=>{if(confirm(" ,     ?"))try{await n.delete(`/api/warehouses/${e}`),alert(" "),s(-1)}catch(C){console.error("Error deleting warehouse:",C),alert("   ")}};return l?t.jsx("div",{className:"min-h-screen bg-mm-black flex items-center justify-center",children:t.jsx("p",{className:"text-mm-cyan",children:"..."})}):t.jsx("div",{className:"min-h-screen bg-mm-black text-gray-100 p-8",children:t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("button",{onClick:()=>s(-1),className:"text-mm-cyan hover:text-cyan-400 mb-4",children:" "}),t.jsx("h1",{className:"text-3xl font-bold text-mm-cyan",children:" "})]}),t.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),t.jsx("input",{type:"text",value:N.name,onChange:C=>B("name",C.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-800 p-2 rounded transition",children:[t.jsx("input",{type:"checkbox",checked:N.is_fbo,onChange:C=>B("is_fbo",C.target.checked),className:"w-5 h-5 rounded"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"    FBO"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"  FIFO   FBO"})]})]}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-800 p-2 rounded transition",children:[t.jsx("input",{type:"checkbox",checked:N.send_stock,onChange:C=>B("send_stock",C.target.checked),className:"w-5 h-5 rounded"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:" "}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"SelSup      .   ."})]})]}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-800 p-2 rounded transition",children:[t.jsx("input",{type:"checkbox",checked:N.load_orders,onChange:C=>B("load_orders",C.target.checked),className:"w-5 h-5 rounded"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:" "}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"    .   ."})]})]}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-800 p-2 rounded transition",children:[t.jsx("input",{type:"checkbox",checked:N.use_for_orders,onChange:C=>B("use_for_orders",C.target.checked),className:"w-5 h-5 rounded"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"  "}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"    .    ."})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"  "}),t.jsx("input",{type:"number",value:N.priority,onChange:C=>B("priority",parseInt(C.target.value)||0),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-3 text-mm-cyan",children:"   "}),t.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-3 mb-4",children:t.jsxs("p",{className:"text-xs text-blue-300",children:[" ",t.jsx("strong",{children:":"}),'   SelSup ,        .  " "     ,      .']})}),t.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg mb-4 space-y-3",children:[t.jsx("p",{className:"text-xs text-mm-cyan mb-3",children:"   FBS     "}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs mb-1 font-mono",children:"1  "}),t.jsxs("select",{value:g,onChange:C=>A(C.target.value),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded focus:outline-none focus:border-mm-cyan text-sm",children:[t.jsx("option",{value:"",children:"--   --"}),t.jsx("option",{value:"ozon",children:"OZON"}),t.jsx("option",{value:"wb",children:"WILDBERRIES"}),t.jsx("option",{value:"yandex",children:"YANDEX.MARKET"})]})]}),g&&g!=="yandex"&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs mb-1 font-mono",children:["2   FBS",j&&t.jsx("span",{className:"ml-2 text-mm-cyan animate-pulse",children:"..."})]}),t.jsxs("select",{value:x,onChange:C=>y(C.target.value),disabled:j,className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded focus:outline-none focus:border-mm-cyan text-sm disabled:opacity-50",children:[t.jsx("option",{value:"",children:"--   --"}),v.map(C=>t.jsxs("option",{value:C.id,children:[C.name," (ID: ",C.id,") ",C.integration_name?`[${C.integration_name}]`:""]},C.id))]}),v.length===0&&!j&&t.jsxs("p",{className:"text-xs text-yellow-400 mt-1",children:["   .  :",t.jsx("br",{}),"      ",g.toUpperCase(),"   ",t.jsx("br",{}),"  FBS     ",g.toUpperCase()]})]}),g==="yandex"&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded p-2",children:t.jsxs("p",{className:"text-xs text-yellow-300",children:[" ",t.jsx("strong",{children:".:"})," ID     API.     .    "]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs mb-1 font-mono",children:"2 ID  ."}),t.jsx("input",{type:"text",value:z,onChange:C=>b(C.target.value),placeholder:" ID    ",className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded focus:outline-none focus:border-mm-cyan text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs mb-1 font-mono",children:" "}),t.jsx("input",{type:"text",value:S,onChange:C=>E(C.target.value),placeholder:"  ",className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded focus:outline-none focus:border-mm-cyan text-sm"})]})]}),t.jsxs("button",{onClick:H,disabled:!g||g==="yandex"&&(!z||!S)||g!=="yandex"&&!x,className:"w-full px-4 py-2 bg-mm-purple hover:bg-purple-600 rounded transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[t.jsx(Ct,{}),t.jsx("span",{children:" "})]})]}),P.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:" :"}),P.map((C,q)=>{var J;return t.jsxs("div",{className:"bg-gray-800 px-4 py-3 rounded flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-sm font-medium",children:[(J=C.marketplace_name)==null?void 0:J.toUpperCase()," - ",C.marketplace_warehouse_name]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",C.marketplace_warehouse_id]})]}),t.jsx("button",{onClick:()=>D(C.id),className:"px-3 py-2 text-red-400 hover:bg-red-400/10 rounded transition",children:t.jsx(Kt,{})})]},q)})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"    "}),t.jsx("input",{type:"text",value:N.default_cell,onChange:C=>B("default_cell",C.target.value),placeholder:" ",className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan"})]}),t.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[t.jsxs("button",{onClick:()=>u(!i),className:"flex items-center space-x-2 text-mm-cyan hover:text-cyan-400 transition",children:[t.jsx("span",{className:"text-xl",children:i?"":""}),t.jsx("span",{className:"font-medium",children:"  "})]}),i&&t.jsxs("div",{className:"mt-4 space-y-4 pl-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2",children:""}),t.jsx("textarea",{value:N.description,onChange:C=>B("description",C.target.value),rows:3,className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2",children:""}),t.jsx("input",{type:"number",step:"0.000001",value:N.longitude||"",onChange:C=>B("longitude",parseFloat(C.target.value)||null),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2",children:""}),t.jsx("input",{type:"number",step:"0.000001",value:N.latitude||"",onChange:C=>B("latitude",parseFloat(C.target.value)||null),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2",children:"  "}),t.jsx("input",{type:"text",value:N.address,onChange:C=>B("address",C.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2",children:",    "}),t.jsx("input",{type:"text",value:N.brand,onChange:C=>B("brand",C.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2",children:" "}),t.jsx("input",{type:"text",value:N.working_hours,onChange:C=>B("working_hours",C.target.value),placeholder:": - 9:00-18:00",className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2",children:"-    "}),t.jsx("input",{type:"number",value:N.assembly_hours,onChange:C=>B("assembly_hours",parseInt(C.target.value)||0),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2",children:"-   "}),t.jsx("input",{type:"number",value:N.storage_days,onChange:C=>B("storage_days",parseInt(C.target.value)||0),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-mm-cyan"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:" :"}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:N.online_payment,onChange:C=>B("online_payment",C.target.checked),className:"w-5 h-5 rounded"}),t.jsx("span",{children:" "})]}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:N.cash_payment,onChange:C=>B("cash_payment",C.target.checked),className:"w-5 h-5 rounded"}),t.jsx("span",{children:"  "})]}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:N.card_payment,onChange:C=>B("card_payment",C.target.checked),className:"w-5 h-5 rounded"}),t.jsx("span",{children:"  "})]})]}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:N.show_on_goods,onChange:C=>B("show_on_goods",C.target.checked),className:"w-5 h-5 rounded"}),t.jsx("span",{children:"   Goods"})]})]})]}),t.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-700",children:[t.jsx("button",{onClick:Q,disabled:(r==null?void 0:r.type)==="main",className:"px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:""}),t.jsx("button",{onClick:$,disabled:d,className:"px-8 py-2 bg-mm-cyan hover:bg-cyan-400 text-black font-bold rounded-lg transition disabled:opacity-50",children:d?"...":""})]})]})]})})},Cc=()=>{const[e,s]=p.useState(!1),n=p.useRef(null),r=Dt(),a=Hs(),l=[{label:"",path:"/catalog/products",icon:jp},{label:"",path:"/catalog/categories",icon:We},{label:"",path:"/catalog/pricing",icon:cn},{label:"",path:"/catalog/matching",icon:vr},{label:" ",path:"/catalog/import",icon:ss}],o=l.find(i=>a.pathname===i.path),d=o?o.label:"";p.useEffect(()=>{const i=u=>{n.current&&!n.current.contains(u.target)&&s(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const m=i=>{s(!1),r(i)};return t.jsxs("div",{className:"relative inline-block",ref:n,children:[t.jsxs("button",{onClick:()=>s(!e),className:"px-4 py-2 bg-mm-secondary text-mm-cyan hover:bg-mm-secondary/80 rounded flex items-center gap-2 font-mono uppercase text-sm",children:[t.jsx(We,{className:"w-4 h-4"}),d,t.jsx(Ol,{className:`w-4 h-4 transition-transform ${e?"rotate-180":""}`})]}),e&&t.jsx("div",{className:"absolute left-0 mt-2 bg-white rounded-lg shadow-2xl border-2 border-gray-300 py-2 z-[9999] min-w-[220px]",children:l.map((i,u)=>{const c=i.icon,h=a.pathname===i.path;return t.jsxs("button",{onClick:()=>m(i.path),className:`w-full text-left px-4 py-3 hover:bg-gray-100 flex items-center gap-3 text-sm transition-colors font-medium ${h?"bg-blue-50 text-blue-600":"text-gray-700 hover:text-blue-600"}`,children:[t.jsx(c,{className:"w-4 h-4"}),i.label,h&&t.jsx("span",{className:"ml-auto text-xs text-blue-500",children:""})]},u)})})]})};function Z0(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!1),[l,o]=p.useState({});p.useEffect(()=>{d()},[]);const d=async()=>{a(!0);try{const h=(await e.get("/api/categories/mappings")).data||[];n(h),await m(h)}catch(c){console.error("Failed to load mappings:",c)}finally{a(!1)}},m=async c=>{try{const g=(await e.get("/api/catalog/products?limit=1000")).data.products||[],f={};c.forEach(v=>{const w=g.filter(x=>x.category_mapping_id===v.id).length;f[v.id]=w}),o(f)}catch(h){console.error("Failed to load product counts:",h)}},i=async(c,h)=>{var v,w;const g=l[c]||0;let f=`      "${h}"?`;if(g>0&&(f+=`

 : ${g}    !
      .`),f+=`

   .`,!!confirm(f))try{await e.delete(`/api/categories/mappings/${c}`),alert("  !"),d()}catch(x){alert("  : "+(((w=(v=x.response)==null?void 0:v.data)==null?void 0:w.detail)||x.message))}},u=c=>{var v,w,x;const h=!!((v=c.marketplace_categories)!=null&&v.ozon),g=!!((w=c.marketplace_categories)!=null&&w.wildberries),f=!!((x=c.marketplace_categories)!=null&&x.yandex);return{hasOzon:h,hasWB:g,hasYandex:f}};return t.jsxs("div",{className:"min-h-screen bg-mm-black text-mm-text p-6",children:[t.jsxs("div",{className:"max-w-7xl mx-auto mb-6",children:[t.jsxs("button",{onClick:()=>window.location.href="/dashboard",className:"text-mm-cyan hover:underline mb-4 flex items-center gap-2",children:[t.jsx(gp,{}),"   "]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Cc,{}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-mm-cyan mb-2",children:""}),t.jsx("p",{className:"text-gray-400 text-sm",children:"   "})]})]}),t.jsxs("button",{onClick:d,disabled:r,className:"px-4 py-2 bg-mm-cyan text-mm-dark hover:bg-mm-cyan/90 rounded font-semibold flex items-center gap-2 disabled:opacity-50",children:[t.jsx(qe,{className:r?"animate-spin":""}),""]})]})]}),t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-mm-secondary border border-mm-border rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl font-bold text-mm-cyan",children:s.length}),t.jsx("div",{className:"text-sm text-gray-400",children:" "})]}),t.jsxs("div",{className:"bg-mm-secondary border border-mm-border rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-400",children:s.filter(c=>{var h;return(h=c.marketplace_categories)==null?void 0:h.wildberries}).length}),t.jsx("div",{className:"text-sm text-gray-400",children:" Wildberries"})]}),t.jsxs("div",{className:"bg-mm-secondary border border-mm-border rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-400",children:s.filter(c=>{var h;return(h=c.marketplace_categories)==null?void 0:h.ozon}).length}),t.jsx("div",{className:"text-sm text-gray-400",children:" Ozon"})]})]}),t.jsx("div",{className:"bg-cyan-900/20 border border-cyan-600/30 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("div",{className:"flex-1 text-sm text-cyan-200",children:[t.jsx("p",{className:"font-semibold mb-1",children:"  "}),t.jsx("p",{className:"text-cyan-300/80",children:"                .           ."})]})]})}),r?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-mm-cyan border-t-transparent"}),t.jsx("p",{className:"mt-4 text-gray-400",children:"..."})]}):s.length===0?t.jsxs("div",{className:"bg-mm-secondary border border-mm-border rounded-lg p-12 text-center",children:[t.jsx(We,{className:"mx-auto text-6xl text-gray-600 mb-4"}),t.jsx("p",{className:"text-gray-400 mb-2",children:" "}),t.jsx("p",{className:"text-sm text-gray-500",children:"       "})]}):t.jsx("div",{className:"bg-mm-secondary border border-mm-border rounded-lg overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border bg-mm-dark",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-semibold",children:" "}),t.jsx("th",{className:"text-center py-4 px-3 text-mm-text-secondary uppercase text-xs font-semibold",children:" Ozon"}),t.jsx("th",{className:"text-center py-4 px-3 text-mm-text-secondary uppercase text-xs font-semibold",children:" WB"}),t.jsx("th",{className:"text-center py-4 px-3 text-mm-text-secondary uppercase text-xs font-semibold",children:" Yandex"}),t.jsx("th",{className:"text-center py-4 px-3 text-mm-text-secondary uppercase text-xs font-semibold",children:""}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-xs font-semibold",children:""})]})}),t.jsx("tbody",{children:s.map(c=>{const{hasOzon:h,hasWB:g,hasYandex:f}=u(c),v=l[c.id]||0;return t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition",children:[t.jsxs("td",{className:"py-4 px-4",children:[t.jsx("div",{className:"font-medium text-white",children:c.internal_name}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["ID: ",c.id]})]}),t.jsx("td",{className:"py-4 px-3 text-center",children:h?t.jsxs("div",{children:[t.jsx("span",{className:"inline-block px-2 py-1 bg-blue-600/20 text-blue-300 rounded text-xs border border-blue-600/30",children:""}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:c.marketplace_categories.ozon})]}):t.jsx("span",{className:"text-gray-600",children:""})}),t.jsx("td",{className:"py-4 px-3 text-center",children:g?t.jsxs("div",{children:[t.jsx("span",{className:"inline-block px-2 py-1 bg-purple-600/20 text-purple-300 rounded text-xs border border-purple-600/30",children:""}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:c.marketplace_categories.wildberries})]}):t.jsx("span",{className:"text-gray-600",children:""})}),t.jsx("td",{className:"py-4 px-3 text-center",children:f?t.jsxs("div",{children:[t.jsx("span",{className:"inline-block px-2 py-1 bg-yellow-600/20 text-yellow-300 rounded text-xs border border-yellow-600/30",children:""}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:c.marketplace_categories.yandex})]}):t.jsx("span",{className:"text-gray-600",children:""})}),t.jsx("td",{className:"py-4 px-3 text-center",children:t.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-cyan-600/20 text-cyan-300 rounded border border-cyan-600/30",children:[t.jsx(We,{size:12}),t.jsx("span",{className:"font-semibold",children:v})]})}),t.jsx("td",{className:"py-4 px-4 text-right",children:t.jsxs("button",{onClick:()=>i(c.id,c.internal_name),className:"px-3 py-2 border border-red-500 text-red-500 hover:bg-red-500/10 rounded transition inline-flex items-center gap-2",title:" ",children:[t.jsx(Kt,{size:14}),""]})})]},c.id)})})]})})]})]})}function ej({productName:e="",selectedMarketplaces:s=[],initialCategoryMappingId:n=null,onCategorySelected:r,onAttributesLoaded:a}){const{api:l}=de(),[o,d]=p.useState(""),[m,i]=p.useState([]),[u,c]=p.useState(null),[h,g]=p.useState({}),[f,v]=p.useState({}),[w,x]=p.useState(!1),[y,j]=p.useState(!1),[_,P]=p.useState(null),k={ozon:{border:"border-blue-500",bg:"bg-blue-50",text:"text-blue-700",badge:"bg-blue-100 text-blue-700"},wb:{border:"border-purple-500",bg:"bg-purple-50",text:"text-purple-700",badge:"bg-purple-100 text-purple-700"},yandex:{border:"border-yellow-500",bg:"bg-yellow-50",text:"text-yellow-700",badge:"bg-yellow-100 text-yellow-700"}},z={ozon:"Ozon",wb:"Wildberries",yandex:""};p.useEffect(()=>{(async()=>{if(!(!n||u)){j(!0);try{console.log("[UnifiedCategory] Loading initial category:",n);const A=(await l.get(`/api/categories/mappings/${n}`)).data;console.log("[UnifiedCategory] Initial category loaded:",A),c(A),r&&r(A)}catch(T){console.error("[UnifiedCategory] Failed to load initial category:",T)}finally{j(!1)}}})()},[n]),p.useEffect(()=>{e&&e.length>3&&!u&&(console.log(`[UnifiedCategory] Auto-suggesting for: "${e}"`),d(e))},[e,u]),p.useEffect(()=>{if(!o||o.length<2){i([]);return}const L=setTimeout(()=>{b()},500);return()=>clearTimeout(L)},[o]);const b=async()=>{x(!0),P(null);try{const T=(await l.get(`/api/categories/mappings/search?query=${encodeURIComponent(o)}`)).data.mappings||[];console.log(`[UnifiedCategory] Found ${T.length} category mappings`),i(T)}catch(L){console.error("Search error:",L),P("  ")}finally{x(!1)}},S=async L=>{console.log("[UnifiedCategory] Selected mapping:",L),c(L),d(""),i([]),r(L),await E(L)},E=async L=>{var H,D,B;x(!0);const T={},A={ozon:"ozon",wb:"wildberries",yandex:"yandex"};for(const $ of s){const Q=A[$]||$,C=(H=L.marketplace_categories)==null?void 0:H[Q];if(!C){console.log(`[UnifiedCategory] No category mapped for ${$} (dbKey: ${Q})`);continue}try{let q=`/api/categories/marketplace/${$}/${C}/attributes`;$==="ozon"&&((D=L.marketplace_type_ids)!=null&&D[Q])&&(q+=`?type_id=${L.marketplace_type_ids[Q]}`);const O=(await l.get(q)).data.attributes||[];console.log(`[UnifiedCategory] Loaded ${O.length} attributes for ${$}`),T[$]=O;for(const W of O)if(W.dictionary_id>0||W.type==="Dictionary"){const se=W.attribute_id||W.id,Z=$==="ozon"?(B=L.marketplace_type_ids)==null?void 0:B.ozon:null;await N($,C,se,Z)}}catch(q){console.error(`Failed to load attributes for ${$}:`,q)}}g(T),a(T),x(!1)},N=async(L,T,A,H=null)=>{try{let D=`/api/categories/marketplace/${L}/${T}/attribute-values?attribute_id=${A}`;H&&(D+=`&type_id=${H}`);const $=(await l.get(D)).data.values||[];v(Q=>({...Q,[`${L}_${A}`]:$}))}catch(D){console.error(`Failed to load values for ${L} attribute ${A}:`,D)}},I=(()=>{const L=new Map;for(const T of s){const A=h[T]||[];for(const H of A){const D=H.name||H.attribute_name||"";if(H.attribute_id||H.id,L.has(D)){const B=L.get(D);B.marketplaces.includes(T)||B.marketplaces.push(T),H.is_required&&B.required_for.push(T)}else L.set(D,{...H,original_mp:T,marketplaces:[T],required_for:H.is_required?[T]:[]})}}return Array.from(L.values())})();return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-mm-secondary border border-mm-border rounded-lg p-4",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[" ",t.jsx("span",{className:"text-red-400",children:"*"})]}),u?t.jsx("div",{className:"bg-green-900/20 border-2 border-green-500/50 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-600 rounded-full flex items-center justify-center",children:t.jsx(lt,{className:"text-white",size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-400",children:" :"}),t.jsx("p",{className:"text-lg font-bold text-green-300",children:u.internal_name})]})]}),t.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"  :"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Object.entries(u.marketplace_categories||{}).map(([L,T])=>{const A=k[L];return t.jsxs("div",{className:`rounded p-2 ${T?"bg-gray-700":"bg-gray-800 border border-gray-700 border-dashed"}`,children:[t.jsx("div",{className:"flex items-center gap-2 mb-1",children:t.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-medium ${(A==null?void 0:A.badge)||"bg-gray-600 text-gray-400"}`,children:z[L]})}),T?t.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",T]}):t.jsx("p",{className:"text-xs text-gray-500 italic",children:" "})]},L)})})]})]}),t.jsx("button",{onClick:()=>{c(null),g({})},className:"p-2 text-gray-400 hover:text-white transition flex-shrink-0",title:" ",children:t.jsx(Is,{size:18})})]})}):t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"bg-blue-900/20 border border-blue-600/30 rounded-lg p-3 mb-3",children:t.jsxs("p",{className:"text-xs text-blue-300",children:[" ",t.jsx("strong",{children:":"}),'        ! : " WB", " Ozon", "".          .']})}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:o,onChange:L=>d(L.target.value),placeholder:"    WB, Ozon, ... (. 2 )",className:"w-full px-4 py-3 pl-10 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-mm-cyan focus:ring-2 focus:ring-mm-cyan/50 outline-none",autoComplete:"off"}),t.jsx(hs,{className:"absolute left-3 top-3.5 text-gray-500"}),o.length>0&&o.length<2&&t.jsx("div",{className:"absolute right-3 top-3.5",children:t.jsxs("span",{className:"text-xs text-gray-500",children:[o.length,"/2"]})})]}),o.length>=2&&t.jsx("div",{className:"absolute z-50 mt-2 w-full bg-gray-800 border-2 border-mm-cyan rounded-lg shadow-2xl max-h-80 overflow-hidden",children:w?t.jsxs("div",{className:"p-6 text-center",children:[t.jsx(qe,{className:"animate-spin inline text-2xl text-mm-cyan mb-2"}),t.jsx("p",{className:"text-sm text-gray-400",children:" ..."})]}):_?t.jsxs("div",{className:"p-6 text-center",children:[t.jsx(cs,{className:"inline text-2xl text-red-400 mb-2"}),t.jsx("p",{className:"text-sm text-red-400",children:_})]}):m.length>0?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-gray-900 px-4 py-2 border-b border-gray-700",children:t.jsxs("p",{className:"text-xs text-mm-cyan font-medium",children:[" : ",m.length]})}),t.jsx("div",{className:"max-h-64 overflow-y-auto",children:m.map((L,T)=>t.jsxs("button",{onClick:()=>S(L),className:"w-full px-4 py-3 text-left hover:bg-mm-cyan/20 border-b border-gray-700 last:border-b-0 transition-colors focus:bg-mm-cyan/30 focus:outline-none",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[t.jsx("p",{className:"font-medium text-white",children:L.internal_name}),L.matched_category_name&&t.jsxs("span",{className:"text-xs text-gray-400 italic",children:["(",L.matched_category_name,")"]})]}),t.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:Object.entries(L.marketplace_categories||{}).map(([A,H])=>{if(!H)return null;const D=k[A];return t.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-medium ${(D==null?void 0:D.badge)||"bg-gray-700 text-gray-300"}`,children:z[A]},A)})})]},T))})]}):t.jsxs("div",{className:"p-6 text-center",children:[t.jsx(hs,{className:"inline text-3xl text-gray-600 mb-2"}),t.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"  "}),t.jsx("p",{className:"text-xs text-gray-500",children:"      "})]})})]})]}),u&&I.length>0&&t.jsxs("div",{className:"bg-mm-secondary border border-mm-border rounded-lg p-4",children:[t.jsxs("h3",{className:"font-bold text-mm-cyan mb-4",children:[" (",I.length,")"]}),t.jsx("div",{className:"space-y-3",children:I.map((L,T)=>{const A=L.attribute_id||L.id,H=L.name||L.attribute_name||"",D=L.original_mp,B=k[D],$=L.required_for.length>0,Q=`${D}_${A}`,C=f[Q]||[];return t.jsxs("div",{className:`p-3 rounded border-l-4 ${B.border} ${B.bg}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("label",{className:`block text-sm font-medium ${B.text}`,children:[H,$&&t.jsx("span",{className:"text-red-600 ml-1 text-lg",children:"*"})]}),t.jsx("div",{className:"flex gap-1",children:L.marketplaces.map(q=>{const J=k[q],O=L.required_for.includes(q);return t.jsxs("span",{className:`text-xs px-2 py-0.5 rounded font-medium ${J.badge}`,title:O?`  ${z[q]}`:z[q],children:[z[q],O&&" *"]},q)})})]}),C.length>0?t.jsxs("select",{className:`w-full px-3 py-2 border rounded focus:ring-2 outline-none ${$?"border-red-300 focus:ring-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500 bg-white"}`,required:$,children:[t.jsx("option",{value:"",children:$?"  ":" "}),C.map(q=>t.jsx("option",{value:q.id,children:q.value},q.id))]}):t.jsx("input",{type:"text",placeholder:$?"  ":" ",className:`w-full px-3 py-2 border rounded focus:ring-2 outline-none ${$?"border-red-300 focus:ring-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500 bg-white"}`,required:$}),L.description&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:L.description})]},T)})}),t.jsxs("div",{className:"border-t border-mm-border pt-3 mt-4",children:[t.jsx("p",{className:"text-xs text-mm-text-secondary mb-2",children:":"}),t.jsxs("div",{className:"flex gap-3 text-xs text-mm-text-secondary",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 rounded"}),t.jsx("span",{children:"Ozon"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 border-2 border-purple-500 rounded"}),t.jsx("span",{children:"Wildberries"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 border-2 border-yellow-500 rounded"}),t.jsx("span",{children:""})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-red-600 font-bold",children:"*"}),t.jsx("span",{children:""})]})]})]})]})]})}function tj({marketplace:e,currentMappingId:s,currentCategoryName:n="",onCategorySelected:r,onSkip:a}){const{api:l}=de(),[o,d]=p.useState([]),[m,i]=p.useState(!0),[u,c]=p.useState(""),[h,g]=p.useState(!1),[f,v]=p.useState(!1),w={ozon:{name:"Ozon",color:"blue",icon:"",borderClass:"border-blue-500",bgClass:"bg-blue-900/20",textClass:"text-blue-400"},wb:{name:"Wildberries",color:"purple",icon:"",borderClass:"border-purple-500",bgClass:"bg-purple-900/20",textClass:"text-purple-400"},yandex:{name:" ",color:"yellow",icon:"",borderClass:"border-yellow-500",bgClass:"bg-yellow-900/20",textClass:"text-yellow-400"}},x=w[e]||w.ozon;p.useEffect(()=>{n?y(n):i(!1)},[n,e]);const y=async P=>{i(!0);try{const z=(await l.get(`/api/categories/marketplace/${e}/search?query=${encodeURIComponent(P)}&limit=5`)).data.categories||[];console.log(`[QuickMatcher] Found ${z.length} similar ${e} categories for "${P}"`),d(z)}catch(k){console.error("[QuickMatcher] Search error:",k),d([])}finally{i(!1)}},j=async()=>{if(!(!u||u.length<2)){i(!0);try{const k=(await l.get(`/api/categories/marketplace/${e}/search?query=${encodeURIComponent(u)}&limit=10`)).data.categories||[];d(k)}catch(P){console.error("[QuickMatcher] Manual search error:",P)}finally{i(!1)}}},_=async P=>{var k,z;v(!0);try{const b=String(P.category_id||P.id),S=P.category_name||P.name,E=P.type_id||null;console.log(`[QuickMatcher] Selecting ${e} category:`,b,S);const N={mapping_id:s,marketplace:e,category_id:b,category_name:S};E&&e==="ozon"&&(N.type_id=E);const R=await l.post("/api/categories/mappings/quick-update",N);console.log("[QuickMatcher] Mapping updated:",R.data),r&&r(e,b,S,E)}catch(b){console.error("[QuickMatcher] Selection error:",b),alert(`: ${((z=(k=b.response)==null?void 0:k.data)==null?void 0:z.detail)||b.message}`)}finally{v(!1)}};return m?t.jsx("div",{className:`${x.bgClass} border ${x.borderClass} border-opacity-30 rounded-lg p-4`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ym,{className:`animate-spin ${x.textClass}`,size:20}),t.jsxs("p",{className:"text-sm text-gray-300",children:["   ",x.name,"..."]})]})}):t.jsxs("div",{className:`${x.bgClass} border ${x.borderClass} border-opacity-30 rounded-lg p-4`,children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx(cs,{className:`${x.textClass} flex-shrink-0 mt-0.5`,size:20}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h4",{className:`font-semibold ${x.textClass} mb-1`,children:[x.icon,"  ",x.name,"  "]}),t.jsxs("p",{className:"text-sm text-gray-400",children:[" : ",t.jsxs("span",{className:"text-white font-medium",children:['"',n,'"']})]})]})]}),!h&&o.length>0&&t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold",children:" :"}),o.slice(0,3).map((P,k)=>{const z=P.category_id||P.id,b=P.category_name||P.name;return t.jsx("button",{onClick:()=>_(P),disabled:f,className:`w-full text-left p-3 rounded border ${x.borderClass} border-opacity-40 hover:border-opacity-100 bg-gray-800/50 hover:bg-gray-700/50 transition-all group disabled:opacity-50`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[k===0&&t.jsx("span",{className:"text-yellow-400 mr-2",children:""}),t.jsx("span",{className:"text-white font-medium",children:b}),t.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["ID: ",z]})]}),t.jsx("span",{className:`px-3 py-1 rounded text-xs font-semibold ${x.textClass} border ${x.borderClass} border-opacity-50 group-hover:border-opacity-100 transition-all`,children:f?"...":" "})]})},z)}),o.length>3&&t.jsxs("button",{onClick:()=>g(!0),className:"text-sm text-gray-400 hover:text-gray-200 transition",children:["  ",o.length-3,"..."]})]}),h&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsx("input",{type:"text",value:u,onChange:P=>c(P.target.value),onKeyDown:P=>P.key==="Enter"&&j(),placeholder:`  ${x.name}...`,className:"w-full pl-10 pr-3 py-2 bg-gray-900 border border-gray-700 rounded text-white placeholder-gray-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/50 outline-none"})]}),t.jsx("button",{onClick:j,disabled:!u||m,className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded font-semibold disabled:opacity-50 transition",children:m?t.jsx(ym,{className:"animate-spin"}):""})]}),o.length>0&&t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:o.map(P=>{const k=P.category_id||P.id,z=P.category_name||P.name;return t.jsx("button",{onClick:()=>_(P),disabled:f,className:"w-full text-left p-2 rounded border border-gray-700 hover:border-gray-500 bg-gray-800/50 hover:bg-gray-700/50 transition group disabled:opacity-50",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-white text-sm",children:z}),t.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["ID: ",k]})]}),t.jsx("span",{className:"text-xs text-cyan-400 group-hover:text-cyan-300",children:f?"...":""})]})},k)})})]}),t.jsxs("div",{className:"flex gap-2 mt-3",children:[!h&&t.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 text-sm border border-gray-600 text-gray-300 hover:border-gray-400 hover:text-white rounded transition",children:"  "}),h&&t.jsx("button",{onClick:()=>{g(!1),y(n)},className:"px-4 py-2 text-sm border border-gray-600 text-gray-300 hover:border-gray-400 hover:text-white rounded transition",children:"   "}),t.jsx("button",{onClick:a,className:"px-4 py-2 text-sm text-gray-500 hover:text-gray-300 transition ml-auto",children:""})]}),o.length===0&&!m&&t.jsx("div",{className:"mt-3 text-sm text-gray-400 text-center py-4",children:"  .   ."})]})}function sj({marketplace:e,categoryId:s,typeId:n,attributeId:r,attributeName:a,value:l,onChange:o,placeholder:d=" ..."}){const{api:m}=de(),[i,u]=p.useState(""),[c,h]=p.useState([]),[g,f]=p.useState([]),[v,w]=p.useState(!1),[x,y]=p.useState(!1),[j,_]=p.useState(null),P=p.useRef(null);p.useEffect(()=>{s&&r&&k()},[s,r,n]),p.useEffect(()=>{if(!i)f(c.slice(0,50));else{const E=c.filter(N=>(N.value||"").toLowerCase().includes(i.toLowerCase()));f(E.slice(0,50))}},[i,c]),p.useEffect(()=>{const E=N=>{P.current&&!P.current.contains(N.target)&&y(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),p.useEffect(()=>{if(l&&c.length>0){const E=c.find(N=>N.id===l||N.value===l);E&&(_(E),u(E.value))}},[l,c]);const k=async()=>{w(!0);try{const E=new URLSearchParams({attribute_id:r});n&&E.append("type_id",n);const R=(await m.get(`/api/categories/marketplace/${e}/${s}/attribute-values?${E}`)).data.values||[];h(R),f(R.slice(0,50)),console.log(`[DictionaryAutocomplete] Loaded ${R.length} values for ${a}`)}catch(E){console.error("Failed to load dictionary values:",E),h([])}w(!1)},z=E=>{_(E),u(E.value),y(!1),o({value_id:E.id,value:E.value})},b=E=>{const N=E.target.value;u(N),y(!0),x||y(!0)},S=()=>{y(!0)};return t.jsxs("div",{ref:P,className:"relative",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:i,onChange:b,onFocus:S,placeholder:d,className:"w-full px-3 py-2 bg-[#0F172A] border border-[#334155] rounded text-white focus:border-[#22D3EE] focus:ring-2 focus:ring-[#22D3EE]/50 outline-none pr-10",disabled:v}),t.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[v&&t.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-[#22D3EE] border-t-transparent rounded-full"}),t.jsx(Ol,{className:`text-gray-400 transition-transform ${x?"rotate-180":""}`})]})]}),x&&!v&&g.length>0&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-[#1E293B] border border-[#334155] rounded-lg shadow-xl max-h-60 overflow-y-auto",children:[g.map((E,N)=>t.jsxs("button",{type:"button",onClick:()=>z(E),className:"w-full text-left px-3 py-2 hover:bg-[#22D3EE]/10 text-white text-sm border-b border-[#334155] last:border-b-0 transition-colors",children:[E.value,E.info&&t.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["(",E.info,")"]})]},E.id||N)),c.length>50&&t.jsxs("div",{className:"px-3 py-2 text-xs text-gray-400 bg-[#0F172A] border-t border-[#334155]",children:[" ",g.length,"  ",c.length,".     ."]})]}),x&&!v&&i&&g.length===0&&t.jsx("div",{className:"absolute z-50 w-full mt-1 bg-[#1E293B] border border-[#334155] rounded-lg shadow-xl p-3",children:t.jsx("p",{className:"text-sm text-gray-400",children:"  "})}),c.length>0&&!x&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",c.length," .    ."]})]})}function nj({selectedMarketplaces:e={},characteristicsByMarketplace:s={},valuesByMarketplace:n={},onChange:r,loading:a={},baseCharacteristics:l={},currentMappingId:o=null,currentCategoryName:d="",onMappingUpdated:m,onBaseCharacteristicChange:i,categoryMappings:u={}}){const c={wb:{name:"Wildberries",shortName:"WB",icon:"",color:{bg:"bg-purple-600",text:"text-purple-400",border:"border-purple-500",badge:"bg-purple-600/20 text-purple-300 border-purple-500/30"}},ozon:{name:"Ozon",shortName:"Ozon",icon:"",color:{bg:"bg-blue-600",text:"text-blue-400",border:"border-blue-500",badge:"bg-blue-600/20 text-blue-300 border-blue-500/30"}},yandex:{name:" ",shortName:"YM",icon:"",color:{bg:"bg-yellow-600",text:"text-yellow-400",border:"border-yellow-500",badge:"bg-yellow-600/20 text-yellow-300 border-yellow-500/30"}},base:{name:"",shortName:"",icon:"",color:{badge:"bg-gray-600/20 text-gray-300 border-gray-500/30"}}},h=p.useMemo(()=>Object.keys(e).filter(k=>e[k]),[e]),g=p.useMemo(()=>{const k=new Map;Object.keys(l||{}).forEach(b=>{!b||!b.trim()||k.set(b,{name:b,sources:["base"],requiredIn:[],isDictionary:!1,mpData:{}})}),h.forEach(b=>{(s[b]||[]).forEach(E=>{const N=E.name||E.attribute_name||E.charcName,R=E.id||E.attribute_id||E.charcID,I=E.is_required||E.required,L=E.dictionary_id>0||E.type==="Dictionary";k.has(N)||k.set(N,{name:N,sources:[],requiredIn:[],isDictionary:!1,mpData:{}});const T=k.get(N);T.sources.includes(b)||T.sources.push(b),L&&(T.isDictionary=!0),T.mpData[b]={id:R,isRequired:I,originalChar:E},I&&T.requiredIn.push(b)})});const z=Array.from(k.values());return z.sort((b,S)=>{const E=b.requiredIn.length>0,N=S.requiredIn.length>0;return E&&!N?-1:!E&&N?1:0}),z},[h,s,l]),f=(k,z,b)=>{console.log(`[Unified] Changing "${k}" = "${z}" for sources:`,b),b.forEach(S=>{var E;if(S==="base")i&&i(k,z);else if(r){const N=g.find(L=>L.name===k),R=(E=N==null?void 0:N.mpData)==null?void 0:E[S],I=(R==null?void 0:R.id)||k;r(S,I,k,z)}})},v=(k,z)=>{var b;if(z.includes("base")&&l[k])return l[k];for(const S of z){if(S==="base")continue;const E=(b=n[S])==null?void 0:b[k];if(E)return E}return""},w=k=>{var I,L,T,A;const{name:z,sources:b,requiredIn:S,isDictionary:E}=k,N=v(z,b),R=S.length>0;return t.jsxs("div",{className:"bg-[#1F2937] border border-[#334155] rounded-lg p-3",children:[t.jsx("label",{className:"block text-sm font-medium text-[#E5E7EB] mb-2",children:t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[R&&t.jsx(ga,{className:"text-red-500 flex-shrink-0",size:12}),t.jsx("span",{children:z}),t.jsx("div",{className:"flex items-center gap-1 ml-auto flex-wrap",children:b.map(H=>{var Q;if(H==="base"){const C=c.base;return t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-xs border rounded ${C.color.badge}`,title:" ",children:[C.icon," ",C.shortName]},H)}const D=c[H],B=(Q=k.mpData)==null?void 0:Q[H],$=B==null?void 0:B.isRequired;return t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-xs border rounded ${D.color.badge}`,title:$?`  ${D.name}`:` ${D.name}`,children:[D.icon," ",D.shortName,$&&t.jsx(ga,{size:8,className:"text-red-400"})]},H)})})]})}),E?t.jsx(sj,{marketplace:b.find(H=>H!=="base")||"ozon",categoryId:(I=u[b.find(H=>H!=="base")])==null?void 0:I.category_id,typeId:(L=u[b.find(H=>H!=="base")])==null?void 0:L.type_id,attributeId:(A=(T=k.mpData)==null?void 0:T[b.find(H=>H!=="base")])==null?void 0:A.id,attributeName:z,value:N,onChange:H=>{f(z,H.value,b)},placeholder:" ..."}):t.jsx("input",{type:"text",value:N,onChange:H=>f(z,H.target.value,b),className:"w-full px-3 py-2 bg-[#0F172A] border border-[#334155] rounded text-white focus:border-[#22D3EE] focus:ring-2 focus:ring-[#22D3EE]/50 outline-none",placeholder:R?" ":" "})]},z)};if(Object.values(a).some(k=>k))return t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 border-current border-t-transparent rounded-full text-[#22D3EE]",role:"status",children:t.jsx("span",{className:"sr-only",children:"..."})}),t.jsx("p",{className:"mt-2 text-gray-400",children:"  ..."})]});if(h.length===0)return t.jsx("div",{className:"bg-blue-900/20 border border-blue-600/30 rounded-lg p-4",children:t.jsxs("p",{className:"text-sm text-blue-300 flex items-center gap-2",children:[t.jsx(cs,{}),'     (" :"),   ']})});const y=h.filter(k=>(s[k]||[]).length===0),j=h.filter(k=>(s[k]||[]).length>0),_=g.filter(k=>k.requiredIn.length>0),P=g.filter(k=>k.requiredIn.length===0);return t.jsxs("div",{className:"space-y-6",children:[y.map(k=>t.jsx(tj,{marketplace:k,currentMappingId:o,currentCategoryName:d,onCategorySelected:(z,b,S,E)=>{console.log(`[UnifiedCharacteristics] Category selected for ${z}:`,b),m&&m(z,b,S,E)},onSkip:()=>{console.log(`[UnifiedCharacteristics] Skipped ${k} category selection`)}},`matcher-${k}`)),j.map(k=>{const z=c[k],b=u[k]||{};return t.jsx("div",{className:`${z.color.bg} border ${z.color.border} border-opacity-30 rounded-lg p-4`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-8 h-8 ${z.color.bg} text-white rounded flex items-center justify-center text-xs font-bold`,children:z.shortName}),t.jsxs("div",{children:[t.jsxs("p",{className:`text-sm font-semibold ${z.color.text}`,children:[z.name,": ",d]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",b.category_id," ",b.type_id?`| Type: ${b.type_id}`:""]})]})]}),t.jsxs("button",{type:"button",onClick:()=>{confirm(`  ${z.name}?

  .`)&&m&&m(k,null,null,null)},className:`px-3 py-1.5 ${z.color.bg} bg-opacity-80 hover:bg-opacity-100 text-white text-xs font-semibold rounded flex items-center gap-1.5 transition`,children:[t.jsx(cs,{size:14}),"  "]})]})},`info-${k}`)}),g.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border border-cyan-600/30 rounded-lg p-5",children:[t.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-cyan-600/30 mb-5",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-500"}),t.jsx("h3",{className:"text-xl font-bold text-cyan-400",children:"   "}),t.jsxs("span",{className:"text-sm text-gray-400",children:["(",g.length," )"]}),_.length>0&&t.jsxs("span",{className:"ml-auto text-xs text-red-400 flex items-center gap-1",children:[t.jsx(ga,{size:10}),_.length," "]})]}),_.length>0&&t.jsxs("div",{className:"mb-5",children:[t.jsxs("h4",{className:"text-sm font-semibold text-red-400 mb-3 flex items-center gap-2",children:[t.jsx(ga,{size:12}),"  (",_.length,")"]}),t.jsx("div",{className:"space-y-3",children:_.map(k=>w(k))})]}),P.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-400 mb-3",children:["  (",P.length,")"]}),t.jsx("div",{className:"space-y-3",children:P.map(k=>w(k))})]}),t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:t.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-2",children:[t.jsx(cs,{size:12}),"        "]})})]})]})}function bm(){var et,it,U,X,ne,ue;const{api:e}=de(),{id:s}=Sl(),n=Dt(),[r,a]=p.useState(!1),[l,o]=p.useState("card"),[d,m]=p.useState(!1),[i,u]=p.useState([]),[c,h]=p.useState({wb:!1,ozon:!1,yandex:!1,honest_sign:!1}),[g,f]=p.useState({wb:{name:"",description:"",characteristics:{}},ozon:{name:"",description:"",characteristics:{}},yandex:{name:"",description:"",characteristics:{}}}),[v,w]=p.useState({ozon:{category_id:null,category_name:"",type_id:null},wb:{category_id:null,category_name:""},yandex:{category_id:null,category_name:""}}),[x,y]=p.useState({ozon:{},wb:{},yandex:{}}),[j,_]=p.useState({wb:[],ozon:[],yandex:[]}),[P,k]=p.useState({wb:!1,ozon:!1,yandex:!1}),[z,b]=p.useState({wb:!1,ozon:!1,yandex:!1}),[S,E]=p.useState(null),[N,R]=p.useState({article:"",name:"",brand:"",category_id:"",description:"",status:"active",manufacturer:"",country_of_origin:"",label_name:"",price_with_discount:0,price_without_discount:0,price_coefficient:1,purchase_price:0,additional_expenses:0,cost_price:0,vat:0,weight:0,dimensions:{length:0,width:0,height:0},gender:"",season:"",composition:"",care_instructions:"",additional_info:"",website_link:"",characteristics:{}}),[I,L]=p.useState([]),[T,A]=p.useState([]),[H,D]=p.useState("");p.useEffect(()=>{B(),s&&($(),Q(),C())},[s]),p.useEffect(()=>{const F=N.purchase_price+N.additional_expenses;F!==N.cost_price&&R(G=>({...G,cost_price:F}))},[N.purchase_price,N.additional_expenses]),p.useEffect(()=>{let F=!1;const G={};Object.keys(c).forEach(te=>{var le;c[te]&&!((le=g[te])!=null&&le.name)&&(F=!0,G[te]={name:N.name,description:N.description,characteristics:N.characteristics})}),F&&f(te=>({...te,...G}))},[c.ozon,c.wb,c.yandex,c.honest_sign]);const B=async()=>{try{const F=await e.get("/api/catalog/categories");u(F.data)}catch(F){console.error("Failed to load categories:",F)}},$=async()=>{try{a(!0);const G=(await e.get(`/api/catalog/products/${s}`)).data;R({...G,dimensions:G.dimensions||{length:0,width:0,height:0},manufacturer:G.manufacturer||"",country_of_origin:G.country_of_origin||"",label_name:G.label_name||G.name||"",price_with_discount:G.price_with_discount||G.price||0,price_without_discount:G.price_without_discount||G.price||0,price_coefficient:G.price_coefficient||1,purchase_price:G.purchase_price||0,additional_expenses:G.additional_expenses||0,cost_price:G.cost_price||0,vat:G.vat||0,gender:G.gender||"",season:G.season||"",composition:G.composition||"",care_instructions:G.care_instructions||"",additional_info:G.additional_info||"",website_link:G.website_link||"",characteristics:G.characteristics||{}}),G.marketplace_specific_data&&f(G.marketplace_specific_data)}catch(F){alert("  : "+F.message),n("/dashboard")}finally{a(!1)}},Q=async()=>{try{const F=await e.get(`/api/catalog/products/${s}/variants`);L(F.data)}catch(F){console.error("Failed to load variants:",F)}},C=async()=>{try{const F=await e.get(`/api/catalog/products/${s}/photos`);A(F.data)}catch(F){console.error("Failed to load photos:",F)}},q=async()=>{var F,G;a(!0);try{const te={...N,price:N.price_with_discount,price_discounted:N.price_with_discount<N.price_without_discount?N.price_with_discount:null};if(Object.values(c).some(re=>re)&&s){const re=await e.post(`/api/catalog/products/${s}/save-with-marketplaces`,{product:te,marketplaces:c,marketplace_data:g,category_mappings:v,required_attributes:x});let Ne=re.data.message+`

`;const pe=re.data.marketplace_results||{};Object.keys(pe).forEach(be=>{const Fe=pe[be];Fe.success?Ne+=` ${be.toUpperCase()}: ${Fe.message}
`:Ne+=` ${be.toUpperCase()}: ${Fe.error}
`}),alert(Ne),$()}else if(s)await e.put(`/api/catalog/products/${s}`,te),alert("  !"),$();else{const re=await e.post("/api/catalog/products",te);alert("  !"),n(`/catalog/products/${re.data.id}/edit`)}}catch(te){alert(" : "+(((G=(F=te.response)==null?void 0:F.data)==null?void 0:G.detail)||te.message))}finally{a(!1)}},J=async F=>{var te,le;if(!s){alert("  ");return}const G=prompt(` ID   ${F.toUpperCase()}:`);if(G){a(!0);try{const re=await e.post(`/api/catalog/products/${s}/update-from-marketplace`,{marketplace:F,marketplace_product_id:G});alert(` ${re.data.message}

: ${re.data.details.name}
: ${re.data.details.description_length} 
: ${re.data.details.characteristics_count}
 : ${re.data.details.photos_added}`),$(),C()}catch(re){alert(" : "+(((le=(te=re.response)==null?void 0:te.data)==null?void 0:le.detail)||re.message))}finally{a(!1)}}},O=async F=>{var G,te;if(!s){alert("  ");return}if(confirm(`   ${F.toUpperCase()}?`)){a(!0);try{const le=await e.post(`/api/catalog/products/${s}/upload-media/${F}`);alert(` ${le.data.message}`)}catch(le){alert(" : "+(((te=(G=le.response)==null?void 0:G.data)==null?void 0:te.detail)||le.message))}finally{a(!1)}}},W=()=>{if(T.length===0){alert("   ");return}alert(`  ${T.length} 

     `)},se=()=>{if(!s){alert("  ");return}alert(`   

    (  )`)},Z=()=>{alert(`   

       ( )`)},oe=(F,G)=>{R(te=>({...te,[F]:G}))},Re=async(F,G)=>{var te,le,re,Ne;if(!G){alert("   ");return}k(pe=>({...pe,[F]:!0})),b(pe=>({...pe,[F]:!0}));try{const be={ozon:"ozon",wb:"wildberries",yandex:"yandex"}[F]||F,ie=(await e.get(`/api/categories/mappings/${G}`)).data;console.log("[loadMarketplaceCharacteristics] Mapping:",ie),console.log("[loadMarketplaceCharacteristics] Looking for key:",be);const fe=(te=ie.marketplace_categories)==null?void 0:te[be],xe=(le=ie.marketplace_type_ids)==null?void 0:le[be];if(console.log("[loadMarketplaceCharacteristics] Found categoryId:",fe,"typeId:",xe),!fe){console.warn(`Category not mapped to ${F}`),_(ns=>({...ns,[F]:[]}));return}let Ye=`/api/categories/marketplace/${F}/${fe}/attributes`;xe&&F==="ozon"&&(Ye+=`?type_id=${xe}`),console.log("[loadMarketplaceCharacteristics]  LOADING FROM:",Ye),console.log("[loadMarketplaceCharacteristics]  CATEGORY ID:",fe),console.log("[loadMarketplaceCharacteristics]  TYPE ID:",xe);const un=(await e.get(Ye)).data.attributes||[];console.log(`[loadMarketplaceCharacteristics]  RECEIVED ${un.length} CHARACTERISTICS`),console.log("[loadMarketplaceCharacteristics]  FIRST 3 CHARS:",un.slice(0,3).map(ns=>ns.name||ns.attribute_name)),_(ns=>({...ns,[F]:un})),console.log(`  ${un.length}   ${F}`)}catch(pe){console.error(`Failed to load ${F} characteristics:`,pe),alert(`   ${F}: ${((Ne=(re=pe.response)==null?void 0:re.data)==null?void 0:Ne.detail)||pe.message}`)}finally{k(pe=>({...pe,[F]:!1}))}};p.useEffect(()=>{(async()=>{if(console.log("[ProductForm] Loading characteristics, category_mapping_id:",N.category_mapping_id),console.log("[ProductForm] Selected marketplaces:",c),!N.category_mapping_id){console.log("[ProductForm] No category_mapping_id, skipping");return}for(const G of["ozon","wb","yandex"])c[G]&&!P[G]&&(console.log(`[ProductForm] Loading characteristics for ${G} (category: ${N.category_mapping_id})`),await Re(G,N.category_mapping_id))})()},[c.ozon,c.wb,c.yandex,N.category_mapping_id]),p.useEffect(()=>{if(!N.marketplace_data||Te.length<2)return;const G=setTimeout(()=>{const te=new Set,le={};Te.forEach(be=>{const Fe=j[be]||[];le[be]=Fe.map(ie=>ie.name||ie.attribute_name||ie.charcName),Fe.forEach(ie=>{const fe=ie.name||ie.attribute_name||ie.charcName;te.add(fe)})});const re=Array.from(te).filter(be=>Te.filter(ie=>{var fe;return(fe=le[ie])==null?void 0:fe.includes(be)}).length>1);if(re.length===0)return;let Ne=!1;const pe={...N.marketplace_data};re.forEach(be=>{const Fe=Te.find(ie=>{var fe,xe;return(xe=(fe=pe[ie])==null?void 0:fe.characteristics)==null?void 0:xe[be]});if(Fe){const ie=pe[Fe].characteristics[be];Te.forEach(fe=>{var xe,Ye,Gn;fe!==Fe&&((xe=le[fe])!=null&&xe.includes(be))&&((Gn=(Ye=pe[fe])==null?void 0:Ye.characteristics)!=null&&Gn[be]||(pe[fe]||(pe[fe]={characteristics:{}}),pe[fe].characteristics||(pe[fe].characteristics={}),pe[fe].characteristics[be]=ie,Ne=!0))})}}),Ne&&(console.log("[Migration] Migrated common characteristics values between marketplaces"),R(be=>({...be,marketplace_data:pe})))},500);return()=>clearTimeout(G)},[j,c]);const Te=Object.keys(c).filter(F=>c[F]),Ae=async()=>{const F=prompt(" URL :");if(F)try{const G=await e.post(`/api/catalog/products/${s}/photos`,{url:F,order:T.length+1,marketplaces:{wb:!0,ozon:!0,yandex:!0}});A([...T,G.data])}catch(G){alert(": "+G.message)}},Ie=async F=>{try{await e.delete(`/api/catalog/products/${s}/photos/${F}`),A(T.filter(G=>G.id!==F))}catch(G){alert(": "+G.message)}};return r&&s?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-mm-cyan"}),t.jsx("p",{className:"text-mm-text-secondary mt-4",children:"..."})]}):t.jsxs("div",{className:"min-h-screen bg-mm-dark pb-32",children:[t.jsxs("div",{className:"bg-mm-secondary border-b border-mm-border p-4",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[t.jsx("button",{onClick:()=>n("/dashboard"),className:"p-2 text-mm-text hover:text-mm-cyan transition",children:t.jsx(gp,{size:20})}),t.jsx("h1",{className:"text-2xl font-bold text-mm-text",children:s?` : ${N.article}`:" "})]}),s&&t.jsxs("div",{className:"flex items-center gap-1 p-2 bg-cyan-500 rounded relative",children:[t.jsx("button",{type:"button",onClick:q,title:"",className:"p-2 text-white hover:bg-white/20 rounded transition",children:t.jsx(Br,{size:18})}),t.jsx("button",{type:"button",title:" ",className:"p-2 text-white hover:bg-white/20 rounded transition",children:t.jsx(ss,{size:18})}),t.jsx("button",{type:"button",onClick:q,title:" ",className:"p-2 text-white hover:bg-white/20 rounded transition",children:t.jsx(lt,{size:18})}),t.jsx("button",{type:"button",title:" ",className:"p-2 text-white hover:bg-white/20 rounded transition text-lg",children:""}),t.jsx("button",{type:"button",onClick:Z,title:" ",className:"p-2 text-white hover:bg-white/20 rounded transition",children:t.jsx(ps,{size:18})}),t.jsx("button",{type:"button",onClick:se,title:"",className:"p-2 text-white hover:bg-white/20 rounded transition",children:t.jsx(Rl,{size:18})}),t.jsx("button",{type:"button",title:"  ",className:"p-2 text-white hover:bg-white/20 rounded transition text-lg",children:""}),t.jsx("button",{type:"button",onClick:()=>O("wb"),title:" Wildberries",className:"w-8 h-8 bg-purple-600 text-white rounded flex items-center justify-center hover:bg-purple-700 transition text-xs font-bold",children:"WB"}),t.jsx("button",{type:"button",onClick:()=>O("ozon"),title:" Ozon",className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center hover:bg-blue-700 transition text-xs font-bold",children:"O"}),t.jsx("button",{type:"button",onClick:W,title:" ",className:"p-2 text-white hover:bg-white/20 rounded transition",children:t.jsx(mt,{size:18})}),t.jsx("button",{type:"button",onClick:async()=>{if(confirm("  ?"))try{await e.delete(`/api/catalog/products/${s}`),alert("  "),n("/dashboard")}catch(F){alert(": "+F.message)}},title:" ",className:"p-2 text-white hover:bg-white/20 rounded transition",children:t.jsx(Kt,{size:18})}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{type:"button",onClick:()=>m(!d),title:" ",className:"p-2 text-white hover:bg-white/20 rounded transition",children:t.jsx(kp,{size:18})}),d&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)}),t.jsx("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:t.jsxs("div",{className:"py-2",children:[t.jsx("button",{onClick:()=>{alert(`    

    `),m(!1)},className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 transition",children:"    "}),t.jsx("button",{onClick:()=>{const F=prompt("   ? (wb, ozon, yandex)");F&&J(F),m(!1)},className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 transition",children:"  ,   "}),t.jsx("button",{onClick:()=>{const F=prompt("   ? (wb, ozon, yandex)");F&&J(F),m(!1)},className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 transition",children:"  "}),t.jsx("button",{onClick:()=>{W(),m(!1)},className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 transition",children:"    "}),t.jsx("button",{onClick:()=>{O("ozon"),m(!1)},className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 transition",children:"    Ozon"}),t.jsx("hr",{className:"my-2"}),t.jsx("button",{onClick:()=>{alert(`   

    `),m(!1)},className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 transition",children:"   "})]})})]})]})]}),s&&t.jsx("div",{className:"flex gap-1 mt-3 border-b border-mm-border overflow-x-auto",children:["card","keywords","analytics","prices","mass_edit","hypotheses","suppliers","stock","documents","duplicates"].map(F=>{const G={card:"",keywords:" ",analytics:"",prices:"",mass_edit:" ",hypotheses:"",suppliers:"",stock:"",documents:"",duplicates:""};return t.jsxs("button",{onClick:()=>o(F),className:`px-4 py-2 font-medium transition whitespace-nowrap relative ${l===F?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-text"}`,children:[G[F],F==="hypotheses"&&t.jsx("span",{className:"absolute -top-1 -right-1 px-1.5 py-0.5 text-[10px] bg-orange-500 text-white rounded font-bold",children:"NEW"})]},F)})})]}),t.jsx("div",{className:"max-w-[1600px] mx-auto px-6 py-6",children:t.jsxs("form",{onSubmit:F=>{F.preventDefault(),q()},children:[l==="card"&&t.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[t.jsx("div",{className:"col-span-3",children:t.jsxs("div",{className:"bg-mm-secondary p-4 rounded-lg sticky top-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-mm-text mb-3",children:""}),t.jsx("div",{className:"space-y-2",children:T.length===0?t.jsxs("div",{className:"border-2 border-dashed border-mm-border rounded-lg p-8 text-center",children:[t.jsx(yi,{className:"mx-auto text-4xl text-mm-text-secondary mb-2"}),t.jsx("p",{className:"text-sm text-mm-text-secondary",children:" "})]}):t.jsx("div",{className:"grid grid-cols-2 gap-2",children:T.map(F=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:F.url,alt:"Product",className:"w-full h-24 object-cover rounded bg-mm-dark"}),t.jsx("button",{type:"button",onClick:()=>Ie(F.id),className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition text-xs font-bold",children:""})]},F.id))})}),s&&t.jsx("button",{type:"button",onClick:Ae,className:"w-full mt-3 px-4 py-2 bg-mm-cyan text-mm-dark hover:bg-mm-cyan/90 rounded text-sm font-medium",children:"+  "})]})}),t.jsxs("div",{className:"col-span-9 space-y-6",children:[s&&t.jsx("div",{className:"bg-mm-secondary p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm text-mm-text",children:[t.jsx("span",{className:"text-mm-text-secondary",children:":"}),t.jsxs("span",{className:"ml-2 font-semibold",children:[I.length,"  ",I.length]})]}),t.jsx("button",{type:"button",onClick:async()=>{const F=prompt(":"),G=prompt(":");if(!(!F||!G))try{const te=await e.post(`/api/catalog/products/${s}/variants`,{color:F,size:G,sku:`${N.article}-${F.slice(0,3).toUpperCase()}-${G}`});L([...I,te.data])}catch(te){alert(": "+te.message)}},className:"px-4 py-2 bg-orange-500 text-white hover:bg-orange-600 rounded text-sm font-semibold",children:""})]})}),t.jsxs("div",{className:"bg-mm-secondary p-6 rounded-lg space-y-4",children:[t.jsx(ej,{productName:N.name,initialCategoryMappingId:N.category_mapping_id,selectedMarketplaces:Object.keys(c).filter(F=>c[F]),onCategorySelected:F=>{var G,te,le,re;console.log("[ProductForm] Category selected:",F),F?(E(F),w({ozon:{category_id:(G=F.marketplace_categories)==null?void 0:G.ozon,category_name:F.internal_name,type_id:(te=F.marketplace_type_ids)==null?void 0:te.ozon},wb:{category_id:(le=F.marketplace_categories)==null?void 0:le.wildberries,category_name:F.internal_name},yandex:{category_id:(re=F.marketplace_categories)==null?void 0:re.yandex,category_name:F.internal_name}}),b({wb:!1,ozon:!1,yandex:!1}),_({wb:[],ozon:[],yandex:[]}),R(Ne=>{var pe,be,Fe;return{...Ne,category_mapping_id:F.id,marketplace_data:{wb:{...((pe=Ne.marketplace_data)==null?void 0:pe.wb)||{},characteristics:{}},ozon:{...((be=Ne.marketplace_data)==null?void 0:be.ozon)||{},characteristics:{}},yandex:{...((Fe=Ne.marketplace_data)==null?void 0:Fe.yandex)||{},characteristics:{}}}}})):(R(Ne=>({...Ne,category_mapping_id:null})),E(null),w({ozon:{},wb:{},yandex:{}}))},onAttributesLoaded:F=>{console.log("[ProductForm] Attributes loaded:",F),f(G=>{const te={...G};return Object.keys(F).forEach(le=>{te[le]||(te[le]={}),te[le].attributes=F[le]}),te})}}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm text-mm-text-secondary mb-1 uppercase",children:["      ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"text",value:N.article,onChange:F=>oe("article",F.target.value),required:!0,className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm text-mm-text-secondary mb-1 uppercase",children:["  ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"text",value:N.name,onChange:F=>oe("name",F.target.value),required:!0,className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm text-mm-text-secondary mb-1 uppercase",children:[" ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:N.brand,onChange:F=>oe("brand",F.target.value),required:!0,className:"flex-1 px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"}),t.jsx("button",{type:"button",className:"px-4 py-2 bg-cyan-500 text-white hover:bg-cyan-600 rounded text-sm font-semibold",children:""}),t.jsx("button",{type:"button",className:"p-2 text-mm-cyan hover:bg-mm-cyan/10 rounded",children:t.jsx(Is,{size:18})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-1 uppercase",children:""}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:N.manufacturer,onChange:F=>oe("manufacturer",F.target.value),className:"flex-1 px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"}),t.jsx("button",{type:"button",className:"px-4 py-2 bg-cyan-500 text-white hover:bg-cyan-600 rounded text-sm font-semibold",children:""}),t.jsx("button",{type:"button",className:"p-2 text-mm-cyan hover:bg-mm-cyan/10 rounded",children:t.jsx(Is,{size:18})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-1 uppercase",children:" "}),t.jsx("input",{type:"text",value:N.country_of_origin,onChange:F=>oe("country_of_origin",F.target.value),className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-1 uppercase",children:"  "}),t.jsx("input",{type:"text",value:N.label_name,onChange:F=>oe("label_name",F.target.value),className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]})]}),t.jsxs("div",{className:"bg-mm-secondary p-6 rounded-lg space-y-4",children:[t.jsx("h2",{className:"text-sm font-bold text-mm-text-secondary uppercase",children:""}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm text-mm-text-secondary mb-1 uppercase",children:["    ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"number",value:N.price_with_discount/100,onChange:F=>oe("price_with_discount",Math.round(parseFloat(F.target.value||0)*100)),step:"0.01",required:!0,className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm text-mm-text-secondary mb-1 uppercase",children:["    ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"number",value:N.price_without_discount/100,onChange:F=>oe("price_without_discount",Math.round(parseFloat(F.target.value||0)*100)),step:"0.01",required:!0,className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-1 uppercase",children:" "}),t.jsx("input",{type:"number",value:N.purchase_price/100,onChange:F=>oe("purchase_price",Math.round(parseFloat(F.target.value||0)*100)),step:"0.01",className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-1 uppercase",children:".  "}),t.jsx("input",{type:"number",value:N.additional_expenses/100,onChange:F=>oe("additional_expenses",Math.round(parseFloat(F.target.value||0)*100)),step:"0.01",className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-1 uppercase",children:" "}),t.jsx("input",{type:"number",value:N.cost_price/100,readOnly:!0,className:"w-full px-3 py-2 bg-mm-dark/50 border border-mm-border rounded text-mm-text-secondary cursor-not-allowed"})]})]})]}),t.jsxs("div",{className:"bg-mm-secondary p-6 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("label",{className:"text-sm font-bold text-mm-text-secondary uppercase",children:""}),t.jsxs("span",{className:"text-xs text-mm-text-secondary",children:[N.description.length," / 2000"]})]}),t.jsx("textarea",{value:N.description,onChange:F=>oe("description",F.target.value),rows:"5",maxLength:2e3,className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none resize-none"})]}),t.jsxs("div",{className:"bg-mm-secondary p-6 rounded-lg",children:[t.jsx("h2",{className:"text-sm font-bold text-mm-text-secondary uppercase mb-3",children:"    "}),t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-mm-text-secondary mb-1",children:[",  ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"number",value:N.dimensions.length,onChange:F=>oe("dimensions",{...N.dimensions,length:parseInt(F.target.value)||0}),required:!0,className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-mm-text-secondary mb-1",children:[",  ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"number",value:N.dimensions.width,onChange:F=>oe("dimensions",{...N.dimensions,width:parseInt(F.target.value)||0}),required:!0,className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-mm-text-secondary mb-1",children:[",  ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"number",value:N.dimensions.height,onChange:F=>oe("dimensions",{...N.dimensions,height:parseInt(F.target.value)||0}),required:!0,className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-mm-text-secondary mb-1",children:[",  ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"number",value:N.weight,onChange:F=>oe("weight",parseInt(F.target.value)||0),required:!0,className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none"})]})]})]}),(c.ozon||c.wb)&&t.jsxs("div",{className:"bg-mm-secondary p-6 rounded-lg space-y-4",children:[t.jsx("h2",{className:"text-sm font-bold text-mm-text-secondary uppercase",children:"  "}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.ozon&&t.jsxs("div",{className:"p-4 bg-mm-dark rounded border border-blue-500/30",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("span",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"O"}),t.jsx("span",{className:"text-sm font-semibold text-blue-400",children:"Ozon"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-mm-text-secondary mb-1",children:"   "}),t.jsx("input",{type:"number",value:N.ozon_price||"",onChange:F=>R({...N,ozon_price:parseFloat(F.target.value)||0}),placeholder:"1990",className:"w-full px-3 py-2 text-sm bg-mm-dark border border-mm-border rounded text-mm-text focus:border-blue-500 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-mm-text-secondary mb-1",children:"   "}),t.jsx("input",{type:"number",value:N.ozon_old_price||"",onChange:F=>R({...N,ozon_old_price:parseFloat(F.target.value)||0}),placeholder:"2490",className:"w-full px-3 py-2 text-sm bg-mm-dark border border-mm-border rounded text-mm-text focus:border-blue-500 outline-none"})]}),N.ozon_price&&N.ozon_old_price&&t.jsxs("p",{className:"text-xs text-green-400 font-medium",children:[": ",Math.round((N.ozon_old_price-N.ozon_price)/N.ozon_old_price*100),"%"]})]})]}),c.wb&&t.jsxs("div",{className:"p-4 bg-mm-dark rounded border border-purple-500/30",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("span",{className:"w-6 h-6 bg-purple-600 text-white rounded flex items-center justify-center text-xs font-bold",children:"WB"}),t.jsx("span",{className:"text-sm font-semibold text-purple-400",children:"Wildberries"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-mm-text-secondary mb-1",children:"  "}),t.jsx("input",{type:"number",value:N.wb_regular_price||"",onChange:F=>R({...N,wb_regular_price:parseFloat(F.target.value)||0}),placeholder:"2490",className:"w-full px-3 py-2 text-sm bg-mm-dark border border-mm-border rounded text-mm-text focus:border-purple-500 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-mm-text-secondary mb-1",children:"   "}),t.jsx("input",{type:"number",value:N.wb_discount_price||"",onChange:F=>R({...N,wb_discount_price:parseFloat(F.target.value)||0}),placeholder:"1990",className:"w-full px-3 py-2 text-sm bg-mm-dark border border-mm-border rounded text-mm-text focus:border-purple-500 outline-none"})]}),N.wb_regular_price&&N.wb_discount_price&&t.jsxs("p",{className:"text-xs text-green-400 font-medium",children:[": ",Math.round((N.wb_regular_price-N.wb_discount_price)/N.wb_regular_price*100),"%"]})]})]})]})]}),t.jsxs("div",{className:"bg-mm-secondary p-6 rounded-lg space-y-6",children:[t.jsx("h2",{className:"text-sm font-bold text-mm-text-secondary uppercase mb-4",children:" "}),t.jsx(nj,{selectedMarketplaces:c,characteristicsByMarketplace:j,valuesByMarketplace:{wb:((it=(et=N.marketplace_data)==null?void 0:et.wb)==null?void 0:it.characteristics)||{},ozon:((X=(U=N.marketplace_data)==null?void 0:U.ozon)==null?void 0:X.characteristics)||{},yandex:((ue=(ne=N.marketplace_data)==null?void 0:ne.yandex)==null?void 0:ue.characteristics)||{}},baseCharacteristics:N.characteristics||{},currentMappingId:N.category_mapping_id,currentCategoryName:(S==null?void 0:S.internal_name)||"",categoryMappings:v,onMappingUpdated:async(F,G,te,le)=>{if(console.log(`[ProductForm] Mapping updated for ${F}:`,G),G===null){console.log(`[ProductForm] Resetting mapping for ${F}`),b(re=>({...re,[F]:!1})),_(re=>({...re,[F]:[]})),w(re=>({...re,[F]:{}})),R(re=>{var Ne;return{...re,marketplace_data:{...re.marketplace_data,[F]:{...((Ne=re.marketplace_data)==null?void 0:Ne[F])||{},characteristics:{}}}}});return}w(re=>({...re,[F]:{category_id:G,category_name:te,type_id:le}})),b(re=>({...re,[F]:!1})),await Re(F,N.category_mapping_id)},onBaseCharacteristicChange:(F,G)=>{R(te=>({...te,characteristics:{...te.characteristics,[F]:G}}))},onChange:(F,G,te,le)=>{R(re=>{var Ne,pe,be;return{...re,marketplace_data:{...re.marketplace_data,[F]:{...(Ne=re.marketplace_data)==null?void 0:Ne[F],characteristics:{...(be=(pe=re.marketplace_data)==null?void 0:pe[F])==null?void 0:be.characteristics,[te]:le}}}}})},loading:P})]})]})]}),l==="prices"&&t.jsxs("div",{className:"bg-mm-secondary p-6 rounded-lg",children:[t.jsx("h2",{className:"text-xl font-bold text-mm-text mb-6",children:""}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"p-4 bg-mm-dark rounded-lg",children:[t.jsx("p",{className:"text-xs text-mm-text-secondary",children:"  "}),t.jsxs("p",{className:"text-2xl font-bold text-mm-cyan",children:[(N.price_with_discount/100).toFixed(2)," "]})]}),t.jsxs("div",{className:"p-4 bg-mm-dark rounded-lg",children:[t.jsx("p",{className:"text-xs text-mm-text-secondary",children:"  "}),t.jsxs("p",{className:"text-2xl font-bold text-mm-text",children:[(N.price_without_discount/100).toFixed(2)," "]})]}),t.jsxs("div",{className:"p-4 bg-mm-dark rounded-lg",children:[t.jsx("p",{className:"text-xs text-mm-text-secondary",children:""}),t.jsxs("p",{className:"text-2xl font-bold text-mm-text",children:[(N.cost_price/100).toFixed(2)," "]})]})]})]}),l!=="card"&&l!=="prices"&&t.jsx("div",{className:"bg-mm-secondary p-6 rounded-lg text-center py-12",children:t.jsxs("p",{className:"text-mm-text-secondary",children:[' "',l,'"  ']})})]})}),t.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-300 p-4 shadow-lg z-30",children:t.jsxs("div",{className:"max-w-[1600px] mx-auto flex justify-between items-center",children:[t.jsx("button",{type:"button",onClick:q,disabled:r,className:"px-8 py-3 bg-cyan-500 text-white hover:bg-cyan-600 rounded font-bold disabled:opacity-50",children:""}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-sm text-gray-700 font-medium",children:" :"}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.honest_sign,onChange:F=>h({...c,honest_sign:F.target.checked}),className:"w-4 h-4"}),t.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.ozon,onChange:F=>h({...c,ozon:F.target.checked}),className:"w-4 h-4"}),t.jsx("span",{className:"w-7 h-7 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"O"})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.wb,onChange:F=>h({...c,wb:F.target.checked}),className:"w-4 h-4"}),t.jsx("span",{className:"w-7 h-7 bg-purple-600 text-white rounded flex items-center justify-center text-xs font-bold",children:"WB"})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.yandex,onChange:F=>h({...c,yandex:F.target.checked}),className:"w-4 h-4"}),t.jsx("span",{className:"w-7 h-7 bg-red-500 text-white rounded flex items-center justify-center text-xs font-bold",children:""})]})]})]})})]})}function rj(){const{api:e}=de(),s=Dt(),[n,r]=p.useState(1),[a,l]=p.useState(""),[o,d]=p.useState(""),[m,i]=p.useState(null),[u,c]=p.useState(!1),[h,g]=p.useState(null),f=y=>{const j=y.target.files[0];if(j){if(!j.name.endsWith(".xlsx")&&!j.name.endsWith(".xls")){alert(",  Excel  (.xlsx  .xls)");return}i(j)}},v=()=>{alert("  Excel     ")},w=async()=>{var y,j;if(!o){alert(" ");return}c(!0);try{const _=await e.post("/api/catalog/import/marketplace",null,{params:{marketplace:o}});g(_.data),r(3)}catch(_){alert(" : "+(((j=(y=_.response)==null?void 0:y.data)==null?void 0:j.detail)||_.message))}finally{c(!1)}},x=async()=>{if(!m){alert(" ");return}c(!0);try{new FormData().append("file",m),alert("  Excel     ")}catch(y){alert(" : "+y.message)}finally{c(!1)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Cc,{}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-mm-cyan",children:" "}),t.jsx("p",{className:"text-sm text-mm-text-secondary mt-1",children:"       Excel"})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:`flex items-center gap-2 ${n>=1?"text-mm-cyan":"text-mm-text-secondary"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n>=1?"bg-mm-cyan text-mm-dark":"bg-mm-dark"}`,children:"1"}),t.jsx("span",{className:"text-sm",children:" "})]}),t.jsx("div",{className:"flex-1 h-px bg-mm-border"}),t.jsxs("div",{className:`flex items-center gap-2 ${n>=2?"text-mm-cyan":"text-mm-text-secondary"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n>=2?"bg-mm-cyan text-mm-dark":"bg-mm-dark"}`,children:"2"}),t.jsx("span",{className:"text-sm",children:" "})]}),t.jsx("div",{className:"flex-1 h-px bg-mm-border"}),t.jsxs("div",{className:`flex items-center gap-2 ${n>=3?"text-mm-cyan":"text-mm-text-secondary"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n>=3?"bg-mm-cyan text-mm-dark":"bg-mm-dark"}`,children:"3"}),t.jsx("span",{className:"text-sm",children:""})]})]}),n===1&&t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsx("div",{onClick:()=>{l("marketplace"),r(2)},className:`p-8 rounded-lg cursor-pointer transition border-2 ${a==="marketplace"?"border-mm-cyan bg-mm-cyan/10":"border-mm-border bg-mm-secondary hover:border-mm-cyan/50"}`,children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"w-16 h-16 mx-auto bg-mm-cyan/20 rounded-full flex items-center justify-center",children:t.jsx(mt,{className:"text-3xl text-mm-cyan"})}),t.jsx("h3",{className:"text-xl font-bold text-mm-text",children:"  "}),t.jsx("p",{className:"text-sm text-mm-text-secondary",children:"    Wildberries, Ozon  .  API"}),t.jsxs("ul",{className:"text-xs text-mm-text-secondary text-left space-y-2",children:[t.jsx("li",{children:"    "}),t.jsx("li",{children:" , , "}),t.jsx("li",{children:"  "})]})]})}),t.jsx("div",{onClick:()=>{l("excel"),r(2)},className:`p-8 rounded-lg cursor-pointer transition border-2 ${a==="excel"?"border-mm-cyan bg-mm-cyan/10":"border-mm-border bg-mm-secondary hover:border-mm-cyan/50"}`,children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"w-16 h-16 mx-auto bg-mm-cyan/20 rounded-full flex items-center justify-center",children:t.jsx(ss,{className:"text-3xl text-mm-cyan"})}),t.jsx("h3",{className:"text-xl font-bold text-mm-text",children:"  Excel"}),t.jsx("p",{className:"text-sm text-mm-text-secondary",children:"    Excel-  "}),t.jsxs("ul",{className:"text-xs text-mm-text-secondary text-left space-y-2",children:[t.jsx("li",{children:"   "}),t.jsx("li",{children:"   Excel"}),t.jsx("li",{children:"  "})]})]})})]}),n===2&&a==="marketplace"&&t.jsxs("div",{className:"bg-mm-secondary p-8 rounded-lg space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-mm-text",children:" "}),t.jsx("div",{className:"grid grid-cols-3 gap-4",children:["ozon","wb","yandex"].map(y=>{const j={ozon:"Ozon",wb:"Wildberries",yandex:"."},_={ozon:"blue",wb:"purple",yandex:"red"};return t.jsx("div",{onClick:()=>d(y),className:`p-6 rounded-lg cursor-pointer transition border-2 text-center ${o===y?`border-${_[y]}-500 bg-${_[y]}-500/10`:"border-mm-border hover:border-mm-cyan/50"}`,children:t.jsx("h3",{className:"text-lg font-bold text-mm-text",children:j[y]})},y)})}),t.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded p-4",children:t.jsxs("p",{className:"text-blue-300 text-sm",children:[" ",t.jsx("strong",{children:":"}),' ,           "".']})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>r(1),className:"px-6 py-3 bg-mm-dark text-mm-text hover:bg-mm-dark/80 rounded",children:""}),t.jsx("button",{onClick:w,disabled:!o||u,className:"flex-1 px-6 py-3 bg-mm-cyan text-mm-dark hover:bg-mm-cyan/90 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:u?"...":" "})]})]}),n===2&&a==="excel"&&t.jsxs("div",{className:"bg-mm-secondary p-8 rounded-lg space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-mm-text",children:" Excel "}),t.jsxs("div",{className:"bg-mm-dark p-4 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-bold text-mm-text mb-2",children:" 1:  "}),t.jsx("p",{className:"text-sm text-mm-text-secondary mb-4",children:"  Excel,        "}),t.jsxs("button",{onClick:v,className:"px-4 py-2 bg-mm-cyan text-mm-dark hover:bg-mm-cyan/90 rounded flex items-center gap-2",children:[t.jsx(mt,{}),"   Excel"]})]}),t.jsxs("div",{className:"bg-mm-dark p-4 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-bold text-mm-text mb-2",children:" 2:  "}),t.jsx("p",{className:"text-sm text-mm-text-secondary mb-4",children:"  Excel   "}),t.jsxs("div",{className:"border-2 border-dashed border-mm-border rounded-lg p-8 text-center",children:[t.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:f,className:"hidden",id:"file-upload"}),t.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer inline-block",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(ss,{className:"mx-auto text-4xl text-mm-cyan"}),t.jsx("p",{className:"text-mm-text",children:m?m.name:"     "}),t.jsx("p",{className:"text-xs text-mm-text-secondary",children:" : .xlsx, .xls"})]})})]})]}),t.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded p-4",children:t.jsxs("p",{className:"text-yellow-300 text-sm",children:[" ",t.jsx("strong",{children:":"}),"          .    ."]})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>r(1),className:"px-6 py-3 bg-mm-dark text-mm-text hover:bg-mm-dark/80 rounded",children:""}),t.jsx("button",{onClick:x,disabled:!m||u,className:"flex-1 px-6 py-3 bg-mm-cyan text-mm-dark hover:bg-mm-cyan/90 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:u?"...":" "})]})]}),n===3&&h&&t.jsxs("div",{className:"bg-mm-secondary p-8 rounded-lg space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto bg-green-500/20 rounded-full flex items-center justify-center mb-4",children:t.jsx(lt,{className:"text-4xl text-green-400"})}),t.jsx("h2",{className:"text-2xl font-bold text-mm-text mb-2",children:" !"}),t.jsx("p",{className:"text-mm-text-secondary",children:"    "})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{className:"bg-mm-dark p-4 rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-green-400",children:h.created||0}),t.jsx("div",{className:"text-sm text-mm-text-secondary mt-1",children:""})]}),t.jsxs("div",{className:"bg-mm-dark p-4 rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-blue-400",children:h.updated||0}),t.jsx("div",{className:"text-sm text-mm-text-secondary mt-1",children:""})]}),t.jsxs("div",{className:"bg-mm-dark p-4 rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-red-400",children:h.errors||0}),t.jsx("div",{className:"text-sm text-mm-text-secondary mt-1",children:""})]})]}),t.jsx("button",{onClick:()=>s("/dashboard"),className:"w-full px-6 py-3 bg-mm-cyan text-mm-dark hover:bg-mm-cyan/90 rounded",children:"  "})]})]})}function aj(){const{api:e}=de(),[s,n]=p.useState("ozon"),[r,a]=p.useState(""),[l,o]=p.useState([]),[d,m]=p.useState(!1),[i,u]=p.useState([]),[c,h]=p.useState([]),[g,f]=p.useState([]),[v,w]=p.useState([]),[x,y]=p.useState(""),[j,_]=p.useState(!1);p.useEffect(()=>{P(),k()},[]);const P=async()=>{try{const T=(await e.get("/api/seller/api-keys")).data||[];if(o(T),T.length>0){const A=T[T.length-1];a(A.id),n(A.marketplace)}}catch(L){console.error("Failed to load integrations:",L)}},k=async()=>{try{const L=await e.get("/api/catalog/products",{params:{limit:1e3}});h(L.data)}catch(L){console.error("Failed to load local products:",L)}},z=async()=>{var L,T;if(!r){alert(" ");return}m(!0);try{const H=(await e.get(`/api/marketplaces/${s}/products`,{params:{integration_id:r}})).data;console.log(` Loaded ${H.length} products from ${s} (integration: ${r})`),u(H),b(H,c)}catch(A){alert("  : "+(((T=(L=A.response)==null?void 0:L.data)==null?void 0:T.detail)||A.message))}finally{m(!1)}},b=(L,T)=>{const A=[],H=[];console.log(` Matching ${L.length} MP products with ${T.length} local products`),console.log(` Selected marketplace: ${s}`),L.forEach(D=>{const B=T.find($=>{const C=($.marketplace_specific_data||$.marketplace_data||{})[s];if(console.log(`  Checking ${$.article}: mpInfo =`,C),s==="ozon"){const q=(C==null?void 0:C.id)===D.id||(C==null?void 0:C.offer_id)===D.sku;return q&&console.log(`     Matched Ozon: ${C.id} === ${D.id}`),q}else if(s==="wb"){const q=(C==null?void 0:C.nm_id)===D.id||(C==null?void 0:C.id)===D.id||(C==null?void 0:C.vendor_code)===D.sku;return q&&console.log(`     Matched WB: ${C.nm_id||C.id} === ${D.id}`),q}else if(s==="yandex"){const q=(C==null?void 0:C.offer_id)===D.sku;return q&&console.log(`     Matched Yandex: ${C.offer_id} === ${D.sku}`),q}return!1});if(B)console.log(`   Found link: ${D.sku}  ${B.article}`),A.push({mpProduct:D,localProduct:B,matchType:"linked"});else{const $=T.filter(Q=>Q.article.toLowerCase().includes(D.sku.toLowerCase())||D.sku.toLowerCase().includes(Q.article.toLowerCase()));H.push({mpProduct:D,suggestions:$.slice(0,3),matchType:"unmatched"})}}),f(A),w(H),console.log(` Matched: ${A.length}, Unmatched: ${H.length}`),(A.length>0||H.length>0)&&V.success(` !

 : ${A.length}
  : ${H.length}`,{duration:5e3})},S=async(L,T)=>{var A,H,D;try{console.log(" Linking:",L.sku,"",T.article),console.log("MP Product:",L),console.log("Local Product:",T);const B={product:L,duplicate_action:"link_only"};console.log("Sending payload:",B);const $=await e.post("/api/products/import-from-marketplace",B);if(console.log("Response:",$.data),$.data.status==="duplicate_found"){alert("   .     .");return}alert(`  !

${L.name} (${s.toUpperCase()})   ${T.name}`);const C=(await e.get("/api/catalog/products",{params:{limit:1e3}})).data;h(C),b(i,C)}catch(B){console.error("Link error:",B),console.error("Error response:",(A=B.response)==null?void 0:A.data),alert(" : "+(((D=(H=B.response)==null?void 0:H.data)==null?void 0:D.detail)||B.message))}},E=async L=>{var T,A;if(confirm("   ?"))try{const H=c.find(Q=>Q.id===L);if(!H){alert("  ");return}const D={...H.marketplace_data||{}};delete D[s],await e.put(`/api/catalog/products/${L}`,{marketplace_data:D}),alert("  ");const $=(await e.get("/api/catalog/products",{params:{limit:1e3}})).data;h($),b(i,$)}catch(H){console.error("Unlink error:",H),alert(": "+(((A=(T=H.response)==null?void 0:T.data)==null?void 0:A.detail)||H.message))}},N=()=>{let L=v;return x&&(L=L.filter(T=>T.mpProduct.sku.toLowerCase().includes(x.toLowerCase())||T.mpProduct.name.toLowerCase().includes(x.toLowerCase()))),j&&(L=L.filter(T=>T.suggestions.length>0)),L},R={ozon:{icon:"O",color:"bg-blue-500",name:"Ozon"},wb:{icon:"WB",color:"bg-purple-600",name:"Wildberries"},yandex:{icon:"",color:"bg-red-500",name:"."}},I=R[s]||R.ozon;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Cc,{}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-mm-cyan",children:" "}),t.jsx("p",{className:"text-sm text-mm-text-secondary mt-1",children:"       "})]})]}),t.jsxs("div",{className:"bg-mm-secondary p-4 rounded-lg space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-2 uppercase",children:""}),t.jsx("select",{value:r,onChange:L=>{a(L.target.value);const T=l.find(A=>A.id===L.target.value);T&&n(T.marketplace)},className:"w-full px-3 py-2 bg-mm-dark border border-mm-border rounded text-mm-text focus:border-mm-cyan outline-none",children:l.filter(L=>["ozon","wb","yandex"].includes(L.marketplace)).map(L=>t.jsxs("option",{value:L.id,children:[L.marketplace.toUpperCase(),": ",L.name||L.client_id||"API"]},L.id))})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:z,disabled:d,className:"w-full px-4 py-2 bg-mm-cyan text-mm-dark hover:bg-mm-cyan/90 rounded flex items-center justify-center gap-2 disabled:opacity-50",children:[t.jsx(qe,{className:d?"animate-spin":""}),d?"...":" "]})}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:()=>b(i,c),disabled:i.length===0,className:"w-full px-4 py-2 bg-green-600 text-white hover:bg-green-700 rounded flex items-center justify-center gap-2 disabled:opacity-50",children:[t.jsx(vr,{}),""]})})]}),i.length>0&&t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-mm-dark p-3 rounded",children:[t.jsxs("p",{className:"text-xs text-mm-text-secondary",children:["  ",I.name]}),t.jsx("p",{className:"text-2xl font-bold text-mm-cyan",children:i.length})]}),t.jsxs("div",{className:"bg-mm-dark p-3 rounded",children:[t.jsx("p",{className:"text-xs text-mm-text-secondary",children:""}),t.jsx("p",{className:"text-2xl font-bold text-green-400",children:g.length})]}),t.jsxs("div",{className:"bg-mm-dark p-3 rounded",children:[t.jsx("p",{className:"text-xs text-mm-text-secondary",children:" "}),t.jsx("p",{className:"text-2xl font-bold text-orange-400",children:v.length})]})]})]}),i.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-mm-secondary rounded-lg overflow-hidden",children:[t.jsx("div",{className:"bg-mm-dark p-4 border-b border-mm-border",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{className:"text-lg font-bold text-orange-400 flex items-center gap-2",children:[t.jsx(Ke,{className:"text-orange-400"}),"  (",v.length,")"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-mm-text-secondary"}),t.jsx("input",{type:"text",placeholder:"...",value:x,onChange:L=>y(L.target.value),className:"pl-10 pr-4 py-2 bg-mm-dark border border-mm-border rounded text-mm-text text-sm focus:border-mm-cyan outline-none w-64"})]}),t.jsxs("label",{className:"flex items-center gap-2 text-sm text-mm-text cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:j,onChange:L=>_(L.target.checked),className:"w-4 h-4"}),t.jsx(kc,{className:"text-mm-cyan"}),"  "]})]})]})}),t.jsxs("div",{className:"divide-y divide-mm-border max-h-[500px] overflow-y-auto",children:[N().map((L,T)=>t.jsx("div",{className:"p-4 hover:bg-mm-dark/50 transition",children:t.jsxs("div",{className:"grid grid-cols-12 gap-4 items-start",children:[t.jsx("div",{className:"col-span-5",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`w-10 h-10 ${I.color} text-white rounded flex items-center justify-center text-xs font-bold flex-shrink-0`,children:I.icon}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-mm-text truncate",children:L.mpProduct.name}),t.jsxs("p",{className:"text-xs text-mm-text-secondary font-mono",children:[": ",L.mpProduct.sku]}),L.mpProduct.barcode&&t.jsxs("p",{className:"text-xs text-mm-text-secondary",children:[": ",L.mpProduct.barcode]})]})]})}),t.jsx("div",{className:"col-span-2 flex items-center justify-center",children:t.jsx("div",{className:"text-2xl text-mm-text-secondary",children:""})}),t.jsx("div",{className:"col-span-5",children:L.suggestions.length>0?t.jsx("div",{className:"space-y-2",children:L.suggestions.map(A=>t.jsxs("div",{className:"flex items-center justify-between p-2 bg-mm-dark rounded border border-green-500/30",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm text-mm-text truncate",children:A.name}),t.jsxs("p",{className:"text-xs text-mm-text-secondary font-mono",children:[": ",A.article]})]}),t.jsxs("button",{onClick:()=>S(L.mpProduct,A),className:"ml-2 px-3 py-1 bg-green-600 text-white hover:bg-green-700 rounded text-xs font-medium flex items-center gap-1",children:[t.jsx(vr,{size:12}),""]})]},A.id))}):t.jsx("div",{className:"text-sm text-mm-text-secondary italic",children:"  "})})]})},T)),N().length===0&&t.jsx("div",{className:"p-8 text-center text-mm-text-secondary",children:x||j?"   ":"  "})]})]}),t.jsxs("div",{className:"bg-mm-secondary rounded-lg overflow-hidden",children:[t.jsx("div",{className:"bg-mm-dark p-4 border-b border-mm-border",children:t.jsxs("h2",{className:"text-lg font-bold text-green-400 flex items-center gap-2",children:[t.jsx(lt,{className:"text-green-400"}),"  (",g.length,")"]})}),t.jsxs("div",{className:"divide-y divide-mm-border max-h-[400px] overflow-y-auto",children:[g.map((L,T)=>t.jsx("div",{className:"p-4 hover:bg-mm-dark/50 transition",children:t.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[t.jsx("div",{className:"col-span-5",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`w-10 h-10 ${I.color} text-white rounded flex items-center justify-center text-xs font-bold flex-shrink-0`,children:I.icon}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-mm-text truncate",children:L.mpProduct.name}),t.jsxs("p",{className:"text-xs text-mm-text-secondary font-mono",children:[": ",L.mpProduct.sku]})]})]})}),t.jsx("div",{className:"col-span-2 flex items-center justify-center",children:t.jsxs("div",{className:"flex items-center gap-1 text-green-400",children:[t.jsx(vr,{}),t.jsx("span",{className:"text-xs",children:""})]})}),t.jsx("div",{className:"col-span-4",children:t.jsx("div",{className:"flex items-start gap-3",children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-mm-text truncate",children:L.localProduct.name}),t.jsxs("p",{className:"text-xs text-mm-text-secondary font-mono",children:[": ",L.localProduct.article]})]})})}),t.jsx("div",{className:"col-span-1 flex justify-end",children:t.jsx("button",{onClick:()=>E(L.localProduct.id),className:"p-2 text-red-400 hover:bg-red-400/10 rounded transition",title:" ",children:t.jsx(Ke,{})})})]})},T)),g.length===0&&t.jsx("div",{className:"p-8 text-center text-mm-text-secondary",children:"  "})]})]})]}),i.length===0&&t.jsxs("div",{className:"bg-mm-secondary p-12 rounded-lg text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:""}),t.jsx("p",{className:"text-mm-text-secondary text-lg",children:'    " "'})]})]})}const js=({value:e,onChange:s,suffix:n=""})=>{const[r,a]=p.useState(!1),[l,o]=p.useState(e||"");p.useEffect(()=>{o(e||"")},[e]);const d=()=>{a(!1),l!==e&&s(l)},m=i=>{i.key==="Enter"&&d(),i.key==="Escape"&&(o(e||""),a(!1))};return r?t.jsx("input",{type:"number",value:l,onChange:i=>o(i.target.value),onBlur:d,onKeyDown:m,autoFocus:!0,className:"w-[70px] px-2 py-1 bg-mm-dark border-2 border-mm-cyan rounded text-mm-cyan text-sm focus:outline-none text-center"}):t.jsx("div",{onClick:()=>a(!0),className:"cursor-pointer px-1 py-1 rounded transition-all min-w-[70px] text-center bg-mm-dark border border-dashed border-mm-border hover:border-mm-cyan hover:bg-mm-dark/80",children:e?t.jsxs("span",{className:"text-mm-cyan font-medium text-sm",children:[e,n]}):t.jsx("span",{className:"text-mm-text-secondary/40 text-xs",children:""})})},pn=({value:e,suffix:s=""})=>t.jsx("div",{className:"text-mm-text text-center px-1 py-1 min-w-[70px] font-medium text-sm",children:e?`${e}${s}`:""}),lj=({fbo:e,fbs:s})=>!e&&!s?t.jsx("span",{className:"text-mm-text-secondary text-xs",children:""}):t.jsx("div",{className:"text-xs text-center",children:t.jsxs("span",{className:"text-orange-400",children:[e||s,"%"]})}),oj=()=>{const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState([]),[l,o]=p.useState(!0),[d,m]=p.useState(!1),[i,u]=p.useState(!1),[c,h]=p.useState(""),[g,f]=p.useState(null),[v,w]=p.useState(new Set),[x,y]=p.useState({ozon:!0,wb:!0}),[j,_]=p.useState({});p.useEffect(()=>{P()},[]),p.useEffect(()=>{b()},[s,c]);const P=async()=>{try{o(!0);const O=await e.get("/api/catalog/pricing");n(O.data.products||[]),_({}),w(new Set)}catch(O){console.error("Error fetching products:",O),V.error("  ")}finally{o(!1)}},k=async()=>{m(!0);try{const O=await e.get("/api/catalog/pricing/sync-from-mp");O.data.success?(V.success(` ${O.data.message}`),await P()):V.error(O.data.message||" ")}catch(O){console.error("Sync error:",O),V.error("   ")}finally{m(!1)}},z=async()=>{var W,se,Z,oe,Re,Te,Ae,Ie,et,it;const O=r.filter(U=>{if(!v.has(U.product_id))return!1;const X=j[U.product_id];return X?X["ozon.price"]||X["ozon.old_price"]||X["ozon.min_price"]||X["wb.regular_price"]||X["wb.discount_price"]||X["wb.discount"]:!1});if(O.length===0){V.error("      ");return}u(!0);try{const U={};for(const ne of O){const ue=j[ne.product_id]||{};U[ne.product_id]={ozon:ne.ozon_linked?{price:parseFloat(ue["ozon.price"])||((W=ne.ozon)==null?void 0:W.price)||0,old_price:parseFloat(ue["ozon.old_price"])||((se=ne.ozon)==null?void 0:se.old_price)||0,min_price:parseFloat(ue["ozon.min_price"])||((Z=ne.ozon)==null?void 0:Z.min_price)||0}:null,wb:ne.wb_linked?{regular_price:parseFloat(ue["wb.regular_price"])||((oe=ne.wb)==null?void 0:oe.regular_price)||0,discount_price:parseFloat(ue["wb.discount_price"])||((Re=ne.wb)==null?void 0:Re.discount_price)||0,discount:parseFloat(ue["wb.discount"])||((Te=ne.wb)==null?void 0:Te.discount)||0}:null}}const X=await e.post("/api/catalog/pricing/push-to-mp",{product_ids:O.map(ne=>ne.product_id),prices:U});if(console.log("Push to MP response:",X.data),X.data.success){const{results:ne}=X.data,ue=[];ne.ozon.success>0&&ue.push(`Ozon: ${ne.ozon.success} `),ne.wb.success>0&&ue.push(`WB: ${ne.wb.success} `),ue.length>0?V.success(`   : ${ue.join(", ")}`,{duration:5e3}):V.warning("  ,    .    ."),((Ae=ne.ozon.errors)==null?void 0:Ae.length)>0&&V.error(`Ozon : ${ne.ozon.errors.join(", ")}`,{duration:7e3}),((Ie=ne.wb.errors)==null?void 0:Ie.length)>0&&V.error(`WB : ${ne.wb.errors.join(", ")}`,{duration:7e3}),await P()}else V.error(X.data.message||" ")}catch(U){console.error("Push error:",U),V.error(` : ${((it=(et=U.response)==null?void 0:et.data)==null?void 0:it.detail)||U.message}`)}finally{u(!1)}},b=()=>{let O=[...s];if(c){const W=c.toLowerCase();O=O.filter(se=>{var Z,oe;return((Z=se.article)==null?void 0:Z.toLowerCase().includes(W))||((oe=se.name)==null?void 0:oe.toLowerCase().includes(W))})}a(O)},S=O=>{y(W=>({...W,[O]:!W[O]}))},E=O=>{w(W=>{const se=new Set(W);return se.has(O)?se.delete(O):se.add(O),se})},N=()=>{const O=r.filter(W=>T(W.product_id));w(new Set(O.map(W=>W.product_id)))},R=(O,W,se)=>{_(Z=>({...Z,[O]:{...Z[O],[W]:se}}))},I=(O,W)=>{var se;return((se=j[O.product_id])==null?void 0:se[W])!==void 0?j[O.product_id][W]:""},L=(O,W)=>{const se=W.split(".");let Z=O;for(const oe of se)Z=Z==null?void 0:Z[oe];return Z||""},T=O=>j[O]&&Object.keys(j[O]).length>0,A=async O=>{var se,Z,oe,Re,Te,Ae;const W=j[O.product_id];if(W){f(O.product_id);try{const Ie={};W.min_allowed_price&&(Ie.min_allowed_price=parseFloat(W.min_allowed_price)||0),W.cost_price&&(Ie.cost_price=parseFloat(W.cost_price)||0),O.ozon_linked&&(W["ozon.price"]||W["ozon.old_price"]||W["ozon.min_price"])&&(Ie.ozon={price:parseFloat(W["ozon.price"])||((se=O.ozon)==null?void 0:se.price)||0,old_price:parseFloat(W["ozon.old_price"])||((Z=O.ozon)==null?void 0:Z.old_price)||0,min_price:parseFloat(W["ozon.min_price"])||((oe=O.ozon)==null?void 0:oe.min_price)||0}),O.wb_linked&&(W["wb.regular_price"]||W["wb.discount_price"]||W["wb.discount"])&&(Ie.wb={regular_price:parseFloat(W["wb.regular_price"])||((Re=O.wb)==null?void 0:Re.regular_price)||0,discount_price:parseFloat(W["wb.discount_price"])||((Te=O.wb)==null?void 0:Te.discount_price)||0,discount:parseFloat(W["wb.discount"])||((Ae=O.wb)==null?void 0:Ae.discount)||0}),await e.put(`/api/catalog/pricing/${O.product_id}`,Ie),V.success(` : ${O.article}`),_(et=>{const it={...et};return delete it[O.product_id],it}),P()}catch(Ie){console.error("Save error:",Ie),V.error(" ")}finally{f(null)}}},H=s.filter(O=>O.ozon_linked).length,D=s.filter(O=>O.wb_linked).length,B=Object.keys(j).length,$=v.size,Q=B>0,q=r.filter(O=>{if(!v.has(O.product_id))return!1;const W=j[O.product_id];return W?W["ozon.price"]||W["ozon.old_price"]||W["ozon.min_price"]||W["wb.regular_price"]||W["wb.discount_price"]||W["wb.discount"]||W.cost_price||W.min_allowed_price:!1}).length>0,J=async()=>{const O=r.filter(Z=>T(Z.product_id));if(O.length===0){V.error("   ");return}let W=0,se=0;for(const Z of O)try{await A(Z),W++}catch{se++}W>0&&V.success(`  : ${W}`),se>0&&V.error(`   : ${se}`)};return l?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(qe,{className:"w-8 h-8 animate-spin text-mm-cyan"})}):t.jsxs("div",{className:"space-y-6","data-testid":"pricing-page",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-mm-cyan",children:""}),t.jsx("p",{className:"text-sm text-mm-text-secondary mt-1",children:"   "})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:k,disabled:d,className:"px-4 py-2 bg-mm-secondary text-mm-text border border-mm-border rounded hover:border-mm-cyan transition-colors flex items-center gap-2 disabled:opacity-50",children:[d?t.jsx(qe,{className:"w-4 h-4 animate-spin"}):t.jsx(mt,{className:"w-4 h-4"}),"  "]}),t.jsxs("button",{onClick:J,disabled:!Q||g!==null,className:`px-4 py-2 font-medium rounded transition-colors flex items-center gap-2 ${Q&&g===null?"bg-green-600 text-white hover:bg-green-700 cursor-pointer":"bg-mm-secondary text-mm-text-secondary cursor-not-allowed opacity-50"}`,children:[g!==null?t.jsx(qe,{className:"w-4 h-4 animate-spin"}):t.jsx(Br,{className:"w-4 h-4"})," ",B>0&&t.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${Q?"bg-white/20":"bg-mm-border"}`,children:B})]}),t.jsxs("button",{onClick:z,disabled:i||!q,className:`px-4 py-2 font-medium rounded transition-colors flex items-center gap-2 ${q&&!i?"bg-mm-cyan text-mm-dark hover:bg-mm-cyan/90 cursor-pointer":"bg-mm-secondary text-mm-text-secondary cursor-not-allowed opacity-50"}`,children:[i?t.jsx(qe,{className:"w-4 h-4 animate-spin"}):t.jsx(ss,{className:"w-4 h-4"}),"  ",$>0&&t.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${q?"bg-mm-dark/20":"bg-mm-border"}`,children:$})]})]})]}),t.jsx("div",{className:"bg-mm-secondary p-4 rounded-lg border border-mm-border",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[t.jsx("span",{className:"text-sm text-mm-text-secondary",children:":"}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"checkbox",checked:x.ozon,onChange:()=>S("ozon"),className:"sr-only"}),t.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${x.ozon?"bg-blue-500 border-blue-500":"bg-mm-dark border-mm-border group-hover:border-blue-500"}`,children:x.ozon&&t.jsx(lt,{className:"w-3 h-3 text-white"})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded flex items-center justify-center text-white text-xs font-bold",children:"O"}),t.jsx("span",{className:"text-mm-text",children:"Ozon"}),t.jsxs("span",{className:"text-xs text-mm-text-secondary",children:["(",H,")"]})]})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"checkbox",checked:x.wb,onChange:()=>S("wb"),className:"sr-only"}),t.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${x.wb?"bg-purple-500 border-purple-500":"bg-mm-dark border-mm-border group-hover:border-purple-500"}`,children:x.wb&&t.jsx(lt,{className:"w-3 h-3 text-white"})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded flex items-center justify-center text-white text-xs font-bold",children:"W"}),t.jsx("span",{className:"text-mm-text",children:"Wildberries"}),t.jsxs("span",{className:"text-xs text-mm-text-secondary",children:["(",D,")"]})]})]}),B>0&&t.jsxs("button",{onClick:N,className:"text-sm text-mm-cyan hover:underline",children:["    (",B,")"]}),t.jsx("div",{className:"flex-1 min-w-[200px] ml-auto",children:t.jsxs("div",{className:"relative",children:[t.jsx(hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-mm-text-secondary"}),t.jsx("input",{type:"text",placeholder:"  ...",value:c,onChange:O=>h(O.target.value),className:"w-full pl-10 pr-4 py-2 bg-mm-dark border border-mm-border rounded text-mm-text text-sm focus:border-mm-cyan outline-none"})]})})]})}),t.jsx("div",{className:"bg-mm-secondary rounded-lg border border-mm-border overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsxs("thead",{className:"bg-mm-dark",children:[t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"p-2 w-[30px]",rowSpan:"2"}),t.jsx("th",{className:"text-left p-2 font-medium text-mm-text-secondary uppercase text-xs w-[50px]",rowSpan:"2",children:""}),t.jsx("th",{className:"text-left p-2 font-medium text-mm-text-secondary uppercase text-xs min-w-[130px]",rowSpan:"2",children:""}),t.jsx("th",{className:"text-center p-2 font-medium text-green-400 uppercase text-xs w-[80px]",rowSpan:"2",children:"."}),x.ozon&&t.jsx("th",{className:"text-center p-2 font-medium text-blue-400 uppercase text-xs border-l border-mm-border",colSpan:"7",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded flex items-center justify-center text-white text-xs font-bold",children:"O"}),"Ozon"]})}),x.wb&&t.jsx("th",{className:"text-center p-2 font-medium text-purple-400 uppercase text-xs border-l border-mm-border",colSpan:"6",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("div",{className:"w-5 h-5 bg-purple-500 rounded flex items-center justify-center text-white text-xs font-bold",children:"W"}),"Wildberries"]})}),t.jsxs("th",{className:"text-center p-2 font-medium text-mm-text-secondary uppercase text-xs border-l border-mm-border w-[80px]",rowSpan:"2",children:[".",t.jsx("br",{}),""]})]}),t.jsxs("tr",{className:"border-b border-mm-border bg-mm-dark/70 text-[11px]",children:[x.ozon&&t.jsxs(t.Fragment,{children:[t.jsx("th",{className:"p-1 text-center text-blue-300/70 font-normal border-l border-mm-border",children:" ."}),t.jsx("th",{className:"p-1 text-center text-mm-cyan/70 font-normal bg-mm-cyan/5",children:""}),t.jsx("th",{className:"p-1 text-center text-blue-300/70 font-normal",children:" ."}),t.jsx("th",{className:"p-1 text-center text-mm-cyan/70 font-normal bg-mm-cyan/5",children:""}),t.jsx("th",{className:"p-1 text-center text-blue-300/70 font-normal",children:"."}),t.jsx("th",{className:"p-1 text-center text-mm-cyan/70 font-normal bg-mm-cyan/5",children:""}),t.jsx("th",{className:"p-1 text-center text-orange-400/70 font-normal",children:t.jsx(gm,{className:"inline w-3 h-3"})})]}),x.wb&&t.jsxs(t.Fragment,{children:[t.jsx("th",{className:"p-1 text-center text-purple-300/70 font-normal border-l border-mm-border",children:" ."}),t.jsx("th",{className:"p-1 text-center text-mm-cyan/70 font-normal bg-mm-cyan/5",children:""}),t.jsx("th",{className:"p-1 text-center text-purple-300/70 font-normal",children:" ."}),t.jsx("th",{className:"p-1 text-center text-mm-cyan/70 font-normal bg-mm-cyan/5",children:""}),t.jsx("th",{className:"p-1 text-center text-purple-300/70 font-normal",children:""}),t.jsx("th",{className:"p-1 text-center text-mm-cyan/70 font-normal bg-mm-cyan/5",children:""})]})]})]}),t.jsx("tbody",{children:r.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"20",className:"text-center p-8 text-mm-text-secondary",children:"  "})}):r.map(O=>t.jsxs("tr",{className:`border-b border-mm-border hover:bg-mm-dark/30 transition-colors ${T(O.product_id)?"bg-yellow-500/5":""} ${v.has(O.product_id)?"bg-mm-cyan/5":""}`,children:[t.jsx("td",{className:"p-2 text-center",children:t.jsx("button",{onClick:()=>E(O.product_id),className:"text-mm-text-secondary hover:text-mm-cyan",children:v.has(O.product_id)?t.jsx(E0,{className:"w-4 h-4 text-mm-cyan"}):t.jsx(T0,{className:"w-4 h-4"})})}),t.jsx("td",{className:"p-2",children:O.photo?t.jsx("img",{src:O.photo,alt:"",className:"w-10 h-10 object-cover rounded"}):t.jsx("div",{className:"w-10 h-10 bg-mm-dark rounded flex items-center justify-center",children:t.jsx("span",{className:"text-xs text-mm-text-secondary",children:""})})}),t.jsxs("td",{className:"p-2",children:[t.jsx("div",{className:"font-mono text-sm text-mm-cyan",children:O.article}),t.jsx("div",{className:"text-xs text-mm-text-secondary truncate max-w-[120px]",children:O.name})]}),t.jsx("td",{className:"p-1",children:t.jsx(js,{value:I(O,"cost_price")||L(O,"cost_price"),onChange:W=>R(O.product_id,"cost_price",W)})}),x.ozon&&t.jsxs(t.Fragment,{children:[t.jsx("td",{className:"p-1 border-l border-mm-border",children:O.ozon_linked?t.jsx(pn,{value:L(O,"ozon.price")}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})}),t.jsx("td",{className:"p-1 bg-mm-cyan/5",children:O.ozon_linked?t.jsx(js,{value:I(O,"ozon.price"),onChange:W=>R(O.product_id,"ozon.price",W)}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})}),t.jsx("td",{className:"p-1",children:O.ozon_linked?t.jsx(pn,{value:L(O,"ozon.old_price")}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})}),t.jsx("td",{className:"p-1 bg-mm-cyan/5",children:O.ozon_linked?t.jsx(js,{value:I(O,"ozon.old_price"),onChange:W=>R(O.product_id,"ozon.old_price",W)}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})}),t.jsx("td",{className:"p-1",children:O.ozon_linked?t.jsx(pn,{value:L(O,"ozon.min_price")}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})}),t.jsx("td",{className:"p-1 bg-mm-cyan/5",children:O.ozon_linked?t.jsx(js,{value:I(O,"ozon.min_price"),onChange:W=>R(O.product_id,"ozon.min_price",W)}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})}),t.jsx("td",{className:"p-1",children:O.ozon_linked?t.jsx(lj,{fbo:L(O,"ozon.fbo_commission"),fbs:L(O,"ozon.fbs_commission")}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})})]}),x.wb&&t.jsxs(t.Fragment,{children:[t.jsx("td",{className:"p-1 border-l border-mm-border",children:O.wb_linked?t.jsx(pn,{value:L(O,"wb.regular_price")}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})}),t.jsx("td",{className:"p-1 bg-mm-cyan/5",children:O.wb_linked?t.jsx(js,{value:I(O,"wb.regular_price"),onChange:W=>R(O.product_id,"wb.regular_price",W)}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})}),t.jsx("td",{className:"p-1",children:O.wb_linked?t.jsx(pn,{value:L(O,"wb.discount_price")}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})}),t.jsx("td",{className:"p-1 bg-mm-cyan/5",children:O.wb_linked?t.jsx(js,{value:I(O,"wb.discount_price"),onChange:W=>R(O.product_id,"wb.discount_price",W)}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})}),t.jsx("td",{className:"p-1",children:O.wb_linked?t.jsx(pn,{value:L(O,"wb.discount"),suffix:"%"}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})}),t.jsx("td",{className:"p-1 bg-mm-cyan/5",children:O.wb_linked?t.jsx(js,{value:I(O,"wb.discount"),onChange:W=>R(O.product_id,"wb.discount",W),suffix:"%"}):t.jsx("span",{className:"text-mm-text-secondary/30 text-xs block text-center",children:""})})]}),t.jsx("td",{className:"p-1 border-l border-mm-border",children:t.jsx(js,{value:I(O,"min_allowed_price")||L(O,"min_allowed_price"),onChange:W=>R(O.product_id,"min_allowed_price",W)})})]},O.product_id))})]})})}),t.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-mm-text-secondary",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-14 h-5 bg-mm-secondary rounded border border-mm-border"}),t.jsx("span",{children:" "})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-14 h-5 bg-mm-dark rounded border border-dashed border-mm-border"}),t.jsx("span",{children:"  "})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gm,{className:"w-4 h-4 text-orange-400"}),t.jsx("span",{children:""})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Br,{className:"w-4 h-4 text-mm-cyan"}),t.jsx("span",{children:"  "})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ss,{className:"w-4 h-4 text-mm-cyan"}),t.jsx("span",{children:"  "})]})]})]})};function ij(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!1),[l,o]=p.useState(!1),[d,m]=p.useState(null),[i,u]=p.useState(""),[c,h]=p.useState({internal_name:"",slug:"",site_visibility:!0,default_channels:["site"],ozon_category_id:"",ozon_type_id:"",wb_category_id:"",yandex_category_id:"",internal_attributes:[]}),[g,f]=p.useState({ozon:"",wb:"",yandex:""}),[v,w]=p.useState({ozon:[],wb:[],yandex:[]}),[x,y]=p.useState({});p.useEffect(()=>{j()},[]);const j=async()=>{a(!0);try{const N=await e.get("/api/internal-categories?limit=100");n(N.data.categories||[])}catch(N){console.error("Failed to load categories:",N),alert("  ")}finally{a(!1)}},_=()=>{m(null),h({internal_name:"",slug:"",site_visibility:!0,default_channels:["site"],ozon_category_id:"",ozon_type_id:"",wb_category_id:"",yandex_category_id:"",internal_attributes:[]}),f({ozon:"",wb:"",yandex:""}),w({ozon:[],wb:[],yandex:[]}),o(!0)},P=N=>{var R,I,L,T,A,H,D,B;m(N.id),h({internal_name:N.internal_name,slug:N.slug||"",site_visibility:N.site_visibility??!0,default_channels:N.default_channels||["site"],ozon_category_id:((I=(R=N.marketplace_mappings)==null?void 0:R.ozon)==null?void 0:I.category_id)||"",ozon_type_id:((T=(L=N.marketplace_mappings)==null?void 0:L.ozon)==null?void 0:T.type_id)||"",wb_category_id:((H=(A=N.marketplace_mappings)==null?void 0:A.wb)==null?void 0:H.category_id)||"",yandex_category_id:((B=(D=N.marketplace_mappings)==null?void 0:D.yandex)==null?void 0:B.category_id)||"",internal_attributes:N.internal_attributes||[]}),f({ozon:"",wb:"",yandex:""}),w({ozon:[],wb:[],yandex:[]}),o(!0)},k=async(N,R)=>{var I,L;if(confirm(`  "${R}"?`))try{await e.delete(`/api/internal-categories/${N}`),alert("  "),j()}catch(T){alert(" : "+(((L=(I=T.response)==null?void 0:I.data)==null?void 0:L.detail)||T.message))}},z=async()=>{var N,R;if(!c.internal_name){alert("  ");return}try{d?(await e.put(`/api/internal-categories/${d}`,c),alert("  ")):(await e.post("/api/internal-categories",c),alert("  ")),o(!1),j()}catch(I){alert(" : "+(((R=(N=I.response)==null?void 0:N.data)==null?void 0:R.detail)||I.message))}},b=async N=>{var I,L;const R=g[N];if(!(!R||R.length<2)){y(T=>({...T,[N]:!0}));try{const T=await e.get(`/api/categories/marketplace/${N}/search?query=${encodeURIComponent(R)}`);w(A=>({...A,[N]:T.data.categories||[]}))}catch(T){console.error(`Failed to search ${N}:`,T),alert(`  ${N}: ${((L=(I=T.response)==null?void 0:I.data)==null?void 0:L.detail)||T.message}`)}finally{y(T=>({...T,[N]:!1}))}}},S=(N,R)=>{N==="ozon"?h(I=>({...I,ozon_category_id:R.category_id||R.id,ozon_type_id:R.type_id||""})):N==="wb"?h(I=>({...I,wb_category_id:R.category_id||R.id})):N==="yandex"&&h(I=>({...I,yandex_category_id:R.category_id||R.id})),w(I=>({...I,[N]:[]})),f(I=>({...I,[N]:""}))},E=s.filter(N=>N.internal_name.toLowerCase().includes(i.toLowerCase()));return t.jsx("div",{className:"min-h-screen bg-[#0F172A] text-[#E5E7EB] p-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold text-[#06B6D4] mb-2",children:" "}),t.jsx("p",{className:"text-[#A7AFB8]",children:"        "})]}),t.jsxs("button",{onClick:_,className:"px-6 py-3 bg-[#06B6D4] text-[#0B1220] rounded-lg font-bold hover:bg-cyan-400 transition-colors flex items-center gap-2","data-testid":"create-category-button",children:[t.jsx(Ct,{}),"  "]})]}),t.jsxs("div",{className:"mb-6 relative",children:[t.jsx(hs,{className:"absolute left-4 top-3.5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:" ...",value:i,onChange:N=>u(N.target.value),className:"w-full pl-12 pr-4 py-3 bg-[#111827] border border-[#334155] rounded-lg text-white placeholder-gray-500 focus:border-[#22D3EE] focus:ring-2 focus:ring-[#22D3EE]/50 outline-none","data-testid":"category-search-input"})]}),r?t.jsx("div",{className:"text-center py-12 text-gray-400",children:"..."}):E.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-400 mb-4",children:"  "}),t.jsx("button",{onClick:_,className:"px-6 py-2 bg-[#06B6D4] text-[#0B1220] rounded-lg hover:bg-cyan-400",children:"  "})]}):t.jsx("div",{className:"bg-[#111827] border border-[#334155] rounded-xl overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-[#0F172A] border-b border-[#334155]",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-[#A7AFB8]",children:""}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-[#A7AFB8]",children:"Slug"}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-[#A7AFB8]",children:""}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-[#A7AFB8]",children:""}),t.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-[#A7AFB8]",children:""})]})}),t.jsx("tbody",{children:E.map(N=>{var R,I,L,T,A,H,D;return t.jsxs("tr",{className:"border-b border-[#334155] hover:bg-slate-800/60 transition-colors","data-testid":`category-row-${N.id}`,children:[t.jsx("td",{className:"px-6 py-4 font-medium",children:N.internal_name}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-400",children:N.slug||"-"}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex gap-2",children:[((I=(R=N.marketplace_mappings)==null?void 0:R.ozon)==null?void 0:I.category_id)&&t.jsx("span",{className:"px-2 py-1 bg-blue-500 text-white text-xs rounded",children:"Ozon"}),((T=(L=N.marketplace_mappings)==null?void 0:L.wb)==null?void 0:T.category_id)&&t.jsx("span",{className:"px-2 py-1 bg-purple-500 text-white text-xs rounded",children:"WB"}),((H=(A=N.marketplace_mappings)==null?void 0:A.yandex)==null?void 0:H.category_id)&&t.jsx("span",{className:"px-2 py-1 bg-yellow-500 text-black text-xs rounded",children:""})]})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-400",children:((D=N.internal_attributes)==null?void 0:D.length)||0}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>P(N),className:"p-2 text-blue-400 hover:bg-blue-500/20 rounded transition-colors","data-testid":`edit-category-${N.id}`,children:t.jsx(bp,{})}),t.jsx("button",{onClick:()=>k(N.id,N.internal_name),className:"p-2 text-red-400 hover:bg-red-500/20 rounded transition-colors","data-testid":`delete-category-${N.id}`,children:t.jsx(Kt,{})})]})})]},N.id)})})]})}),l&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center z-50 p-6 overflow-y-auto",children:t.jsxs("div",{className:"bg-[#111827] border border-[#334155] rounded-xl w-full max-w-4xl my-8",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-[#334155] flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-[#06B6D4]",children:d?" ":" "}),t.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-white transition-colors",children:t.jsx(Ke,{size:24})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-[#A7AFB8] mb-2",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:c.internal_name,onChange:N=>h(R=>({...R,internal_name:N.target.value})),className:"w-full px-4 py-2 bg-[#1F2937] border border-[#334155] rounded-lg text-white focus:border-[#22D3EE] focus:ring-2 focus:ring-[#22D3EE]/50 outline-none",placeholder:":  ","data-testid":"category-name-input"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[#A7AFB8] mb-2",children:"Slug"}),t.jsx("input",{type:"text",value:c.slug,onChange:N=>h(R=>({...R,slug:N.target.value})),className:"w-full px-4 py-2 bg-[#1F2937] border border-[#334155] rounded-lg text-white focus:border-[#22D3EE] focus:ring-2 focus:ring-[#22D3EE]/50 outline-none",placeholder:"computer-mice"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"  "}),t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-600/30 rounded-lg p-4 mb-4",children:t.jsxs("p",{className:"text-yellow-200 text-sm flex items-start gap-2",children:[t.jsx(cs,{className:"mt-0.5 flex-shrink-0"}),t.jsxs("span",{children:[t.jsx("strong",{children:":"}),"        .       ."]})]})}),t.jsxs("div",{className:"mb-4 p-4 bg-[#1F2937] border-l-4 border-blue-500 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("h4",{className:"font-bold text-blue-400",children:"Ozon"}),c.ozon_category_id&&t.jsxs("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-xs rounded flex items-center gap-1",children:[t.jsx(lt,{size:12})," : ",c.ozon_category_id]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:g.ozon,onChange:N=>f(R=>({...R,ozon:N.target.value})),onKeyDown:N=>N.key==="Enter"&&b("ozon"),placeholder:"  Ozon ( 2 )...",className:"w-full px-4 py-2 pr-24 bg-[#0F172A] border border-[#334155] rounded-lg text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50 outline-none"}),t.jsx("button",{onClick:()=>b("ozon"),disabled:x.ozon||g.ozon.length<2,className:"absolute right-2 top-1.5 px-3 py-1.5 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:x.ozon?"...":""})]}),v.ozon.length>0&&t.jsx("div",{className:"mt-2 max-h-48 overflow-y-auto bg-[#0F172A] border border-[#334155] rounded",children:v.ozon.map((N,R)=>t.jsxs("button",{onClick:()=>S("ozon",N),className:"w-full px-4 py-2 text-left hover:bg-blue-500/20 border-b border-[#334155] last:border-b-0 transition-colors",children:[t.jsx("div",{className:"font-medium text-white",children:N.category_name||N.name}),t.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",N.category_id||N.id,N.type_id&&` | Type: ${N.type_id}`]})]},R))})]}),t.jsxs("div",{className:"mb-4 p-4 bg-[#1F2937] border-l-4 border-purple-500 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("h4",{className:"font-bold text-purple-400",children:"Wildberries"}),c.wb_category_id&&t.jsxs("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-xs rounded flex items-center gap-1",children:[t.jsx(lt,{size:12})," : ",c.wb_category_id]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:g.wb,onChange:N=>f(R=>({...R,wb:N.target.value})),onKeyDown:N=>N.key==="Enter"&&b("wb"),placeholder:"  Wildberries ( 2 )...",className:"w-full px-4 py-2 pr-24 bg-[#0F172A] border border-[#334155] rounded-lg text-white focus:border-purple-500 focus:ring-2 focus:ring-purple-500/50 outline-none"}),t.jsx("button",{onClick:()=>b("wb"),disabled:x.wb||g.wb.length<2,className:"absolute right-2 top-1.5 px-3 py-1.5 bg-purple-500 text-white rounded text-sm hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed",children:x.wb?"...":""})]}),v.wb.length>0&&t.jsx("div",{className:"mt-2 max-h-48 overflow-y-auto bg-[#0F172A] border border-[#334155] rounded",children:v.wb.map((N,R)=>t.jsxs("button",{onClick:()=>S("wb",N),className:"w-full px-4 py-2 text-left hover:bg-purple-500/20 border-b border-[#334155] last:border-b-0 transition-colors",children:[t.jsx("div",{className:"font-medium text-white",children:N.category_name||N.name}),t.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",N.category_id||N.id]})]},R))})]}),t.jsxs("div",{className:"p-4 bg-[#1F2937] border-l-4 border-yellow-500 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("h4",{className:"font-bold text-yellow-400",children:" "}),c.yandex_category_id&&t.jsxs("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-xs rounded flex items-center gap-1",children:[t.jsx(lt,{size:12})," : ",c.yandex_category_id]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:g.yandex,onChange:N=>f(R=>({...R,yandex:N.target.value})),onKeyDown:N=>N.key==="Enter"&&b("yandex"),placeholder:"    ( 2 )...",className:"w-full px-4 py-2 pr-24 bg-[#0F172A] border border-[#334155] rounded-lg text-white focus:border-yellow-500 focus:ring-2 focus:ring-yellow-500/50 outline-none"}),t.jsx("button",{onClick:()=>b("yandex"),disabled:x.yandex||g.yandex.length<2,className:"absolute right-2 top-1.5 px-3 py-1.5 bg-yellow-500 text-black rounded text-sm hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed",children:x.yandex?"...":""})]}),v.yandex.length>0&&t.jsx("div",{className:"mt-2 max-h-48 overflow-y-auto bg-[#0F172A] border border-[#334155] rounded",children:v.yandex.map((N,R)=>t.jsxs("button",{onClick:()=>S("yandex",N),className:"w-full px-4 py-2 text-left hover:bg-yellow-500/20 border-b border-[#334155] last:border-b-0 transition-colors",children:[t.jsx("div",{className:"font-medium text-white",children:N.category_name||N.name}),t.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",N.category_id||N.id]})]},R))})]})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t border-[#334155] flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>o(!1),className:"px-6 py-2 bg-[#374151] text-white rounded-lg hover:bg-[#4B5563] transition-colors",children:""}),t.jsxs("button",{onClick:z,className:"px-6 py-2 bg-[#06B6D4] text-[#0B1220] rounded-lg font-bold hover:bg-cyan-400 transition-colors flex items-center gap-2","data-testid":"save-category-button",children:[t.jsx(Br,{})," "]})]})]})})]})})}function jm(){const{api:e}=de(),{id:s}=Sl(),n=Dt(),[r,a]=p.useState([]),[l,o]=p.useState([]),[d,m]=p.useState([]),[i,u]=p.useState({warehouse_id:"",supplier_id:"",items:[]}),[c,h]=p.useState(""),[g,f]=p.useState(!1),[v,w]=p.useState(null);p.useEffect(()=>{x(),s&&y()},[s]);const x=async()=>{try{const[R,I,L]=await Promise.all([e.get("/api/warehouses"),e.get("/api/suppliers"),e.get("/api/catalog/products?limit=500")]);a(R.data),o(I.data),m(L.data)}catch(R){V.error("  "),console.error(R)}},y=async()=>{try{const R=await e.get(`/api/income-orders/${s}`);w(R.data),u({warehouse_id:R.data.warehouse_id||"",supplier_id:R.data.supplier_id||"",items:R.data.items||[]})}catch(R){V.error("  "),console.error(R)}},j=R=>{const I=i.items.find(L=>L.article===R.article);u(I?{...i,items:i.items.map(L=>L.article===R.article?{...L,quantity:L.quantity+1}:L)}:{...i,items:[...i.items,{article:R.article,name:R.name,quantity:1,purchase_price:0,additional_expenses:0,total:0}]}),h("")},_=(R,I,L)=>{const T=[...i.items];if(T[R][I]=L,I==="quantity"||I==="purchase_price"||I==="additional_expenses"){const A=T[R];A.total=(A.purchase_price+A.additional_expenses)*A.quantity}u({...i,items:T})},P=R=>{u({...i,items:i.items.filter((I,L)=>L!==R)})},k=async()=>{var R,I;if(!i.warehouse_id||!i.supplier_id){V.error("   ");return}f(!0);try{if(s)await e.put(`/api/income-orders/${s}`,i),V.success(" ");else{const L=await e.post("/api/income-orders",i);V.success(" "),n(`/income-orders/${L.data.order.id}/edit`)}}catch(L){V.error(((I=(R=L.response)==null?void 0:R.data)==null?void 0:I.detail)||" ")}f(!1)},z=async()=>{var R,I;if(!s){V.error("  ");return}if(confirm(" ?   !")){f(!0);try{await e.post(`/api/income-orders/${s}/accept`),V.success(" !  ."),n("/income-orders")}catch(L){V.error(((I=(R=L.response)==null?void 0:R.data)==null?void 0:I.detail)||" ")}f(!1)}},b=async()=>{var R,I;if(confirm(" ?   !")){f(!0);try{await e.post(`/api/income-orders/${s}/cancel`),V.success(" "),y()}catch(L){V.error(((I=(R=L.response)==null?void 0:R.data)==null?void 0:I.detail)||" ")}f(!1)}},S=d.filter(R=>{var I,L;return((I=R.article)==null?void 0:I.toLowerCase().includes(c.toLowerCase()))||((L=R.name)==null?void 0:L.toLowerCase().includes(c.toLowerCase()))}),E=i.items.reduce((R,I)=>({quantity:R.quantity+(I.quantity||0),amount:R.amount+(I.total||0)}),{quantity:0,amount:0}),N=(v==null?void 0:v.status)==="accepted";return t.jsx("div",{className:"min-h-screen bg-mm-black text-mm-text p-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-mm-cyan uppercase mb-2","data-testid":"form-title",children:s?` #${s.substring(0,8)}`:" "}),t.jsx("p",{className:"text-mm-text-secondary text-sm",children:N?"// ":"// "})]}),t.jsx("div",{className:"flex items-center space-x-2",children:N?t.jsxs("span",{className:"px-4 py-2 bg-mm-green/20 text-mm-green border border-mm-green uppercase text-sm font-mono",children:[t.jsx(FiCheck,{className:"inline mr-2"}),""]}):t.jsx("span",{className:"px-4 py-2 bg-mm-yellow/20 text-mm-yellow border border-mm-yellow uppercase text-sm font-mono",children:""})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"card-neon","data-testid":"warehouse-supplier-section",children:[t.jsx("h3",{className:"text-mm-cyan uppercase text-sm mb-4",children:" "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:"  *"}),t.jsxs("select",{value:i.warehouse_id,onChange:R=>u({...i,warehouse_id:R.target.value}),className:"input-neon w-full",disabled:N,"data-testid":"warehouse-select",required:!0,children:[t.jsx("option",{value:"",children:" ..."}),r.map(R=>t.jsx("option",{value:R.id,children:R.name},R.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-2 text-mm-text-secondary uppercase",children:" *"}),t.jsxs("select",{value:i.supplier_id,onChange:R=>u({...i,supplier_id:R.target.value}),className:"input-neon w-full",disabled:N,"data-testid":"supplier-select",required:!0,children:[t.jsx("option",{value:"",children:" ..."}),l.map(R=>t.jsx("option",{value:R.id,children:R.name},R.id))]})]})]})]}),t.jsxs("div",{className:"card-neon bg-mm-darker","data-testid":"totals-section",children:[t.jsx("h3",{className:"text-mm-cyan uppercase text-sm mb-4",children:""}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-mm-text-secondary",children:":"}),t.jsx("span",{className:"text-2xl font-mono font-bold text-mm-text",children:i.items.length})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-mm-text-secondary",children:" :"}),t.jsx("span",{className:"text-2xl font-mono font-bold text-mm-cyan",children:E.quantity})]}),t.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-mm-border",children:[t.jsx("span",{className:"text-mm-text-secondary",children:":"}),t.jsxs("span",{className:"text-2xl font-mono font-bold text-mm-green",children:[(E.amount/100).toFixed(2)," "]})]})]})]})]}),!N&&t.jsxs("div",{className:"card-neon","data-testid":"add-products-section",children:[t.jsx("h3",{className:"text-mm-cyan uppercase text-sm mb-4",children:" "}),t.jsxs("div",{className:"relative",children:[t.jsx(hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-mm-text-tertiary"}),t.jsx("input",{type:"text",value:c,onChange:R=>h(R.target.value),className:"input-neon w-full pl-10",placeholder:"    ...","data-testid":"product-search-input"})]}),c&&S.length>0&&t.jsx("div",{className:"mt-2 max-h-60 overflow-y-auto border border-mm-border bg-mm-darker",children:S.slice(0,10).map(R=>t.jsxs("button",{onClick:()=>j(R),className:"w-full text-left px-4 py-3 hover:bg-mm-gray transition-colors border-b border-mm-border last:border-b-0","data-testid":`add-product-${R.article}`,children:[t.jsx("div",{className:"font-mono text-sm text-mm-cyan",children:R.article}),t.jsx("div",{className:"text-sm text-mm-text-secondary",children:R.name})]},R.article))})]}),i.items.length>0&&t.jsx("div",{className:"card-neon overflow-hidden","data-testid":"items-table",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:" ()"}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:" ()"}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:" ()"}),!N&&t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""})]})}),t.jsx("tbody",{children:i.items.map((R,I)=>t.jsxs("tr",{className:"border-b border-mm-border","data-testid":`item-row-${I}`,children:[t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-cyan",children:R.article}),t.jsx("td",{className:"py-4 px-4 text-sm",children:R.name}),t.jsx("td",{className:"py-4 px-4",children:N?t.jsx("div",{className:"text-center font-mono font-bold",children:R.quantity}):t.jsx("input",{type:"number",min:"1",value:R.quantity,onChange:L=>_(I,"quantity",parseInt(L.target.value)||0),className:"input-neon w-24 text-center font-mono","data-testid":`quantity-${I}`})}),t.jsx("td",{className:"py-4 px-4",children:N?t.jsx("div",{className:"text-right font-mono",children:(R.purchase_price/100).toFixed(2)}):t.jsx("input",{type:"number",min:"0",step:"0.01",value:(R.purchase_price/100).toFixed(2),onChange:L=>_(I,"purchase_price",Math.round(parseFloat(L.target.value||0)*100)),className:"input-neon w-32 text-right font-mono","data-testid":`purchase-price-${I}`})}),t.jsx("td",{className:"py-4 px-4",children:N?t.jsx("div",{className:"text-right font-mono",children:(R.additional_expenses/100).toFixed(2)}):t.jsx("input",{type:"number",min:"0",step:"0.01",value:(R.additional_expenses/100).toFixed(2),onChange:L=>_(I,"additional_expenses",Math.round(parseFloat(L.target.value||0)*100)),className:"input-neon w-32 text-right font-mono","data-testid":`expenses-${I}`})}),t.jsx("td",{className:"py-4 px-4 text-right font-mono font-bold text-mm-green",children:(R.total/100).toFixed(2)}),!N&&t.jsx("td",{className:"py-4 px-4 text-center",children:t.jsx("button",{onClick:()=>P(I),className:"px-2 py-2 border border-mm-red text-mm-red hover:bg-mm-red/10 transition-colors","data-testid":`remove-item-${I}`,children:t.jsx(Kt,{size:16})})})]},I))})]})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("button",{onClick:()=>n("/income-orders"),className:"btn-secondary","data-testid":"back-btn",children:"   "}),t.jsxs("div",{className:"flex items-center space-x-3",children:[!N&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:k,disabled:g||!i.warehouse_id||!i.supplier_id,className:"btn-secondary flex items-center space-x-2 disabled:opacity-50","data-testid":"save-draft-btn",children:[t.jsx(Br,{}),t.jsx("span",{children:" "})]}),t.jsxs("button",{onClick:z,disabled:g||!s||i.items.length===0,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 bg-mm-green border-mm-green hover:bg-mm-green/20","data-testid":"accept-btn",children:[t.jsx(il,{}),t.jsx("span",{children:""})]})]}),N&&t.jsxs("button",{onClick:b,disabled:g,className:"btn-secondary flex items-center space-x-2 border-mm-red text-mm-red hover:bg-mm-red/10","data-testid":"cancel-btn",children:[t.jsx(Sc,{}),t.jsx("span",{children:" "})]})]})]})]})})}function $p({type:e="fbs",onClose:s,onSuccess:n}){const{api:r}=de(),[a,l]=p.useState(!1),[o,d]=p.useState([]),[m,i]=p.useState(!0),[u,c]=p.useState({integration_id:"",date_from:new Date(Date.now()-180*24*60*60*1e3).toISOString().split("T")[0],date_to:new Date().toISOString().split("T")[0],update_stock:!0});p.useEffect(()=>{h()},[]);const h=async()=>{try{i(!0);const w=(await r.get("/api/seller/api-keys")).data||[],x=e==="fbo"?w.filter(y=>y.marketplace==="ozon"):w;if(d(x),x.length>0){const y=x[x.length-1];c(j=>({...j,integration_id:y.id}))}}catch(v){console.error("Failed to load integrations:",v),V.error("  ")}finally{i(!1)}},g=async()=>{var v,w;if(!u.integration_id){V.error(" ");return}if(!u.date_from||!u.date_to){V.error(" ");return}try{l(!0);const x=e==="fbs"?"/api/orders/fbs/import":"/api/orders/fbo/import",y=e==="fbs"?{...u}:{integration_id:u.integration_id,date_from:u.date_from,date_to:u.date_to},j=await r.post(x,y),_=e==="fbs"&&u.update_stock?` ${j.data.imported} ,  ${j.data.stock_updated} `:` ${j.data.imported}  (  )`;V.success(_),n(),s()}catch(x){console.error("Failed to import orders:",x),V.error(((w=(v=x.response)==null?void 0:v.data)==null?void 0:w.detail)||"  ")}finally{l(!1)}},f=v=>{const x={ozon:"Ozon",wb:"Wildberries",yandex:"Yandex Market"}[v.marketplace]||v.marketplace;return v.name||`${x} (${v.client_id||"API"})`};return m?t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-mm-darker border border-mm-cyan rounded-lg p-6",children:t.jsx("p",{className:"text-mm-cyan font-mono",children:" ..."})})}):o.length===0?t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:s,children:t.jsxs("div",{className:"bg-mm-darker border border-mm-red rounded-lg p-6 max-w-md",onClick:v=>v.stopPropagation(),children:[t.jsx("h3",{className:"text-xl font-mono text-mm-red mb-4",children:"   "}),t.jsx("p",{className:"text-mm-text-secondary mb-4",children:e==="fbo"?"  FBO    Ozon.":"      ."}),t.jsx("p",{className:"text-sm text-mm-text-tertiary mb-4",children:'   ""   API .'}),t.jsx("button",{onClick:s,className:"btn-neon w-full",children:""})]})}):t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:s,children:t.jsxs("div",{className:"bg-mm-darker border border-mm-cyan rounded-lg p-6 max-w-2xl w-full mx-4",onClick:v=>v.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h3",{className:"text-xl font-mono text-mm-cyan uppercase",children:["  ",e==="fbs"?"FBS":"FBO"]}),t.jsx("button",{onClick:s,className:"text-mm-text-secondary hover:text-mm-cyan transition-colors",children:t.jsx(Ke,{size:24})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-mono text-mm-text-secondary mb-2",children:" *"}),t.jsx("select",{className:"input-neon w-full",value:u.integration_id,onChange:v=>c({...u,integration_id:v.target.value}),children:o.map(v=>t.jsx("option",{value:v.id,children:f(v)},v.id))}),t.jsx("p",{className:"text-xs text-mm-text-tertiary mt-1",children:'//      ""'})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-mono text-mm-text-secondary mb-2",children:"  *"}),t.jsx("input",{type:"date",className:"input-neon w-full",value:u.date_from,onChange:v=>c({...u,date_from:v.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-mono text-mm-text-secondary mb-2",children:"  *"}),t.jsx("input",{type:"date",className:"input-neon w-full",value:u.date_to,onChange:v=>c({...u,date_to:v.target.value})})]})]}),e==="fbs"&&t.jsxs("label",{className:"flex items-center space-x-3 border border-mm-border p-4 rounded hover:border-mm-cyan transition-colors cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:u.update_stock,onChange:v=>c({...u,update_stock:v.target.checked}),className:"toggle-switch"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-mm-text",children:" "}),t.jsx("div",{className:"text-xs text-mm-text-tertiary",children:"     "})]})]}),e==="fbo"&&t.jsx("div",{className:"bg-mm-purple/10 border border-mm-purple p-4 rounded",children:t.jsx("p",{className:"text-sm text-mm-text-secondary font-mono",children:" FBO      (  )"})}),t.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[t.jsx("button",{onClick:s,className:"btn-neon-outline",disabled:a,children:""}),t.jsxs("button",{onClick:g,disabled:a,className:"btn-neon flex items-center space-x-2",children:[t.jsx(mt,{}),t.jsx("span",{children:a?"...":" "})]})]})]})]})})}function cj({order:e,onStatusUpdate:s}){var m,i,u,c,h,g;const{api:n}=de(),[r,a]=p.useState(!1),l=f=>{const w={new:{color:"bg-mm-blue/20 text-mm-blue border-mm-blue",label:""},awaiting_shipment:{color:"bg-mm-yellow/20 text-mm-yellow border-mm-yellow",label:" "},delivering:{color:"bg-mm-cyan/20 text-mm-cyan border-mm-cyan",label:""},delivered:{color:"bg-mm-green/20 text-mm-green border-mm-green",label:""},cancelled:{color:"bg-mm-red/20 text-mm-red border-mm-red",label:""},imported:{color:"bg-mm-blue/20 text-mm-blue border-mm-blue",label:""}}[f]||{color:"bg-mm-gray text-mm-text-secondary border-mm-border",label:f};return t.jsx("span",{className:`px-3 py-1 text-sm font-mono border rounded ${w.color}`,children:w.label})},o=async()=>{var f,v;try{a(!0);const w=await n.get(`/api/orders/fbs/${e.id}/label`);w.data.label_url?(window.open(w.data.label_url,"_blank"),V.success(" ")):V.error(" ")}catch(w){console.error("Failed to print label:",w),V.error("  : "+(((v=(f=w.response)==null?void 0:f.data)==null?void 0:v.detail)||w.message))}finally{a(!1)}},d=async()=>{try{a(!0),await n.post(`/api/orders/fbs/${e.id}/label/refresh`),V.success(" ")}catch(f){console.error("Failed to refresh label:",f),V.error("  ")}finally{a(!1)}};return t.jsxs("div",{className:"space-y-6","data-testid":"order-info-tab",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-2",children:"//  "}),t.jsx("p",{className:"text-mm-text font-mono",children:e.order_number})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-2",children:"// "}),t.jsx("p",{className:"text-mm-cyan font-mono uppercase",children:e.marketplace})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-2",children:"// "}),l(e.status)]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-2",children:"//  "}),t.jsx("p",{className:"text-mm-text font-mono",children:new Date(e.created_at).toLocaleString("ru-RU")})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-2",children:"// External ID"}),t.jsx("p",{className:"text-mm-text font-mono",children:e.external_order_id})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-2",children:"// "}),t.jsx("p",{className:"text-mm-text font-mono",children:e.warehouse_id})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-2",children:"//  "}),t.jsx("p",{className:"text-mm-text font-mono",children:e.stock_updated?"":""})]})]})]}),t.jsxs("div",{className:"border-t border-mm-border pt-6",children:[t.jsxs("h3",{className:"flex items-center space-x-2 text-sm uppercase font-mono text-mm-cyan mb-4",children:[t.jsx(Bn,{}),t.jsx("span",{children:""})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-2",children:"// "}),t.jsx("p",{className:"text-mm-text font-mono",children:((m=e.customer)==null?void 0:m.full_name)||" "})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-2",children:"// "}),t.jsx("p",{className:"text-mm-text font-mono",children:((i=e.customer)==null?void 0:i.phone)||" "})]}),((u=e.customer)==null?void 0:u.address)&&t.jsxs("div",{className:"col-span-2",children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-2",children:"// "}),t.jsx("p",{className:"text-mm-text font-mono",children:e.customer.address})]})]})]}),t.jsxs("div",{className:"border-t border-mm-border pt-6",children:[t.jsxs("h3",{className:"flex items-center space-x-2 text-sm uppercase font-mono text-mm-cyan mb-4",children:[t.jsx(We,{}),t.jsx("span",{children:" "})]}),t.jsx("div",{className:"border border-mm-border rounded overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-mm-border/30",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left py-3 px-4 text-xs text-mm-text-secondary uppercase font-mono",children:""}),t.jsx("th",{className:"text-left py-3 px-4 text-xs text-mm-text-secondary uppercase font-mono",children:""}),t.jsx("th",{className:"text-right py-3 px-4 text-xs text-mm-text-secondary uppercase font-mono",children:"-"}),t.jsx("th",{className:"text-right py-3 px-4 text-xs text-mm-text-secondary uppercase font-mono",children:""}),t.jsx("th",{className:"text-right py-3 px-4 text-xs text-mm-text-secondary uppercase font-mono",children:""})]})}),t.jsx("tbody",{children:(c=e.items)==null?void 0:c.map((f,v)=>t.jsxs("tr",{className:"border-t border-mm-border",children:[t.jsx("td",{className:"py-3 px-4 font-mono text-sm text-mm-text",children:f.article}),t.jsx("td",{className:"py-3 px-4 font-mono text-sm text-mm-text",children:f.name}),t.jsx("td",{className:"py-3 px-4 font-mono text-sm text-mm-text text-right",children:f.quantity}),t.jsxs("td",{className:"py-3 px-4 font-mono text-sm text-mm-text text-right",children:[f.price.toFixed(2)," "]}),t.jsxs("td",{className:"py-3 px-4 font-mono text-sm text-mm-cyan text-right",children:[f.total.toFixed(2)," "]})]},v))}),t.jsx("tfoot",{className:"bg-mm-border/30 border-t border-mm-border",children:t.jsxs("tr",{children:[t.jsx("td",{colSpan:"4",className:"py-3 px-4 text-sm font-mono text-mm-text-secondary text-right uppercase",children:":"}),t.jsxs("td",{className:"py-3 px-4 font-mono text-lg text-mm-cyan text-right font-bold",children:[((g=(h=e.totals)==null?void 0:h.total)==null?void 0:g.toFixed(2))||"0.00"," "]})]})})]})})]}),t.jsxs("div",{className:"border-t border-mm-border pt-6",children:[t.jsx("h3",{className:"text-sm uppercase font-mono text-mm-cyan mb-4",children:"//   "}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsxs("button",{onClick:o,disabled:r,className:"btn-neon flex items-center space-x-2","data-testid":"print-label-btn",children:[t.jsx(wp,{}),t.jsx("span",{children:r?"...":" "})]}),t.jsxs("button",{onClick:d,disabled:r,className:"px-4 py-2 font-mono text-sm border border-mm-border rounded hover:bg-mm-border transition-colors flex items-center space-x-2","data-testid":"refresh-label-btn",children:[t.jsx(qe,{className:r?"animate-spin":""}),t.jsx("span",{children:""})]})]})]})]})}function dj({order:e,onSplit:s}){const[n,r]=p.useState([{box_number:1,items:e.items.map(u=>({...u}))}]),a=()=>{r([...n,{box_number:n.length+1,items:[]}]),V.success(" ")},l=u=>{if(n.length===1){V.error("   ");return}const c=n.filter((h,g)=>g!==u);r(c),V.success(" ")},o=(u,c,h)=>{const g=[...n];g[u].items[c].quantity=parseInt(h)||0,r(g)},d=(u,c,h)=>{const g=[...n],f=g[u].items[c];g[u].items.splice(c,1),g[h].items.push({...f}),r(g),V.success(" ")},m=async()=>{const u={};e.items.forEach(g=>{u[g.article]=g.quantity});const c={};n.forEach(g=>{g.items.forEach(f=>{c[f.article]=(c[f.article]||0)+f.quantity})});for(const g in u)if(!c[g]||c[g]!==u[g]){V.error(`    ${g}. : ${u[g]}, : ${c[g]||0}`);return}if(n.some(g=>g.items.length===0)){V.error("  ");return}const h={boxes:n.map(g=>({box_number:g.box_number,items:g.items.map(f=>({article:f.article,quantity:f.quantity}))}))};await s(h)},i=e.marketplace!=="wb"&&n.length>1;return e.marketplace==="wb"?t.jsxs("div",{className:"text-center py-12","data-testid":"order-split-tab",children:[t.jsx(We,{className:"mx-auto text-mm-text-tertiary mb-4",size:48}),t.jsx("p",{className:"text-mm-text-secondary font-mono mb-2",children:"//      Wildberries"}),t.jsx("p",{className:"text-sm text-mm-text-tertiary font-mono",children:"Wildberries    "})]}):t.jsxs("div",{className:"space-y-6","data-testid":"order-split-tab",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm uppercase font-mono text-mm-cyan",children:"//   "}),t.jsx("p",{className:"text-xs text-mm-text-secondary font-mono mt-1",children:"   .    ."})]}),t.jsxs("button",{onClick:a,className:"btn-neon flex items-center space-x-2","data-testid":"add-box-btn",children:[t.jsx(Ct,{}),t.jsx("span",{children:" "})]})]}),t.jsx("div",{className:"space-y-4",children:n.map((u,c)=>t.jsxs("div",{className:"border border-mm-border rounded-lg p-4","data-testid":`box-${c}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h4",{className:"font-mono text-mm-cyan uppercase",children:[" #",u.box_number]}),n.length>1&&t.jsx("button",{onClick:()=>l(c),className:"p-2 text-mm-red hover:bg-mm-red/10 rounded transition-colors","data-testid":`remove-box-${c}`,children:t.jsx(Kt,{size:16})})]}),u.items.length===0?t.jsx("p",{className:"text-sm text-mm-text-secondary font-mono text-center py-4",children:"//  .      ."}):t.jsx("div",{className:"space-y-2",children:u.items.map((h,g)=>t.jsxs("div",{className:"flex items-center justify-between bg-mm-border/20 p-3 rounded",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-mono text-mm-text",children:h.name}),t.jsxs("p",{className:"text-xs text-mm-text-secondary font-mono",children:[": ",h.article]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-mm-text-secondary uppercase font-mono block mb-1",children:"-:"}),t.jsx("input",{type:"number",min:"0",max:h.quantity,value:h.quantity,onChange:f=>o(c,g,f.target.value),className:"w-20 px-2 py-1 bg-mm-dark border border-mm-border rounded text-mm-text font-mono text-center focus:border-mm-cyan outline-none","data-testid":`item-quantity-${c}-${g}`})]}),n.length>1&&t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-mm-text-secondary uppercase font-mono block mb-1",children:" :"}),t.jsx("select",{onChange:f=>{const v=parseInt(f.target.value);v!==c&&d(c,g,v)},value:c,className:"px-2 py-1 bg-mm-dark border border-mm-border rounded text-mm-text font-mono focus:border-mm-cyan outline-none",children:n.map((f,v)=>t.jsxs("option",{value:v,children:["#",v+1]},v))})]})]})]},g))})]},c))}),t.jsx("div",{className:"flex justify-end pt-4 border-t border-mm-border",children:t.jsx("button",{onClick:m,disabled:!i,className:"btn-neon disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"save-split-btn",children:" "})}),n.length===1&&t.jsx("p",{className:"text-xs text-mm-text-tertiary font-mono text-center",children:"//       "})]})}function mj({history:e}){const s=n=>({status_changed:" ",split:" ",label_printed:" ",label_refreshed:" ",note_added:" ",created:""})[n]||n;return!e||e.length===0?t.jsxs("div",{className:"text-center py-12","data-testid":"order-history-tab",children:[t.jsx(ps,{className:"mx-auto text-mm-text-tertiary mb-4",size:48}),t.jsx("p",{className:"text-mm-text-secondary font-mono mb-2",children:"//   "}),t.jsx("p",{className:"text-sm text-mm-text-tertiary font-mono",children:"     "})]}):t.jsxs("div",{className:"space-y-4","data-testid":"order-history-tab",children:[t.jsx("h3",{className:"text-sm uppercase font-mono text-mm-cyan mb-4",children:"//  "}),t.jsx("div",{className:"space-y-3",children:e.map((n,r)=>t.jsxs("div",{className:"border border-mm-border rounded-lg p-4 hover:bg-mm-border/10 transition-colors","data-testid":`history-entry-${r}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-mm-cyan/10 rounded",children:t.jsx(ps,{className:"text-mm-cyan",size:16})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-mono text-mm-text",children:s(n.action||"status_changed")}),t.jsx("p",{className:"text-xs text-mm-text-secondary font-mono",children:new Date(n.changed_at||n.timestamp).toLocaleString("ru-RU")})]})]}),n.changed_by&&t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-mm-text-secondary font-mono",children:[t.jsx(Bn,{size:12}),t.jsx("span",{children:n.changed_by})]})]}),n.status&&t.jsxs("div",{className:"mt-3 pl-11",children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-1",children:"// "}),t.jsx("p",{className:"text-sm font-mono text-mm-cyan",children:n.status})]}),n.comment&&t.jsxs("div",{className:"mt-3 pl-11",children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-1",children:"// "}),t.jsx("p",{className:"text-sm font-mono text-mm-text",children:n.comment})]}),n.details&&t.jsxs("div",{className:"mt-3 pl-11",children:[t.jsx("p",{className:"text-xs text-mm-text-secondary uppercase font-mono mb-1",children:"// "}),t.jsx("pre",{className:"text-xs font-mono text-mm-text-tertiary bg-mm-dark p-2 rounded overflow-x-auto",children:JSON.stringify(n.details,null,2)})]})]},r))})]})}function uj({order:e,isOpen:s,onClose:n,onUpdate:r}){const{api:a}=de(),[l,o]=p.useState("info"),[d,m]=p.useState(e),[i,u]=p.useState(!1);p.useEffect(()=>{e&&s&&c()},[e,s]);const c=async()=>{try{u(!0);const v=await a.get(`/api/orders/fbs/${e.id}`);m(v.data)}catch(v){console.error("Failed to load order details:",v),V.error("   ")}finally{u(!1)}},h=async v=>{var w,x;try{await a.post(`/api/orders/fbs/${e.id}/split`,v),V.success("  "),await c(),r&&r()}catch(y){console.error("Failed to split order:",y),V.error("  : "+(((x=(w=y.response)==null?void 0:w.data)==null?void 0:x.detail)||y.message))}},g=async(v,w)=>{try{await a.put(`/api/orders/fbs/${e.id}/status`,{status:v,comment:w}),V.success("  "),await c(),r&&r()}catch(x){console.error("Failed to update status:",x),V.error("  ")}};if(!s||!d)return null;const f=[{id:"info",label:" ",icon:P0},{id:"split",label:" ",icon:We},{id:"history",label:" ",icon:ps}];return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-mm-dark/80 backdrop-blur-sm","data-testid":"order-detail-modal",children:t.jsxs("div",{className:"card-neon w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between border-b border-mm-border p-6",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-mono text-mm-cyan uppercase mb-1",children:[" ",d.order_number]}),t.jsxs("p",{className:"text-sm text-mm-text-secondary font-mono",children:["// ",d.marketplace.toUpperCase()," | ",new Date(d.created_at).toLocaleString("ru-RU")]})]}),t.jsx("button",{onClick:n,className:"p-2 hover:bg-mm-border rounded transition-colors","data-testid":"close-modal",children:t.jsx(Ke,{size:24,className:"text-mm-text-secondary"})})]}),t.jsx("div",{className:"flex border-b border-mm-border px-6",children:f.map(v=>t.jsxs("button",{onClick:()=>o(v.id),className:`flex items-center space-x-2 px-4 py-3 font-mono text-sm transition-colors border-b-2 ${l===v.id?"border-mm-cyan text-mm-cyan":"border-transparent text-mm-text-secondary hover:text-mm-text"}`,"data-testid":`tab-${v.id}`,children:[t.jsx(v.icon,{size:16}),t.jsx("span",{children:v.label})]},v.id))}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("p",{className:"text-mm-cyan animate-pulse font-mono",children:"// ..."})}):t.jsxs(t.Fragment,{children:[l==="info"&&t.jsx(cj,{order:d,onStatusUpdate:g}),l==="split"&&t.jsx(dj,{order:d,onSplit:h}),l==="history"&&t.jsx(mj,{history:d.status_history||[]})]})}),t.jsx("div",{className:"border-t border-mm-border p-6 flex justify-end space-x-4",children:t.jsx("button",{onClick:n,className:"px-6 py-2 font-mono text-mm-text-secondary border border-mm-border rounded hover:bg-mm-border transition-colors",children:""})})]})})}function xj({activeStatus:e,onStatusChange:s,stats:n}){const r=[{key:"all",label:"",color:"text-mm-text"},{key:"new",label:"",color:"text-mm-blue"},{key:"imported",label:"",color:"text-mm-blue"},{key:"awaiting_shipment",label:" ",color:"text-mm-yellow"},{key:"delivering",label:" ",color:"text-mm-cyan"},{key:"delivered",label:"",color:"text-mm-green"},{key:"cancelled",label:"",color:"text-mm-red"}],a=l=>l==="all"?n.total||0:n[l]||0;return t.jsx("div",{className:"flex flex-wrap gap-2 mb-6","data-testid":"status-filters",children:r.map(l=>t.jsxs("button",{onClick:()=>s(l.key),className:`px-4 py-2 rounded border font-mono text-sm transition-all ${e===l.key?`${l.color} border-current bg-current/10`:"text-mm-text-secondary border-mm-border hover:border-mm-text-secondary"}`,"data-testid":`status-filter-${l.key}`,children:[l.label,t.jsx("span",{className:"ml-2 opacity-70",children:a(l.key)})]},l.key))})}function pj({selectedCount:e,onPrintLabels:s,onExportExcel:n,onChangeStatus:r,onClearSelection:a}){return e===0?null:t.jsxs("div",{className:"fixed bottom-8 right-8 card-neon p-6 shadow-2xl z-40 min-w-96","data-testid":"bulk-actions-panel",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-mm-text-secondary uppercase font-mono",children:"// "}),t.jsx("p",{className:"text-2xl text-mm-cyan font-mono font-bold",children:e})]}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-mm-border rounded transition-colors","data-testid":"clear-selection",children:t.jsx(Ke,{size:20,className:"text-mm-text-secondary"})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("button",{onClick:s,className:"w-full btn-neon flex items-center justify-center space-x-2","data-testid":"bulk-print-labels",children:[t.jsx(wp,{}),t.jsx("span",{children:" "})]}),t.jsxs("button",{onClick:n,className:"w-full px-4 py-2 bg-mm-green/20 text-mm-green border border-mm-green rounded hover:bg-mm-green/30 transition-colors font-mono text-sm flex items-center justify-center space-x-2","data-testid":"bulk-export-excel",children:[t.jsx(mt,{}),t.jsx("span",{children:"  EXCEL"})]}),t.jsxs("button",{onClick:r,className:"w-full px-4 py-2 bg-mm-border/50 text-mm-text border border-mm-border rounded hover:bg-mm-border transition-colors font-mono text-sm flex items-center justify-center space-x-2","data-testid":"bulk-change-status",children:[t.jsx(Is,{}),t.jsx("span",{children:" "})]})]})]})}function hj(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState([]),[l,o]=p.useState(!1),[d,m]=p.useState(!1),[i,u]=p.useState(null),[c,h]=p.useState(!1),[g,f]=p.useState("all"),[v,w]=p.useState([]),[x,y]=p.useState({}),[j,_]=p.useState(!1),[P,k]=p.useState("");p.useEffect(()=>{z()},[]),p.useEffect(()=>{S()},[s,g,P]);const z=async()=>{try{o(!0);const $=await e.get("/api/orders/fbs");n($.data),b($.data)}catch($){console.error("Failed to load FBS orders:",$)}finally{o(!1)}},b=$=>{const Q={total:$.length,new:0,imported:0,awaiting_shipment:0,delivering:0,delivered:0,cancelled:0};$.forEach(C=>{Q.hasOwnProperty(C.status)&&Q[C.status]++}),y(Q)},S=()=>{let $=s;if(g!=="all"&&($=$.filter(Q=>Q.status===g)),P.trim()){const Q=P.toLowerCase().trim();$=$.filter(C=>{var O,W;const q=(O=C.items)==null?void 0:O.some(se=>{var Z,oe;return((Z=se.article)==null?void 0:Z.toLowerCase().includes(Q))||((oe=se.name)==null?void 0:oe.toLowerCase().includes(Q))}),J=(W=C.order_number)==null?void 0:W.toLowerCase().includes(Q);return q||J})}a($)},E=$=>{u($),h(!0)},N=()=>{h(!1),u(null)},R=()=>{z()},I=$=>{w(Q=>Q.includes($)?Q.filter(C=>C!==$):[...Q,$])},L=()=>{v.length===r.length?w([]):w(r.map($=>$.id))},T=async()=>{try{V.loading(" ...");const $=await e.post("/api/orders/fbs/labels/bulk",{order_ids:v});$.data.labels.forEach((Q,C)=>{setTimeout(()=>{window.open(Q.label_url,"_blank")},C*500)}),V.dismiss(),V.success(` ${$.data.labels.length} `),$.data.errors.length>0&&V.warning(`: ${$.data.errors.length}`)}catch{V.dismiss(),V.error("  ")}},A=async()=>{try{V.loading(" ...");const $=r.filter(W=>v.includes(W.id)),Q=["ID ",""," ","","","",""," "],C=$.map(W=>{var se,Z,oe;return[W.order_number,W.marketplace.toUpperCase(),new Date(W.created_at).toLocaleString("ru-RU"),W.status,((se=W.customer)==null?void 0:se.full_name)||"",(Z=W.items)==null?void 0:Z.map(Re=>`${Re.article} (${Re.quantity})`).join("; "),((oe=W.totals)==null?void 0:oe.total)||0,W.stock_updated?"":""]}),q=[Q.join(","),...C.map(W=>W.map(se=>`"${se}"`).join(","))].join(`
`),J=new Blob(["\uFEFF"+q],{type:"text/csv;charset=utf-8;"}),O=document.createElement("a");O.href=URL.createObjectURL(J),O.download=`orders_fbs_${new Date().toISOString().split("T")[0]}.csv`,O.click(),V.dismiss(),V.success(" ")}catch{V.dismiss(),V.error(" ")}},H=()=>{V.info("  ")},D=async()=>{var $,Q;try{_(!0),V.loading("   ...");const C=await e.post("/api/orders/fbs/refresh-statuses",{});V.dismiss(),V.success(` : ${C.data.updated}`),await z()}catch(C){V.dismiss(),V.error("  : "+(((Q=($=C.response)==null?void 0:$.data)==null?void 0:Q.detail)||C.message))}finally{_(!1)}},B=$=>{const C={new:{color:"text-mm-blue border-mm-blue",label:""},awaiting_shipment:{color:"text-mm-yellow border-mm-yellow",label:" "},delivering:{color:"text-mm-cyan border-mm-cyan",label:""},delivered:{color:"text-mm-green border-mm-green",label:""},cancelled:{color:"text-mm-red border-mm-red",label:""},imported:{color:"text-mm-blue border-mm-blue",label:""}}[$]||{color:"text-mm-text-secondary border-mm-border",label:$};return t.jsx("span",{className:`px-2 py-1 text-xs font-mono border ${C.color} rounded`,children:C.label})};return t.jsxs("div",{className:"space-y-4","data-testid":"fbs-orders-list",children:[t.jsx(xj,{activeStatus:g,onStatusChange:f,stats:x}),t.jsxs("div",{className:"card-neon p-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(We,{className:"text-mm-cyan"}),t.jsx("input",{type:"text",placeholder:"  ,     ...",value:P,onChange:$=>k($.target.value),className:"input-neon flex-1","data-testid":"search-input"}),P&&t.jsx("button",{onClick:()=>k(""),className:"text-mm-text-secondary hover:text-mm-cyan transition-colors",children:""})]}),P&&t.jsxs("p",{className:"text-xs text-mm-text-tertiary mt-2 font-mono",children:[" : ",r.length]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("p",{className:"text-sm text-mm-text-secondary font-mono",children:[" : ",t.jsx("span",{className:"text-mm-cyan",children:r.length}),v.length>0&&t.jsxs("span",{className:"ml-4",children:[": ",t.jsx("span",{className:"text-mm-cyan",children:v.length})]})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:D,disabled:j,className:"px-4 py-2 border border-mm-cyan text-mm-cyan rounded hover:bg-mm-cyan/10 transition-colors font-mono text-sm flex items-center space-x-2 disabled:opacity-50","data-testid":"refresh-statuses-btn",children:[t.jsx(qe,{className:j?"animate-spin":""}),t.jsx("span",{children:j?"...":" "})]}),t.jsxs("button",{onClick:()=>m(!0),className:"btn-neon flex items-center space-x-2","data-testid":"open-import-modal",children:[t.jsx(mt,{}),t.jsx("span",{children:" "})]})]})]}),l?t.jsx("div",{className:"card-neon text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse font-mono",children:"// ..."})}):r.length===0?t.jsxs("div",{className:"card-neon text-center py-12",children:[t.jsx(We,{className:"mx-auto text-mm-text-tertiary mb-4",size:48}),t.jsx("p",{className:"text-mm-text-secondary mb-2 font-mono",children:g==="all"?" FBS  ":`    "${g}"`}),t.jsxs("p",{className:"text-sm text-mm-text-tertiary font-mono mb-4",children:["// ",g==="all"?' " "  ':"    "]}),g==="all"&&t.jsxs("button",{onClick:()=>m(!0),className:"btn-neon inline-flex items-center space-x-2",children:[t.jsx(mt,{}),t.jsx("span",{children:" "})]})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"py-4 px-4",children:t.jsx("input",{type:"checkbox",checked:v.length===r.length&&r.length>0,onChange:L,className:"w-4 h-4 bg-mm-dark border-mm-border rounded cursor-pointer","data-testid":"select-all-checkbox"})}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:" "}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""})]})}),t.jsx("tbody",{children:r.map($=>{var Q,C,q;return t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors","data-testid":`order-row-${$.id}`,children:[t.jsx("td",{className:"py-4 px-4",children:t.jsx("input",{type:"checkbox",checked:v.includes($.id),onChange:()=>I($.id),className:"w-4 h-4 bg-mm-dark border-mm-border rounded cursor-pointer","data-testid":`select-order-${$.id}`})}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-cyan",children:$.order_number}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm uppercase",children:$.marketplace}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-text-secondary",children:new Date($.created_at).toLocaleDateString("ru-RU")}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:((Q=$.items)==null?void 0:Q.length)>0?t.jsxs("div",{className:"max-w-xs",children:[t.jsx("div",{className:"text-mm-cyan text-xs mb-1",children:$.items.map(J=>J.article).join(", ")}),t.jsxs("div",{className:"text-mm-text-tertiary text-xs",children:[$.items.length," ",$.items.length===1?"":$.items.length<5?"":""]})]}):t.jsx("span",{className:"text-mm-text-tertiary",children:""})}),t.jsxs("td",{className:"py-4 px-4 font-mono text-sm",children:[(q=(C=$.totals)==null?void 0:C.total)==null?void 0:q.toLocaleString("ru-RU"),""]}),t.jsx("td",{className:"py-4 px-4",children:B($.status)}),t.jsx("td",{className:"py-4 px-4 text-center",children:$.stock_updated?t.jsx("span",{className:"text-mm-green",children:""}):t.jsx("span",{className:"text-mm-text-tertiary",children:"-"})}),t.jsx("td",{className:"py-4 px-4 text-right",children:t.jsxs("button",{onClick:()=>E($),className:"btn-neon-sm flex items-center space-x-1 ml-auto","data-testid":`view-order-${$.id}`,children:[t.jsx(Rl,{size:14}),t.jsx("span",{children:""})]})})]},$.id)})})]})})}),d&&t.jsx($p,{type:"fbs",onClose:()=>m(!1),onSuccess:z}),c&&i&&t.jsx(uj,{order:i,isOpen:c,onClose:N,onUpdate:R}),t.jsx(pj,{selectedCount:v.length,onPrintLabels:T,onExportExcel:A,onChangeStatus:H,onClearSelection:()=>w([])})]})}function fj(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!1),[l,o]=p.useState(!1);p.useEffect(()=>{d()},[]);const d=async()=>{try{a(!0);const i=await e.get("/api/orders/fbo");n(i.data)}catch(i){console.error("Failed to load FBO orders:",i)}finally{a(!1)}},m=i=>{const c={processing:{color:"text-mm-blue border-mm-blue",label:""},shipped:{color:"text-mm-cyan border-mm-cyan",label:""},delivered:{color:"text-mm-green border-mm-green",label:""},cancelled:{color:"text-mm-red border-mm-red",label:""},imported:{color:"text-mm-blue border-mm-blue",label:""}}[i]||{color:"text-mm-text-secondary border-mm-border",label:i};return t.jsx("span",{className:`px-2 py-1 text-xs font-mono border ${c.color} rounded`,children:c.label})};return t.jsxs("div",{className:"space-y-4","data-testid":"fbo-orders-list",children:[t.jsx("div",{className:"bg-mm-purple/10 border border-mm-purple p-4 rounded",children:t.jsxs("p",{className:"text-sm text-mm-text-secondary font-mono",children:[t.jsx("span",{className:"text-mm-purple font-bold",children:" FBO :"}),"    .    ,      ."]})}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("p",{className:"text-sm text-mm-text-secondary font-mono",children:[" : ",t.jsx("span",{className:"text-mm-purple",children:s.length})]}),t.jsxs("button",{onClick:()=>o(!0),className:"btn-neon flex items-center space-x-2","data-testid":"open-import-modal",children:[t.jsx(mt,{}),t.jsx("span",{children:"  FBO"})]})]}),r?t.jsx("div",{className:"card-neon text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse font-mono",children:"// ..."})}):s.length===0?t.jsxs("div",{className:"card-neon text-center py-12",children:[t.jsx(_p,{className:"mx-auto text-mm-text-tertiary mb-4",size:48}),t.jsx("p",{className:"text-mm-text-secondary mb-2 font-mono",children:" FBO  "}),t.jsx("p",{className:"text-sm text-mm-text-tertiary font-mono mb-4",children:'//  "  FBO"  '}),t.jsxs("button",{onClick:()=>o(!0),className:"btn-neon inline-flex items-center space-x-2",children:[t.jsx(mt,{}),t.jsx("span",{children:"  FBO"})]})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:" "}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""})]})}),t.jsx("tbody",{children:s.map(i=>{var u,c,h;return t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors","data-testid":`order-row-${i.id}`,children:[t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-purple",children:i.order_number}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm uppercase",children:i.marketplace}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:i.warehouse_name}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-text-secondary",children:new Date(i.created_at).toLocaleDateString("ru-RU")}),t.jsxs("td",{className:"py-4 px-4 font-mono text-sm",children:[((u=i.items)==null?void 0:u.length)||0," "]}),t.jsxs("td",{className:"py-4 px-4 font-mono text-sm",children:[(h=(c=i.totals)==null?void 0:c.total)==null?void 0:h.toLocaleString("ru-RU"),""]}),t.jsx("td",{className:"py-4 px-4",children:m(i.status)}),t.jsx("td",{className:"py-4 px-4 text-right",children:t.jsxs("button",{className:"btn-neon-sm flex items-center space-x-1 ml-auto","data-testid":`view-order-${i.id}`,children:[t.jsx(Rl,{size:14}),t.jsx("span",{children:""})]})})]},i.id)})})]})})}),l&&t.jsx($p,{type:"fbo",onClose:()=>o(!1),onSuccess:d})]})}function yj({onCancel:e,onSuccess:s}){const{api:n}=de(),[r,a]=p.useState([]),[l,o]=p.useState([]),[d,m]=p.useState(!1),[i,u]=p.useState({warehouse_id:"",order_date:new Date().toISOString().split("T")[0],customer:{full_name:"",phone:"",email:"",address:""},items:[],payment_method:"cash",notes:""}),[c,h]=p.useState(""),[g,f]=p.useState([]);p.useEffect(()=>{v(),w()},[]);const v=async()=>{try{const b=await n.get("/api/warehouses");a(b.data)}catch(b){console.error("Failed to load warehouses:",b),V.error("  ")}},w=async()=>{try{const b=await n.get("/api/catalog/products?limit=1000"),S=Array.isArray(b.data)?b.data:b.data.products||[];o(S),console.log(`Loaded ${S.length} products for search`)}catch(b){console.error("Failed to load products:",b),V.error("  ")}},x=b=>{if(h(b),!b){f([]);return}const S=l.filter(E=>{var N,R;return((N=E.article)==null?void 0:N.toLowerCase().includes(b.toLowerCase()))||((R=E.name)==null?void 0:R.toLowerCase().includes(b.toLowerCase()))});f(S.slice(0,10))},y=b=>{var E;if(i.items.find(N=>N.article===b.article)){V.warning("  ");return}const S={product_id:b.id,article:b.article,name:b.name,image:((E=b.images)==null?void 0:E[0])||null,price:b.price_with_discount/100||0,quantity:1,total:b.price_with_discount/100||0};u({...i,items:[...i.items,S]}),h(""),f([])},j=b=>{const S=i.items.filter((E,N)=>N!==b);u({...i,items:S})},_=(b,S)=>{const E=[...i.items];E[b].quantity=parseInt(S)||1,E[b].total=E[b].price*E[b].quantity,u({...i,items:E})},P=(b,S)=>{const E=[...i.items];E[b].price=parseFloat(S)||0,E[b].total=E[b].price*E[b].quantity,u({...i,items:E})},k=()=>i.items.reduce((b,S)=>b+S.total,0),z=async b=>{var S,E;if(b.preventDefault(),!i.warehouse_id){V.error(" ");return}if(i.items.length===0){V.error("    ");return}if(!i.customer.full_name||!i.customer.phone){V.error("  ");return}try{m(!0),await n.post("/api/orders/retail",i),s()}catch(N){console.error("Failed to create retail order:",N),V.error(((E=(S=N.response)==null?void 0:S.data)==null?void 0:E.detail)||"  ")}finally{m(!1)}};return t.jsxs("div",{className:"space-y-6","data-testid":"retail-order-form",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-xl font-mono text-mm-green uppercase",children:"  "}),t.jsx("button",{onClick:e,className:"btn-neon-sm","data-testid":"cancel-form",children:t.jsx(Ke,{})})]}),t.jsxs("form",{onSubmit:z,className:"space-y-6",children:[t.jsxs("div",{className:"card-neon p-4",children:[t.jsx("h4",{className:"text-sm font-mono text-mm-text-secondary mb-4 uppercase",children:" "}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-mono text-mm-text-secondary mb-2",children:"  *"}),t.jsx("input",{type:"date",className:"input-neon w-full",value:i.order_date,onChange:b=>u({...i,order_date:b.target.value}),required:!0,"data-testid":"order-date"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-mono text-mm-text-secondary mb-2",children:" *"}),t.jsxs("select",{className:"input-neon w-full",value:i.warehouse_id,onChange:b=>u({...i,warehouse_id:b.target.value}),required:!0,"data-testid":"select-warehouse",children:[t.jsx("option",{value:"",children:" "}),r.map(b=>t.jsx("option",{value:b.id,children:b.name},b.id))]})]})]})]}),t.jsxs("div",{className:"card-neon p-4",children:[t.jsx("h4",{className:"text-sm font-mono text-mm-text-secondary mb-4 uppercase",children:""}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"  *",className:"input-neon",value:i.customer.full_name,onChange:b=>u({...i,customer:{...i.customer,full_name:b.target.value}}),required:!0,"data-testid":"customer-name"}),t.jsx("input",{type:"tel",placeholder:" *",className:"input-neon",value:i.customer.phone,onChange:b=>u({...i,customer:{...i.customer,phone:b.target.value}}),required:!0,"data-testid":"customer-phone"}),t.jsx("input",{type:"email",placeholder:"Email",className:"input-neon",value:i.customer.email,onChange:b=>u({...i,customer:{...i.customer,email:b.target.value}}),"data-testid":"customer-email"}),t.jsx("input",{type:"text",placeholder:"",className:"input-neon",value:i.customer.address,onChange:b=>u({...i,customer:{...i.customer,address:b.target.value}}),"data-testid":"customer-address"})]})]}),t.jsxs("div",{className:"card-neon p-4",children:[t.jsx("h4",{className:"text-sm font-mono text-mm-text-secondary mb-4 uppercase",children:""}),t.jsxs("div",{className:"mb-4 relative",children:[t.jsx("input",{type:"text",placeholder:"     ...",className:"input-neon w-full",value:c,onChange:b=>x(b.target.value),"data-testid":"product-search"}),g.length>0&&t.jsx("div",{className:"absolute z-10 w-full mt-2 bg-mm-gray border border-mm-border rounded max-h-60 overflow-y-auto",children:g.map(b=>t.jsxs("div",{className:"p-3 hover:bg-mm-cyan/10 cursor-pointer border-b border-mm-border last:border-b-0",onClick:()=>y(b),"data-testid":`search-result-${b.id}`,children:[t.jsx("p",{className:"font-mono text-sm text-mm-cyan",children:b.article}),t.jsx("p",{className:"font-mono text-xs text-mm-text-secondary",children:b.name}),t.jsxs("p",{className:"font-mono text-xs text-mm-text-tertiary",children:[(b.price_with_discount/100).toFixed(2),""]})]},b.id))})]}),i.items.length===0?t.jsx("p",{className:"text-center text-mm-text-tertiary font-mono text-sm py-4",children:"//    "}):t.jsxs("div",{className:"space-y-2",children:[i.items.map((b,S)=>t.jsxs("div",{className:"flex items-center space-x-4 border border-mm-border rounded p-3","data-testid":`item-${S}`,children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-mono text-sm text-mm-cyan",children:b.article}),t.jsx("p",{className:"font-mono text-xs text-mm-text-secondary",children:b.name})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-mm-text-secondary block mb-1",children:"-"}),t.jsx("input",{type:"number",min:"1",className:"input-neon w-20 text-center",value:b.quantity,onChange:E=>_(S,E.target.value),"data-testid":`quantity-${S}`})]}),t.jsx("span",{className:"font-mono text-sm text-mm-text-secondary pt-5",children:""}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-mm-text-secondary block mb-1",children:", "}),t.jsx("input",{type:"number",min:"0",step:"0.01",className:"input-neon w-32 text-right",value:b.price,onChange:E=>P(S,E.target.value),"data-testid":`price-${S}`})]}),t.jsx("div",{className:"pt-5",children:t.jsx("span",{className:"font-mono text-sm text-mm-text-secondary",children:"="})}),t.jsx("div",{className:"pt-5",children:t.jsxs("span",{className:"font-mono text-sm text-mm-green w-32 text-right block font-bold",children:[b.total.toFixed(2),""]})}),t.jsx("button",{type:"button",onClick:()=>j(S),className:"text-mm-red hover:text-mm-red/80 pt-5","data-testid":`remove-${S}`,children:t.jsx(Kt,{})})]})]},S)),t.jsx("div",{className:"border-t border-mm-border pt-4 mt-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"font-mono text-sm text-mm-text-secondary uppercase",children:":"}),t.jsxs("span",{className:"font-mono text-xl text-mm-green",children:[k().toFixed(2),""]})]})})]})]}),t.jsx("div",{className:"card-neon p-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-mono text-mm-text-secondary mb-2",children:" "}),t.jsxs("select",{className:"input-neon w-full",value:i.payment_method,onChange:b=>u({...i,payment_method:b.target.value}),"data-testid":"payment-method",children:[t.jsx("option",{value:"cash",children:""}),t.jsx("option",{value:"card",children:""}),t.jsx("option",{value:"transfer",children:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-mono text-mm-text-secondary mb-2",children:""}),t.jsx("input",{type:"text",className:"input-neon w-full",value:i.notes,onChange:b=>u({...i,notes:b.target.value}),placeholder:" ","data-testid":"notes"})]})]})}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx("button",{type:"button",onClick:e,className:"btn-neon-outline",disabled:d,children:""}),t.jsx("button",{type:"submit",className:"btn-neon",disabled:d||i.items.length===0,"data-testid":"submit-order",children:d?"...":" "})]})]})]})}function gj(){const{api:e}=de(),[s,n]=p.useState([]),[r,a]=p.useState(!0),[l,o]=p.useState(!1),[d,m]=p.useState({status:"",date_from:"",date_to:""});p.useEffect(()=>{i()},[d]);const i=async()=>{try{a(!0);const g=new URLSearchParams;d.status&&g.append("status",d.status),d.date_from&&g.append("date_from",d.date_from),d.date_to&&g.append("date_to",d.date_to);const f=await e.get(`/api/orders/retail?${g.toString()}`);n(f.data)}catch(g){console.error("Failed to load retail orders:",g),V.error("   ")}finally{a(!1)}},u=()=>{o(!1),i(),V.success("   !")},c=g=>{const v={new:{color:"text-mm-blue border-mm-blue",label:""},processing:{color:"text-mm-yellow border-mm-yellow",label:""},completed:{color:"text-mm-green border-mm-green",label:""},cancelled:{color:"text-mm-red border-mm-red",label:""}}[g]||{color:"text-mm-text-secondary border-mm-border",label:g};return t.jsx("span",{className:`px-2 py-1 text-xs font-mono border ${v.color} rounded`,children:v.label})},h=g=>{const f={reserved:{color:"text-mm-yellow border-mm-yellow",label:""},deducted:{color:"text-mm-green border-mm-green",label:""},returned:{color:"text-mm-blue border-mm-blue",label:""},none:{color:"text-mm-text-tertiary border-mm-border",label:"-"}},v=f[g]||f.none;return t.jsx("span",{className:`px-2 py-1 text-xs font-mono border ${v.color} rounded`,children:v.label})};return l?t.jsx(yj,{onCancel:()=>o(!1),onSuccess:u}):t.jsxs("div",{className:"space-y-4","data-testid":"retail-orders-list",children:[t.jsx("div",{className:"card-neon p-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-mono text-mm-text-secondary mb-2",children:""}),t.jsxs("select",{className:"input-neon w-full",value:d.status,onChange:g=>m({...d,status:g.target.value}),"data-testid":"filter-status",children:[t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"new",children:""}),t.jsx("option",{value:"processing",children:""}),t.jsx("option",{value:"completed",children:""}),t.jsx("option",{value:"cancelled",children:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-mono text-mm-text-secondary mb-2",children:" "}),t.jsx("input",{type:"date",className:"input-neon w-full",value:d.date_from,onChange:g=>m({...d,date_from:g.target.value}),"data-testid":"filter-date-from"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-mono text-mm-text-secondary mb-2",children:" "}),t.jsx("input",{type:"date",className:"input-neon w-full",value:d.date_to,onChange:g=>m({...d,date_to:g.target.value}),"data-testid":"filter-date-to"})]})]})}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("p",{className:"text-sm text-mm-text-secondary font-mono",children:[" : ",t.jsx("span",{className:"text-mm-green",children:s.length})]}),t.jsxs("button",{onClick:()=>o(!0),className:"btn-neon flex items-center space-x-2","data-testid":"create-retail-order",children:[t.jsx(Ct,{}),t.jsx("span",{children:" "})]})]}),r?t.jsx("div",{className:"card-neon text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse font-mono",children:"// ..."})}):s.length===0?t.jsxs("div",{className:"card-neon text-center py-12",children:[t.jsx(R0,{className:"mx-auto text-mm-text-tertiary mb-4",size:48}),t.jsx("p",{className:"text-mm-text-secondary mb-2 font-mono",children:"   "}),t.jsx("p",{className:"text-sm text-mm-text-tertiary font-mono mb-4",children:"//   "}),t.jsxs("button",{onClick:()=>o(!0),className:"btn-neon inline-flex items-center space-x-2",children:[t.jsx(Ct,{}),t.jsx("span",{children:" "})]})]}):t.jsx("div",{className:"card-neon overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-xs font-mono",children:""})]})}),t.jsx("tbody",{children:s.map(g=>{var f,v,w,x;return t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors","data-testid":`order-row-${g.id}`,children:[t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-green",children:g.order_number}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-text-secondary",children:new Date(g.created_at).toLocaleDateString("ru-RU")}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:((f=g.customer)==null?void 0:f.full_name)||"-"}),t.jsxs("td",{className:"py-4 px-4 font-mono text-sm",children:[((v=g.items)==null?void 0:v.length)||0," "]}),t.jsxs("td",{className:"py-4 px-4 font-mono text-sm",children:[(x=(w=g.totals)==null?void 0:w.total)==null?void 0:x.toLocaleString("ru-RU"),""]}),t.jsx("td",{className:"py-4 px-4",children:c(g.status)}),t.jsx("td",{className:"py-4 px-4",children:h(g.reserve_status)}),t.jsx("td",{className:"py-4 px-4 text-right",children:t.jsxs("button",{className:"btn-neon-sm flex items-center space-x-1 ml-auto","data-testid":`view-order-${g.id}`,children:[t.jsx(Rl,{size:14}),t.jsx("span",{children:""})]})})]},g.id)})})]})})})]})}function ba({section:e}){const s=Hs(),n=e||(s.pathname.includes("/fbs")?"fbs":s.pathname.includes("/fbo")?"fbo":s.pathname.includes("/retail")?"retail":"fbs"),r=()=>{switch(n){case"fbs":return"FBS (  )";case"fbo":return"FBO (  )";case"retail":return" ";default:return""}};return t.jsxs("div",{className:"space-y-6","data-testid":"orders-page",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl mb-2 text-mm-cyan uppercase font-mono",children:r()}),t.jsx("p",{className:"text-sm text-mm-text-secondary font-mono",children:"//  "})]})}),t.jsxs("div",{children:[n==="fbs"&&t.jsx(hj,{}),n==="fbo"&&t.jsx(fj,{}),n==="retail"&&t.jsx(gj,{})]})]})}const Dp=e=>{const s=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${s}-${n}-${r}`},bj=()=>{const e=new Date,s=new Date(e.getFullYear(),e.getMonth(),1);return Dp(s)},jj=()=>Dp(new Date);function vj(){var y,j,_,P,k,z,b,S,E,N,R,I,L,T,A,H,D,B,$,Q,C,q,J,O,W,se,Z,oe,Re,Te,Ae,Ie,et,it,U,X,ne,ue,F,G,te,le,re,Ne,pe,be,Fe;const{api:e}=de(),[s,n]=p.useState(!1),[r,a]=p.useState(!1),[l,o]=p.useState(null),[d,m]=p.useState(null),[i,u]=p.useState(bj()),[c,h]=p.useState(jj()),g=async()=>{var ie,fe;a(!0),m(null);try{const xe=await e.post("/api/profit-analytics/sync-ozon-data",null,{params:{date_from:i,date_to:c}});alert(`  !

 : ${xe.data.statistics.total_transactions}
: ${xe.data.statistics.saved}
: ${xe.data.statistics.updated}`),await f()}catch(xe){console.error("Sync failed:",xe);const Ye=((fe=(ie=xe.response)==null?void 0:ie.data)==null?void 0:fe.detail)||xe.message||" ";m(` : ${Ye}`)}a(!1)},f=async()=>{var ie,fe;n(!0),m(null);try{const xe=await e.get("/api/profit-analytics/profit-report",{params:{date_from:i,date_to:c}});console.log("Report response:",xe.data),xe.data&&xe.data.revenue&&xe.data.expenses&&xe.data.profit?o(xe.data):(m("    "),o(null))}catch(xe){console.error("Failed to load report:",xe);const Ye=((fe=(ie=xe.response)==null?void 0:ie.data)==null?void 0:fe.detail)||xe.message||" ";m(`  : ${Ye}`),o(null)}n(!1)},v=async()=>{try{const ie=await e.get("/api/profit-analytics/export-profit-report",{params:{date_from:i,date_to:c},responseType:"blob"}),fe=window.URL.createObjectURL(new Blob([ie.data])),xe=document.createElement("a");xe.href=fe,xe.setAttribute("download",`profit_report_${i}_${c}.xlsx`),document.body.appendChild(xe),xe.click(),xe.remove(),alert("  !")}catch(ie){console.error("Export failed:",ie),alert("  ")}},w=ie=>((ie==null||isNaN(ie))&&(ie=0),new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:2}).format(ie)),x=ie=>((ie==null||isNaN(ie))&&(ie=0),`${ie.toFixed(2)}%`);return t.jsxs("div",{className:"space-y-6 pb-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl mb-2 text-mm-cyan uppercase",children:"   "}),t.jsx("p",{className:"comment",children:"//     "})]}),t.jsxs("div",{className:"card-neon p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-2 font-mono",children:" :"}),t.jsx("input",{type:"date",value:i,onChange:ie=>u(ie.target.value),className:"input-mono w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-2 font-mono",children:":"}),t.jsx("input",{type:"date",value:c,onChange:ie=>h(ie.target.value),className:"input-mono w-full"})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:g,disabled:r,className:"btn-primary w-full flex items-center justify-center gap-2",children:[t.jsx(qe,{className:r?"animate-spin":""}),r?"...":""]})}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:f,disabled:s,className:"btn-primary w-full",children:s?"...":" "})})]}),l&&t.jsx("div",{className:"mt-4 pt-4 border-t border-mm-border flex justify-end",children:t.jsxs("button",{onClick:v,className:"btn-secondary flex items-center gap-2",children:[t.jsx(mt,{}),"  EXCEL"]})})]}),d&&t.jsx("div",{className:"card-neon p-6 border-mm-red border-2",children:t.jsx("p",{className:"text-mm-red",children:d})}),s?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"//  ..."})}):l?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"card-neon p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"text-sm text-mm-text-secondary font-mono",children:""}),t.jsx(cn,{className:"text-mm-cyan",size:24})]}),t.jsx("div",{className:"text-3xl font-mono text-mm-cyan mb-2",children:w((y=l==null?void 0:l.revenue)==null?void 0:y.net_sales)}),t.jsxs("div",{className:"text-xs text-mm-text-tertiary font-mono",children:[": ",w((j=l==null?void 0:l.revenue)==null?void 0:j.gross_sales)]})]}),t.jsxs("div",{className:"card-neon p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"text-sm text-mm-text-secondary font-mono",children:""}),t.jsx(_c,{className:"text-mm-red",size:24})]}),t.jsx("div",{className:"text-3xl font-mono text-mm-red mb-2",children:w((_=l==null?void 0:l.expenses)==null?void 0:_.total_expenses)}),t.jsx("div",{className:"text-xs text-mm-text-tertiary font-mono",children:" "})]}),t.jsxs("div",{className:"card-neon p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"text-sm text-mm-text-secondary font-mono",children:" "}),t.jsx(Tl,{className:(((P=l==null?void 0:l.profit)==null?void 0:P.net_profit)??0)>=0?"text-mm-green":"text-mm-red",size:24})]}),t.jsx("div",{className:`text-3xl font-mono mb-2 ${(((k=l==null?void 0:l.profit)==null?void 0:k.net_profit)??0)>=0?"text-mm-green":"text-mm-red"}`,children:w((z=l==null?void 0:l.profit)==null?void 0:z.net_profit)}),t.jsxs("div",{className:"text-xs text-mm-text-tertiary font-mono",children:[": ",x((b=l==null?void 0:l.profit)==null?void 0:b.net_margin_pct)]})]})]}),t.jsxs("div",{className:"card-neon overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-mm-border",children:[t.jsx("h3",{className:"text-lg font-mono text-mm-cyan uppercase",children:"     (P&L)"}),t.jsxs("p",{className:"comment mt-1",children:["// : ",i," - ",c]}),(l==null?void 0:l.statistics)&&t.jsxs("p",{className:"comment",children:["// : ",l.statistics.total_transactions||0]})]}),t.jsxs("div",{className:"p-6 space-y-6 font-mono",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-1 h-6 bg-mm-cyan"}),t.jsx("h4",{className:"text-mm-cyan uppercase",children:""})]}),t.jsxs("div",{className:"pl-6 space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-secondary",children:" "}),t.jsx("span",{children:w((S=l==null?void 0:l.revenue)==null?void 0:S.gross_sales)})]}),t.jsxs("div",{className:"flex justify-between text-mm-red",children:[t.jsx("span",{className:"text-mm-text-secondary",children:""}),t.jsx("span",{children:w((E=l==null?void 0:l.revenue)==null?void 0:E.returns)})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t border-mm-border font-bold text-mm-cyan",children:[t.jsx("span",{children:" "}),t.jsx("span",{children:w((N=l==null?void 0:l.revenue)==null?void 0:N.net_sales)})]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-1 h-6 bg-mm-text-secondary"}),t.jsx("h4",{className:"text-mm-text-secondary uppercase",children:"  (COGS)"})]}),t.jsxs("div",{className:"pl-6 space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between font-bold",children:[t.jsx("span",{className:"text-mm-text-secondary",children:"   "}),t.jsx("span",{className:"text-mm-text-secondary",children:w((R=l==null?void 0:l.cogs)==null?void 0:R.total)})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t border-mm-border font-bold text-lg",children:[t.jsx("span",{className:"text-mm-green",children:"  "}),t.jsx("span",{className:"text-mm-green",children:w((I=l==null?void 0:l.profit)==null?void 0:I.gross_profit)})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-mm-text-tertiary",children:" "}),t.jsx("span",{className:"text-mm-text-tertiary",children:x((L=l==null?void 0:l.profit)==null?void 0:L.gross_margin_pct)})]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-1 h-6 bg-mm-red"}),t.jsx("h4",{className:"text-mm-red uppercase",children:""})]}),t.jsxs("div",{className:"pl-6 space-y-2 text-sm mb-4",children:[t.jsx("div",{className:"text-mm-text-secondary mb-2",children:"1  "}),t.jsxs("div",{className:"pl-4 space-y-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-tertiary",children:"  "}),t.jsx("span",{children:w((A=(T=l==null?void 0:l.expenses)==null?void 0:T.commissions)==null?void 0:A.marketplace_base)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-tertiary",children:"    (9%)"}),t.jsx("span",{children:w((D=(H=l==null?void 0:l.expenses)==null?void 0:H.commissions)==null?void 0:D.bonus_commission)})]}),t.jsxs("div",{className:"flex justify-between font-bold pt-1",children:[t.jsx("span",{children:" "}),t.jsx("span",{children:w(($=(B=l==null?void 0:l.expenses)==null?void 0:B.commissions)==null?void 0:$.total)})]})]})]}),t.jsxs("div",{className:"pl-6 space-y-2 text-sm mb-4",children:[t.jsx("div",{className:"text-mm-text-secondary mb-2",children:"2 "}),t.jsxs("div",{className:"pl-4 space-y-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-tertiary",children:"   "}),t.jsx("span",{children:w((C=(Q=l==null?void 0:l.expenses)==null?void 0:Q.logistics)==null?void 0:C.delivery_to_customer)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-tertiary",children:"  "}),t.jsx("span",{children:w((J=(q=l==null?void 0:l.expenses)==null?void 0:q.logistics)==null?void 0:J.last_mile)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-tertiary",children:"  "}),t.jsx("span",{children:w((W=(O=l==null?void 0:l.expenses)==null?void 0:O.logistics)==null?void 0:W.returns)})]}),t.jsxs("div",{className:"flex justify-between font-bold pt-1",children:[t.jsx("span",{children:" "}),t.jsx("span",{children:w((Z=(se=l==null?void 0:l.expenses)==null?void 0:se.logistics)==null?void 0:Z.total)})]})]})]}),t.jsxs("div",{className:"pl-6 space-y-2 text-sm mb-4",children:[t.jsx("div",{className:"text-mm-text-secondary mb-2",children:"3  "}),t.jsxs("div",{className:"pl-4 space-y-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-tertiary",children:" "}),t.jsx("span",{children:w((Re=(oe=l==null?void 0:l.expenses)==null?void 0:oe.services)==null?void 0:Re.storage)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-tertiary",children:" "}),t.jsx("span",{children:w((Ae=(Te=l==null?void 0:l.expenses)==null?void 0:Te.services)==null?void 0:Ae.acquiring)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-tertiary",children:"   "}),t.jsx("span",{children:w((et=(Ie=l==null?void 0:l.expenses)==null?void 0:Ie.services)==null?void 0:et.pvz_fees)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-tertiary",children:" "}),t.jsx("span",{children:w((U=(it=l==null?void 0:l.expenses)==null?void 0:it.services)==null?void 0:U.packaging)})]}),t.jsxs("div",{className:"flex justify-between font-bold pt-1",children:[t.jsx("span",{children:" "}),t.jsx("span",{children:w((ne=(X=l==null?void 0:l.expenses)==null?void 0:X.services)==null?void 0:ne.total)})]})]})]}),t.jsxs("div",{className:"pl-6 space-y-2 text-sm mb-4",children:[t.jsx("div",{className:"text-mm-text-secondary mb-2",children:"4 "}),t.jsx("div",{className:"pl-4 space-y-1",children:t.jsxs("div",{className:"flex justify-between font-bold",children:[t.jsx("span",{children:" "}),t.jsx("span",{children:w((F=(ue=l==null?void 0:l.expenses)==null?void 0:ue.penalties)==null?void 0:F.total)})]})})]}),t.jsxs("div",{className:"pl-6 space-y-2 text-sm mb-4",children:[t.jsx("div",{className:"text-mm-text-secondary mb-2",children:"5  "}),t.jsx("div",{className:"pl-4 space-y-1",children:t.jsxs("div",{className:"flex justify-between font-bold",children:[t.jsx("span",{children:" "}),t.jsx("span",{children:w((te=(G=l==null?void 0:l.expenses)==null?void 0:G.other_expenses)==null?void 0:te.total)})]})})]}),t.jsx("div",{className:"pl-6 pt-4 border-t border-mm-border",children:t.jsxs("div",{className:"flex justify-between font-bold text-lg text-mm-red",children:[t.jsx("span",{children:" "}),t.jsx("span",{children:w((le=l==null?void 0:l.expenses)==null?void 0:le.total_expenses)})]})})]}),t.jsxs("div",{className:"pt-4 border-t-2 border-mm-cyan",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-1 h-6 bg-mm-green"}),t.jsx("h4",{className:"text-mm-green uppercase",children:" "})]}),t.jsxs("div",{className:"pl-6 space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-lg font-bold text-mm-green",children:[t.jsx("span",{children:"  "}),t.jsx("span",{children:w((re=l==null?void 0:l.profit)==null?void 0:re.operating_profit)})]}),t.jsxs("div",{className:"flex justify-between text-sm text-mm-text-secondary",children:[t.jsx("span",{children:" "}),t.jsx("span",{children:x((Ne=l==null?void 0:l.profit)==null?void 0:Ne.operating_margin_pct)})]}),t.jsxs("div",{className:"pt-3 mt-3 border-t border-mm-border",children:[t.jsxs("div",{className:`flex justify-between text-2xl font-bold ${(((pe=l==null?void 0:l.profit)==null?void 0:pe.net_profit)??0)>=0?"text-mm-green":"text-mm-red"}`,children:[t.jsx("span",{children:"  "}),t.jsx("span",{children:w((be=l==null?void 0:l.profit)==null?void 0:be.net_profit)})]}),t.jsxs("div",{className:"flex justify-between text-sm text-mm-text-secondary mt-1",children:[t.jsx("span",{children:" "}),t.jsx("span",{children:x((Fe=l==null?void 0:l.profit)==null?void 0:Fe.net_margin_pct)})]}),t.jsx("p",{className:"text-xs text-mm-text-tertiary mt-2 italic",children:"//      "})]})]})]})]})]})]}):!s&&!d?t.jsxs("div",{className:"card-neon text-center py-12",children:[t.jsx("p",{className:"text-mm-text-secondary mb-2",children:'    " "'}),t.jsx("p",{className:"comment",children:"//      "})]}):null]})}const Mp=e=>{const s=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${s}-${n}-${r}`},Nj=()=>{const e=new Date,s=new Date(e.getFullYear(),e.getMonth(),1);return Mp(s)},wj=()=>Mp(new Date);function kj(){const{api:e}=de(),[s,n]=p.useState(!1),[r,a]=p.useState([]),[l,o]=p.useState(0),[d,m]=p.useState(Nj()),[i,u]=p.useState(wj()),[c]=p.useState(50),[h,g]=p.useState(0),[f,v]=p.useState(null),w=async()=>{var k,z;n(!0);try{const b=await e.get("/api/profit-analytics/transactions",{params:{date_from:d,date_to:i,limit:c,offset:h}});a(b.data.transactions||[]),o(b.data.total_count||0)}catch(b){console.error("Failed to load transactions:",b),alert(" : "+(((z=(k=b.response)==null?void 0:k.data)==null?void 0:z.detail)||b.message))}n(!1)};p.useEffect(()=>{w()},[h]);const x=k=>((k==null||isNaN(k))&&(k=0),new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:2}).format(k)),y=k=>k?new Date(k).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",j=k=>{v(f===k?null:k)},_=()=>{h+c<l&&g(h+c)},P=()=>{h>0&&g(Math.max(0,h-c))};return t.jsxs("div",{className:"space-y-6 pb-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl mb-2 text-mm-cyan uppercase",children:""}),t.jsx("p",{className:"comment",children:"//    "})]}),t.jsx("div",{className:"card-neon p-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-2 font-mono",children:" :"}),t.jsx("input",{type:"date",value:d,onChange:k=>m(k.target.value),className:"input-mono w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-mm-text-secondary mb-2 font-mono",children:":"}),t.jsx("input",{type:"date",value:i,onChange:k=>u(k.target.value),className:"input-mono w-full"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:()=>{g(0),w()},disabled:s,className:"btn-primary w-full",children:s?"...":""})})]})}),s?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// ..."})}):r.length===0?t.jsxs("div",{className:"card-neon text-center py-12",children:[t.jsx("p",{className:"text-mm-text-secondary mb-2",children:" "}),t.jsx("p",{className:"comment",children:"//   "})]}):t.jsxs("div",{className:"card-neon overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-mm-border",children:[t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:" "}),t.jsx("th",{className:"text-left py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-right py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""}),t.jsx("th",{className:"text-center py-4 px-4 text-mm-text-secondary uppercase text-sm font-mono",children:""})]})}),t.jsx("tbody",{children:r.map(k=>{var E,N,R,I,L,T,A,H,D,B,$,Q,C,q,J,O,W,se;const z=(((N=(E=k.breakdown)==null?void 0:E.commission)==null?void 0:N.total)||0)+(((I=(R=k.breakdown)==null?void 0:R.logistics)==null?void 0:I.total)||0)+(((T=(L=k.breakdown)==null?void 0:L.services)==null?void 0:T.total)||0)+(((H=(A=k.breakdown)==null?void 0:A.penalties)==null?void 0:H.total)||0),b=k.amount-z,S=f===k._id;return t.jsxs(K.Fragment,{children:[t.jsxs("tr",{className:"border-b border-mm-border hover:bg-mm-gray transition-colors",children:[t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-text-secondary",children:y(k.operation_date)}),t.jsx("td",{className:"py-4 px-4 font-mono text-sm text-mm-cyan",children:k.order_id||"-"}),t.jsxs("td",{className:"py-4 px-4 text-sm",children:[((D=k.items)==null?void 0:D.length)||0," "]}),t.jsx("td",{className:"py-4 px-4 text-right font-mono text-sm",children:x(k.amount)}),t.jsx("td",{className:"py-4 px-4 text-right font-mono text-sm text-mm-red",children:x(z)}),t.jsx("td",{className:`py-4 px-4 text-right font-mono text-sm font-bold ${b>=0?"text-mm-green":"text-mm-red"}`,children:x(b)}),t.jsx("td",{className:"py-4 px-4 text-center",children:t.jsx("button",{onClick:()=>j(k._id),className:"text-mm-cyan hover:text-mm-text transition-colors",children:S?t.jsx(L0,{size:20}):t.jsx(Ol,{size:20})})})]}),S&&t.jsx("tr",{className:"bg-mm-gray border-b border-mm-border",children:t.jsx("td",{colSpan:"7",className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 font-mono text-sm",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-mm-cyan uppercase mb-3",children:""}),t.jsx("div",{className:"space-y-2",children:((B=k.items)==null?void 0:B.map((Z,oe)=>t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-secondary",children:Z.name||Z.sku}),t.jsxs("span",{children:[x(Z.price),"  ",Z.quantity]})]},oe)))||t.jsx("p",{className:"text-mm-text-tertiary",children:" "})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-mm-red uppercase mb-3",children:""}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-secondary",children:" "}),t.jsx("span",{children:x((Q=($=k.breakdown)==null?void 0:$.commission)==null?void 0:Q.total)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-secondary",children:""}),t.jsx("span",{children:x((q=(C=k.breakdown)==null?void 0:C.logistics)==null?void 0:q.total)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-secondary",children:""}),t.jsx("span",{children:x((O=(J=k.breakdown)==null?void 0:J.services)==null?void 0:O.total)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-mm-text-secondary",children:""}),t.jsx("span",{children:x((se=(W=k.breakdown)==null?void 0:W.penalties)==null?void 0:se.total)})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t border-mm-border font-bold text-mm-red",children:[t.jsx("span",{children:""}),t.jsx("span",{children:x(z)})]})]})]})]})})})]},k._id)})})]})}),t.jsxs("div",{className:"p-4 border-t border-mm-border flex items-center justify-between",children:[t.jsxs("div",{className:"text-sm text-mm-text-secondary font-mono",children:[" ",h+1,"-",Math.min(h+c,l),"  ",l]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:P,disabled:h===0,className:"btn-secondary text-sm",children:" "}),t.jsx("button",{onClick:_,disabled:h+c>=l,className:"btn-secondary text-sm",children:" "})]})]})]})]})}const xo=({title:e,icon:s,items:n,isActive:r})=>{const[a,l]=K.useState(!1),o=K.useRef(null),d=Dt();K.useEffect(()=>{const i=u=>{o.current&&!o.current.contains(u.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const m=i=>{l(!1),d(i)};return t.jsxs("div",{className:"relative",ref:o,children:[t.jsxs("button",{onClick:()=>l(!a),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap flex items-center gap-1 h-12 ${r?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,children:[t.jsx(s,{className:"inline"}),e,t.jsx(Ol,{className:`ml-1 transition-transform ${a?"rotate-180":""}`})]}),a&&t.jsx("div",{className:"absolute top-full left-0 mt-1 bg-mm-darker rounded-lg shadow-2xl border border-mm-border py-2 min-w-[220px]",style:{zIndex:9999},children:n.map((i,u)=>t.jsxs("button",{onClick:()=>m(i.path),className:"w-full text-left px-4 py-3 hover:bg-mm-gray flex items-center gap-3 text-sm text-mm-text hover:text-mm-cyan transition-colors font-medium",children:[i.icon&&t.jsx(i.icon,{className:"w-4 h-4"}),i.label]},u))})]})},_j=({children:e})=>{const{user:s,logout:n}=de(),r=Dt(),a=Hs(),l=a.pathname.startsWith("/warehouses")||a.pathname.startsWith("/suppliers")||a.pathname.startsWith("/income-orders")||a.pathname.startsWith("/stock"),o=a.pathname.startsWith("/catalog")||a.pathname.startsWith("/products"),d=a.pathname.startsWith("/orders"),m=[{label:"",path:"/warehouses",icon:Un},{label:"",path:"/suppliers",icon:Bn},{label:"  ",path:"/income-orders",icon:mt},{label:"",path:"/stock",icon:fi},{label:"",path:"/stock/sync",icon:hi}],i=[{label:"",path:"/catalog/products",icon:jp},{label:"",path:"/catalog/categories",icon:$0},{label:"",path:"/catalog/pricing",icon:cn},{label:"",path:"/catalog/matching",icon:vr},{label:" ",path:"/catalog/import",icon:ss}],u=[{label:"FBS (  )",path:"/orders/fbs",icon:We},{label:"FBO (  )",path:"/orders/fbo",icon:fi},{label:" ",path:"/orders/retail",icon:gi}];return t.jsxs("div",{className:"min-h-screen bg-mm-black",children:[t.jsx("header",{className:"border-b border-mm-border bg-mm-darker",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h1",{className:"text-2xl font-bold cursor-pointer",onClick:()=>r("/"),children:["MINIMAL",t.jsx("span",{className:"text-mm-purple",children:"MOD"})," ",t.jsx("span",{className:"status-new",children:"SELLER"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("span",{className:"text-mm-text-secondary",children:s==null?void 0:s.email}),t.jsx(Sp,{}),t.jsx("button",{onClick:n,className:"btn-primary",children:"LOGOUT"})]})]})})}),t.jsx("nav",{className:"border-b border-mm-border bg-mm-dark relative",style:{zIndex:100},children:t.jsx("div",{className:"max-w-7xl mx-auto px-4",children:t.jsxs("div",{className:"flex space-x-6 h-12",children:[t.jsxs("button",{onClick:()=>r("/integrations"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap flex items-center gap-1 h-12 ${a.pathname==="/integrations"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,children:[t.jsx(vp,{className:"inline"}),""]}),t.jsx(xo,{title:"",icon:Un,items:m,isActive:l}),t.jsx(xo,{title:"",icon:We,items:i,isActive:o}),t.jsx(xo,{title:"",icon:gi,items:u,isActive:d}),t.jsxs("button",{onClick:()=>r("/finance"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap flex items-center gap-1 h-12 ${a.pathname==="/finance"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,children:[t.jsx(Np,{className:"inline"}),""]}),t.jsxs("button",{onClick:()=>r("/profit-report"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap flex items-center gap-1 h-12 ${a.pathname==="/profit-report"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,children:[t.jsx(Tl,{className:"inline"})," &L"]}),t.jsxs("button",{onClick:()=>r("/transactions"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap flex items-center gap-1 h-12 ${a.pathname==="/transactions"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,children:[t.jsx(hi,{className:"inline"}),""]}),t.jsxs("button",{onClick:()=>r("/balance"),className:`px-4 font-mono uppercase text-sm transition-colors whitespace-nowrap flex items-center gap-1 h-12 ${a.pathname==="/balance"?"text-mm-cyan border-b-2 border-mm-cyan":"text-mm-text-secondary hover:text-mm-cyan"}`,children:[t.jsx(cn,{className:"inline"}),""]})]})})}),t.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:e})]})};function je({children:e,requiredRole:s}){const{user:n,loading:r}=de();return r?t.jsx("div",{className:"min-h-screen bg-mm-black flex items-center justify-center",children:t.jsx("p",{className:"text-mm-cyan animate-pulse",children:"// LOADING..."})}):n?s&&n.role!==s?t.jsx(jr,{to:"/"}):e:t.jsx(jr,{to:"/login"})}function we({children:e}){return t.jsx(_j,{children:e})}function Sj(){const{user:e}=de();return t.jsxs(ig,{children:[t.jsx(ye,{path:"/login",element:e?t.jsx(jr,{to:"/"}):t.jsx(_0,{})}),t.jsx(ye,{path:"/",element:t.jsx(je,{children:(e==null?void 0:e.role)==="admin"?t.jsx(H0,{}):t.jsx(jr,{to:"/catalog/products"})})}),t.jsx(ye,{path:"/integrations",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(Cp,{})})})}),t.jsx(ye,{path:"/warehouses",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(Pp,{})})})}),t.jsx(ye,{path:"/warehouses/:id",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(X0,{})})})}),t.jsx(ye,{path:"/suppliers",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(Op,{})})})}),t.jsx(ye,{path:"/income-orders",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(Rp,{})})})}),t.jsx(ye,{path:"/income-orders/new",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(jm,{})})})}),t.jsx(ye,{path:"/income-orders/:id/edit",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(jm,{})})})}),t.jsx(ye,{path:"/stock",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(zp,{})})})}),t.jsx(ye,{path:"/stock/sync",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(Tp,{})})})}),t.jsx(ye,{path:"/catalog/products",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(Fp,{})})})}),t.jsx(ye,{path:"/catalog/products/new",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(bm,{})})})}),t.jsx(ye,{path:"/catalog/products/:id/edit",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(bm,{})})})}),t.jsx(ye,{path:"/catalog/categories",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(Z0,{})})})}),t.jsx(ye,{path:"/catalog/pricing",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(oj,{})})})}),t.jsx(ye,{path:"/catalog/matching",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(aj,{})})})}),t.jsx(ye,{path:"/catalog/import",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(rj,{})})})}),t.jsx(ye,{path:"/orders",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(ba,{})})})}),t.jsx(ye,{path:"/orders/fbs",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(ba,{section:"fbs"})})})}),t.jsx(ye,{path:"/orders/fbo",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(ba,{section:"fbo"})})})}),t.jsx(ye,{path:"/orders/retail",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(ba,{section:"retail"})})})}),t.jsx(ye,{path:"/finance",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(Ep,{})})})}),t.jsx(ye,{path:"/balance",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(Lp,{})})})}),t.jsx(ye,{path:"/profit-report",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(vj,{})})})}),t.jsx(ye,{path:"/transactions",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(kj,{})})})}),t.jsx(ye,{path:"/products/:id/edit",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(Q0,{})})})}),t.jsx(ye,{path:"/products-new",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(Y0,{})})})}),t.jsx(ye,{path:"/stock-balances",element:t.jsx(je,{children:t.jsx(we,{children:t.jsx(J0,{})})})}),t.jsx(ye,{path:"/admin/categories",element:t.jsx(je,{requiredRole:"admin",children:t.jsx(q0,{})})}),t.jsx(ye,{path:"/admin/internal-categories",element:t.jsx(je,{requiredRole:"admin",children:t.jsx(ij,{})})}),t.jsx(ye,{path:"*",element:t.jsx(jr,{to:"/catalog/products"})})]})}function Cj(){return t.jsx(hg,{children:t.jsx(w0,{children:t.jsxs(N0,{children:[t.jsx(Hg,{position:"top-right",theme:"dark",toastOptions:{style:{background:"#0a0e27",border:"1px solid #00f0ff",color:"#e0e7ff"}}}),t.jsx(Sj,{})]})})})}po.createRoot(document.getElementById("root")).render(t.jsx(K.StrictMode,{children:t.jsx(Cj,{})}));
